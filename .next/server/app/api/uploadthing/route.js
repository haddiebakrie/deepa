"use strict";(()=>{var e={};e.id=811,e.ids=[811],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3211:(e,t,s)=>{let n,i,r,a,o,l,c,u,p,m,h,f,d;s.r(t),s.d(t,{originalPathname:()=>k0,patchFetch:()=>k1,requestAsyncStorage:()=>kQ,routeModule:()=>kY,serverHooks:()=>kZ,staticGenerationAsyncStorage:()=>kX});var g={};s.r(g),s.d(g,{GET:()=>kH,POST:()=>kW});var b=s(9303),x=s(8716),y=s(670);let v=function(e,t){if("function"==typeof e)return function(){return e(arguments)?t.apply(this,arguments):e=>t(e,...arguments)};switch(e){case 0:case 1:throw RangeError(`Invalid arity ${e}`);case 2:return function(e,s){return arguments.length>=2?t(e,s):function(s){return t(s,e)}};case 3:return function(e,s,n){return arguments.length>=3?t(e,s,n):function(n){return t(n,e,s)}};case 4:return function(e,s,n,i){return arguments.length>=4?t(e,s,n,i):function(i){return t(i,e,s,n)}};case 5:return function(e,s,n,i,r){return arguments.length>=5?t(e,s,n,i,r):function(r){return t(r,e,s,n,i)}};default:return function(){if(arguments.length>=e)return t.apply(this,arguments);let s=arguments;return function(e){return t(e,...s)}}}},_=e=>e,w=e=>()=>e,S=w(!0),k=w(!1),O=w(void 0);function E(e,t,s,n,i,r,a,o,l){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return s(t(e));case 4:return n(s(t(e)));case 5:return i(n(s(t(e))));case 6:return r(i(n(s(t(e)))));case 7:return a(r(i(n(s(t(e))))));case 8:return o(a(r(i(n(s(t(e)))))));case 9:return l(o(a(r(i(n(s(t(e))))))));default:{let e=arguments[0];for(let t=1;t<arguments.length;t++)e=arguments[t](e);return e}}}let T=()=>"3.3.5",R=Symbol.for(`effect/GlobalValue/globalStoreId/${T()}`);R in globalThis||(globalThis[R]=new Map);let I=globalThis[R],N=(e,t)=>(I.has(e)||I.set(e,t()),I.get(e)),F=e=>"string"==typeof e,A=e=>"number"==typeof e,j=e=>"boolean"==typeof e,M=e=>"bigint"==typeof e,C=e=>"symbol"==typeof e,L=e=>"function"==typeof e,U=e=>void 0===e,P=e=>void 0!==e,$=e=>null!==e,D=e=>!1,z=e=>"object"==typeof e&&null!==e,B=e=>z(e)||L(e),q=v(2,(e,t)=>B(e)&&t in e),K=v(2,(e,t)=>q(e,"_tag")&&e._tag===t),J=e=>null==e,V=e=>null!=e,G=e=>e instanceof Date,H=e=>q(e,Symbol.iterator),W=e=>z(e)&&!Array.isArray(e),Y=e=>q(e,"then")&&L(e.then),Q=e=>`BUG: ${e} - please report an issue at https://github.com/Effect-TS/effect/issues`;Symbol.iterator;class X{self;called=!1;constructor(e){this.self=e}next(e){return this.called?{value:e,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(e){return{value:e,done:!0}}throw(e){throw e}[Symbol.iterator](){return new X(this.self)}}class Z{_state;constructor(e,t,s,n){return J(t)&&J(e)?(t=4294967295*Math.random()>>>0,e=0):J(t)&&(t=e,e=0),J(n)&&J(s)?(n=this._state?this._state[3]:4150755663,s=this._state?this._state[2]:335903614):J(n)&&(n=s,s=0),this._state=new Int32Array([0,0,s>>>0,(1|(n||0))>>>0]),this._next(),ee(this._state,this._state[0],this._state[1],e>>>0,t>>>0),this._next(),this}getState(){return[this._state[0],this._state[1],this._state[2],this._state[3]]}setState(e){this._state[0]=e[0],this._state[1]=e[1],this._state[2]=e[2],this._state[3]=1|e[3]}integer(e){if(!e)return this._next();if(((e>>>=0)&e-1)==0)return this._next()&e-1;let t=0,s=(-e>>>0)%e>>>0;for(t=this._next();t<s;t=this._next());return t%e}number(){return((67108863&this._next())*134217728+(134217727&this._next())*1)/9007199254740992}_next(){var e;let t,s,n,i;let r=this._state[0]>>>0,a=this._state[1]>>>0;e=this._state,t=(a>>>16)*32557>>>0,s=(65535&a)*19605>>>0,n=(65535&a)*32557>>>0,i=(a>>>16)*19605+((s>>>16)+(t>>>16))>>>0,(n=n+(s=s<<16>>>0)>>>0)>>>0<s>>>0&&(i=i+1>>>0),(n=n+(t=t<<16>>>0)>>>0)>>>0<t>>>0&&(i=i+1>>>0),i=(i=i+Math.imul(a,1481765933)>>>0)+Math.imul(r,1284865837)>>>0,e[0]=i,e[1]=n,ee(this._state,this._state[0],this._state[1],this._state[2],this._state[3]);let o=r>>>18,l=(a>>>18|r<<14)>>>0;o=(o^r)>>>0;let c=((l=(l^a)>>>0)>>>27|o<<5)>>>0,u=r>>>27;return(c>>>u|c<<((-u>>>0&31)>>>0))>>>0}}function ee(e,t,s,n,i){let r=t+n>>>0,a=s+i>>>0;a>>>0<s>>>0&&(r=r+1|0),e[0]=r,e[1]=a}let et=Symbol.for("effect/Utils/YieldWrap");class es{#e;constructor(e){this.#e=e}[et](){return this.#e}}let en=N("effect/Utils/isStructuralRegion",()=>({enabled:!1,tester:void 0})),ei=(e=>{let t={[e]:e=>e()};return function(s){return t[e](s)}})("effect_internal_function"),er=N(Symbol.for("effect/Hash/randomHashCache"),()=>new WeakMap),ea=Symbol.for("effect/Hash"),eo=e=>{if(!0===en.enabled)return 0;switch(typeof e){case"number":return em(e);case"bigint":return eh(e.toString(10));case"boolean":case"symbol":return eh(String(e));case"string":return eh(e);case"undefined":return eh("undefined");case"function":case"object":if(null===e)return eh("null");if(e instanceof Date)return eo(e.toISOString());if(ep(e))return e[ea]();return el(e);default:throw Error(`BUG: unhandled typeof ${typeof e} - please report an issue at https://github.com/Effect-TS/effect/issues`)}},el=e=>(er.has(e)||er.set(e,em(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER))),er.get(e)),ec=e=>t=>53*t^e,eu=e=>3221225471&e|e>>>1&1073741824,ep=e=>q(e,ea),em=e=>{if(e!=e||e===1/0)return 0;let t=0|e;for(t!==e&&(t^=4294967295*e);e>4294967295;)t^=e/=4294967295;return eu(e)},eh=e=>{let t=5381,s=e.length;for(;s;)t=33*t^e.charCodeAt(--s);return eu(t)},ef=(e,t)=>{let s=12289;for(let n=0;n<t.length;n++)s^=E(eh(t[n]),ec(eo(e[t[n]])));return eu(s)},ed=e=>ef(e,Object.keys(e)),eg=e=>{let t=6151;for(let s=0;s<e.length;s++)t=E(t,ec(eo(e[s])));return eu(t)},eb=function(){if(1==arguments.length){let e=arguments[0];return function(t){return Object.defineProperty(e,ea,{value:()=>t,enumerable:!1}),t}}let e=arguments[0],t=arguments[1];return Object.defineProperty(e,ea,{value:()=>t,enumerable:!1}),t},ex=Symbol.for("effect/Equal");function ey(){return 1==arguments.length?e=>ev(e,arguments[0]):ev(arguments[0],arguments[1])}function ev(e,t){if(e===t)return!0;let s=typeof e;if(s!==typeof t)return!1;if("object"===s||"function"===s){if(null!==e&&null!==t){if(e_(e)&&e_(t))return!!(eo(e)===eo(t)&&e[ex](t))||!!en.enabled&&!!en.tester&&en.tester(e,t);if(e instanceof Date&&t instanceof Date)return e.toISOString()===t.toISOString()}if(en.enabled){if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every((e,s)=>ev(e,t[s]));if(Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){let s=Object.keys(e),n=Object.keys(t);if(s.length===n.length){for(let n of s)if(!(n in t&&ev(e[n],t[n])))return!!en.tester&&en.tester(e,t);return!0}}return!!en.tester&&en.tester(e,t)}}return!!en.enabled&&!!en.tester&&en.tester(e,t)}let e_=e=>q(e,ex),ew=()=>ey,eS=Symbol.for("nodejs.util.inspect.custom"),ek=e=>q(e,"toJSON")&&L(e.toJSON)&&0===e.toJSON.length?e.toJSON():Array.isArray(e)?e.map(ek):e,eO=e=>JSON.stringify(e,null,2),eE=(e,t=2)=>{try{return"object"==typeof e?eT(e,t):String(e)}catch(t){return String(e)}},eT=(e,t)=>{let s=[],n=JSON.stringify(e,(e,t)=>"object"==typeof t&&null!==t?s.includes(t)?void 0:s.push(t)&&t:t,t);return s=void 0,n},eR=(e,t)=>{switch(t.length){case 1:return t[0](e);case 2:return t[1](t[0](e));case 3:return t[2](t[1](t[0](e)));case 4:return t[3](t[2](t[1](t[0](e))));case 5:return t[4](t[3](t[2](t[1](t[0](e)))));case 6:return t[5](t[4](t[3](t[2](t[1](t[0](e))))));case 7:return t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))));case 8:return t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e))))))));case 9:return t[8](t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))))));default:{let s=e;for(let e=0,n=t.length;e<n;e++)s=t[e](s);return s}}},eI="Async",eN="Commit",eF="Failure",eA="OnFailure",ej="OnSuccess",eM="OnSuccessAndFailure",eC="Success",eL="Sync",eU="UpdateRuntimeFlags",eP="While",e$="WithRuntime",eD="Yield",ez="RevertFlags",eB=Symbol.for("effect/Effect"),eq=Symbol.for("effect/Stream"),eK=Symbol.for("effect/Sink"),eJ=Symbol.for("effect/Channel"),eV={_R:e=>e,_E:e=>e,_A:e=>e,_V:T()},eG={[eB]:eV,[eq]:eV,[eK]:{_A:e=>e,_In:e=>e,_L:e=>e,_E:e=>e,_R:e=>e},[eJ]:{_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutElem:e=>e,_OutDone:e=>e},[ex](e){return this===e},[ea](){return eb(this,el(this))},[Symbol.iterator](){return new X(new es(this))},pipe(){return eR(this,arguments)}},eH={[ea](){return eb(this,ed(this))},[ex](e){let t=Object.keys(this),s=Object.keys(e);if(t.length!==s.length)return!1;for(let s of t)if(!(s in e&&ey(this[s],e[s])))return!1;return!0}},eW={...{...eG,_op:eN},...eH},eY=Symbol.for("effect/Option"),eQ={...eG,[eY]:{_A:e=>e},[eS](){return this.toJSON()},toString(){return eO(this.toJSON())}},eX=Object.assign(Object.create(eQ),{_tag:"Some",_op:"Some",[ex](e){return e1(e)&&e3(e)&&ey(this.value,e.value)},[ea](){return eb(this,ec(eo(this._tag))(eo(this.value)))},toJSON(){return{_id:"Option",_tag:this._tag,value:ek(this.value)}}}),eZ=eo("None"),e0=Object.assign(Object.create(eQ),{_tag:"None",_op:"None",[ex]:e=>e1(e)&&e2(e),[ea]:()=>eZ,toJSON(){return{_id:"Option",_tag:this._tag}}}),e1=e=>q(e,eY),e2=e=>"None"===e._tag,e3=e=>"Some"===e._tag,e5=Object.create(e0),e4=e=>{let t=Object.create(eX);return t.value=e,t},e6=Symbol.for("effect/Context/Tag"),e8=Symbol.for("effect/STM"),e7={...eG,_tag:"Tag",_op:"Tag",[e8]:eV,[e6]:{_Service:e=>e,_Identifier:e=>e},toString(){return eO(this.toJSON())},toJSON(){return{_id:"Tag",key:this.key,stack:this.stack}},[eS](){return this.toJSON()},of:e=>e,context(e){return tr(this,e)}},e9=Symbol.for("effect/Context"),te={[e9]:{_Services:e=>e},[ex](e){if(tn(e)&&this.unsafeMap.size===e.unsafeMap.size){for(let t of this.unsafeMap.keys())if(!e.unsafeMap.has(t)||!ey(this.unsafeMap.get(t),e.unsafeMap.get(t)))return!1;return!0}return!1},[ea](){return eb(this,em(this.unsafeMap.size))},pipe(){return eR(this,arguments)},toString(){return eO(this.toJSON())},toJSON(){return{_id:"Context",services:Array.from(this.unsafeMap).map(ek)}},[eS](){return this.toJSON()}},tt=e=>{let t=Object.create(te);return t.unsafeMap=e,t},ts=e=>{let t=Error(`Service not found${e.key?`: ${String(e.key)}`:""}`);if(e.stack){let s=e.stack.split("\n");if(s.length>2){let e=s[2].match(/at (.*)/);e&&(t.message=t.message+` (defined at ${e[1]})`)}}if(t.stack){let e=t.stack.split("\n");e.splice(1,3),t.stack=e.join("\n")}return t},tn=e=>q(e,e9),ti=tt(new Map),tr=(e,t)=>tt(new Map([[e.key,t]])),ta=v(3,(e,t,s)=>{let n=new Map(e.unsafeMap);return n.set(t.key,s),tt(n)}),to=v(2,(e,t)=>{if(!e.unsafeMap.has(t.key))throw ts(t);return e.unsafeMap.get(t.key)}),tl=v(2,(e,t)=>e.unsafeMap.has(t.key)?e4(e.unsafeMap.get(t.key)):e5),tc=v(2,(e,t)=>{let s=new Map(e.unsafeMap);for(let[e,n]of t.unsafeMap)s.set(e,n);return tt(s)}),tu=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=2;let s=Error();Error.stackTraceLimit=t;let n=Object.create(e7);return Object.defineProperty(n,"stack",{get:()=>s.stack}),n.key=e,n},tp=e=>q(e,e6),tm=()=>ti,th=e=>()=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=2;let s=Error();function n(){}return Error.stackTraceLimit=t,Object.setPrototypeOf(n,e7),n.key=e,Object.defineProperty(n,"stack",{get:()=>s.stack}),n},tf=e=>(t,s)=>t===s||e(t,s),td=v(2,(e,t)=>tf((s,n)=>e(t(s),t(n)))),tg=(e=>e.getTime(),e=>tf((t,s)=>{if(t.length!==s.length)return!1;for(let n=0;n<t.length;n++)if(!e(t[n],s[n]))return!1;return!0})),tb=e=>e.length>0,tx=Symbol.for("effect/Either"),ty={...eG,[tx]:{_R:e=>e},[eS](){return this.toJSON()},toString(){return eO(this.toJSON())}},tv=Object.assign(Object.create(ty),{_tag:"Right",_op:"Right",[ex](e){return tw(e)&&tk(e)&&ey(this.right,e.right)},[ea](){return ec(eo(this._tag))(eo(this.right))},toJSON(){return{_id:"Either",_tag:this._tag,right:ek(this.right)}}}),t_=Object.assign(Object.create(ty),{_tag:"Left",_op:"Left",[ex](e){return tw(e)&&tS(e)&&ey(this.left,e.left)},[ea](){return ec(eo(this._tag))(eo(this.left))},toJSON(){return{_id:"Either",_tag:this._tag,left:ek(this.left)}}}),tw=e=>q(e,tx),tS=e=>"Left"===e._tag,tk=e=>"Right"===e._tag,tO=e=>{let t=Object.create(t_);return t.left=e,t},tE=e=>{let t=Object.create(tv);return t.right=e,t},tT=((e,t)=>e2(e)?tO(t()):tE(e.value),()=>e5),tR=v(2,(e,{onNone:t,onSome:s})=>e2(e)?t():s(e.value)),tI=v(2,(e,t)=>e2(e)?t():e.value),tN=v(2,(e,t)=>e2(e)?t():e),tF=v(2,(e,t)=>e2(e)?e4(t()):e),tA=e=>null==e?tT():e4(e),tj=tI(O),tM=e=>(...t)=>{try{return e4(e(...t))}catch(e){return tT()}},tC=v(2,(e,t)=>{if(e3(e))return e.value;throw t()})(()=>Error("getOrThrow called on a None")),tL=v(2,(e,t)=>e2(e)?tT():e4(t(e.value))),tU=v(2,(e,t)=>e2(e)?tT():t(e.value)),tP=v(2,(e,t)=>e2(e)?tT():t(e.value)),t$=v(2,(e,t)=>tP(e,e=>t(e)?e4(e):e5)),tD=e=>tf((t,s)=>e2(t)?e2(s):!e2(s)&&e(t.value,s.value)),tz=(n=ew(),v(2,(e,t)=>!e2(e)&&n(e.value,t)));Symbol.iterator,()=>tB;let tB={next:()=>({done:!0,value:void 0})},tq=e=>(t,s)=>t===s?0:e(t,s),tK=tq((e,t)=>e<t?-1:1),tJ=((e,t)=>e<t?-1:1,v(2,(e,t)=>tq((s,n)=>e(t(s),t(n)))));Object.fromEntries,(e,t)=>{let s=[];for(let n of tV(e))s.push(t(n,e[n]));return s};let tV=e=>Object.keys(e),tG=(...e)=>e,tH=e=>Array(e),tW=e=>Array.isArray(e)?e:Array.from(e),tY=v(2,(e,{onEmpty:t,onNonEmpty:s})=>t2(e)?s(t7(e),st(e)):t()),tQ=v(2,(e,t)=>[t,...e]),tX=v(2,(e,t)=>[...e,t]),tZ=v(2,(e,t)=>tW(e).concat(tW(t))),t0=Array.isArray,t1=e=>0===e.length,t2=tb,t3=(e,t)=>e<0||e>=t.length,t5=(e,t)=>Math.floor(Math.min(Math.max(0,e),t.length)),t4=v(2,(e,t)=>{let s=Math.floor(t);return t3(s,e)?tT():e4(e[s])}),t6=v(2,(e,t)=>{let s=Math.floor(t);if(t3(s,e))throw Error(`Index ${s} out of bounds`);return e[s]}),t8=t4(0),t7=t6(0),t9=e=>t2(e)?e4(se(e)):tT(),se=e=>e[e.length-1],st=e=>e.slice(1),ss=(e,t)=>{let s=0;for(let n of e){if(!t(n,s))break;s++}return s},sn=v(2,(e,t)=>su(e,ss(e,t))),si=v(2,(e,t)=>{let s=tW(e);return s.slice(t5(t,s),s.length)}),sr=e=>Array.from(e).reverse(),sa=v(2,(e,t)=>{let s=Array.from(e);return s.sort(t),s}),so=v(2,(e,t)=>sl(e,t,tG)),sl=v(3,(e,t,s)=>{let n=tW(e),i=tW(t);if(t2(n)&&t2(i)){let e=[s(t7(n),t7(i))],t=Math.min(n.length,i.length);for(let r=1;r<t;r++)e[r]=s(n[r],i[r]);return e}return[]}),sc=ew(),su=v(2,(e,t)=>{let s=Array.from(e),n=Math.floor(t);return t2(s)?n>=1?sp(s,n):[[],s]:[s,[]]}),sp=v(2,(e,t)=>{let s=Math.max(1,Math.floor(t));return s>=e.length?[sm(e),[]]:[tQ(e.slice(1,s),t7(e)),e.slice(s)]}),sm=e=>e.slice(),sh=v(3,(e,t,s)=>{let n=tW(e),i=tW(t);return t2(n)?t2(i)?sw(s)(tZ(n,i)):n:i}),sf=v(2,(e,t)=>sh(e,t,sc)),sd=()=>[],sg=e=>[e],sb=v(2,(e,t)=>e.map(t)),sx=v(2,(e,t)=>{if(t1(e))return[];let s=[];for(let n=0;n<e.length;n++){let i=t(e[n],n);for(let e=0;e<i.length;e++)s.push(i[e])}return s}),sy=sx(_),sv=v(3,(e,t,s)=>tW(e).reduce((e,t,n)=>s(e,t,n),t)),s_=((e,t,s)=>tW(e).reduceRight((e,t,n)=>s(e,t,n),t),(e,t)=>{let s;let n=[],i=e;for(;e3(s=t(i));){let[e,t]=s.value;n.push(e),i=t}return n}),sw=v(2,(e,t)=>{let s=tW(e);if(t2(s)){let e=[t7(s)];for(let n of st(s))e.every(e=>!t(n,e))&&e.push(n);return e}return[]}),sS=e=>sw(e,ew()),sk=v(2,(e,t)=>tW(e).join(t)),sO=Symbol.for("effect/Chunk"),sE=[],sT=tf((e,t)=>e.length===t.length&&sU(e).every((e,s)=>ey(e,sB(t,s)))),sR={[sO]:{_A:e=>e},toString(){return eO(this.toJSON())},toJSON(){return{_id:"Chunk",values:sU(this).map(ek)}},[eS](){return this.toJSON()},[ex](e){return sN(e)&&sT(this,e)},[ea](){return eb(this,eg(sU(this)))},[Symbol.iterator](){switch(this.backing._tag){case"IArray":return this.backing.array[Symbol.iterator]();case"IEmpty":return sE[Symbol.iterator]();default:return sU(this)[Symbol.iterator]()}},pipe(){return eR(this,arguments)}},sI=e=>{let t=Object.create(sR);switch(t.backing=e,e._tag){case"IEmpty":t.length=0,t.depth=0,t.left=t,t.right=t;break;case"IConcat":t.length=e.left.length+e.right.length,t.depth=1+Math.max(e.left.depth,e.right.depth),t.left=e.left,t.right=e.right;break;case"IArray":t.length=e.array.length,t.depth=0,t.left=sF,t.right=sF;break;case"ISingleton":t.length=1,t.depth=0,t.left=sF,t.right=sF;break;case"ISlice":t.length=e.length,t.depth=e.chunk.depth+1,t.left=sF,t.right=sF}return t},sN=e=>q(e,sO),sF=sI({_tag:"IEmpty"}),sA=()=>sF,sj=(...e)=>1===e.length?sM(e[0]):sz(e),sM=e=>sI({_tag:"ISingleton",a:e}),sC=e=>sN(e)?e:sI({_tag:"IArray",array:tW(e)}),sL=(e,t,s)=>{switch(e.backing._tag){case"IArray":!function(e,t,s,n,i){for(let t=0;t<Math.min(e.length,0+i);t++)s[n+t-0]=e[t]}(e.backing.array,0,t,s,e.length);break;case"IConcat":sL(e.left,t,s),sL(e.right,t,s+e.left.length);break;case"ISingleton":t[s]=e.backing.a;break;case"ISlice":{let n=0,i=s;for(;n<e.length;)t[i]=sB(e,n),n+=1,i+=1}}},sU=e=>{switch(e.backing._tag){case"IEmpty":return sE;case"IArray":return e.backing.array;default:{let t=Array(e.length);return sL(e,t,0),e.backing={_tag:"IArray",array:t},e.left=sF,e.right=sF,e.depth=0,t}}},sP=e=>{switch(e.backing._tag){case"IEmpty":case"ISingleton":return e;case"IArray":return sI({_tag:"IArray",array:sr(e.backing.array)});case"IConcat":return sI({_tag:"IConcat",left:sP(e.backing.right),right:sP(e.backing.left)});case"ISlice":return sD(sr(sU(e)))}},s$=v(2,(e,t)=>t<0||t>=e.length?tT():e4(sB(e,t))),sD=e=>sI({_tag:"IArray",array:e}),sz=e=>sD(e),sB=v(2,(e,t)=>{switch(e.backing._tag){case"IEmpty":throw Error("Index out of bounds");case"ISingleton":if(0!==t)throw Error("Index out of bounds");return e.backing.a;case"IArray":if(t>=e.length||t<0)throw Error("Index out of bounds");return e.backing.array[t];case"IConcat":return t<e.left.length?sB(e.left,t):sB(e.right,t-e.left.length);case"ISlice":return sB(e.backing.chunk,t+e.backing.offset)}}),sq=v(2,(e,t)=>sV(e,sM(t))),sK=v(2,(e,t)=>sV(sM(t),e)),sJ=v(2,(e,t)=>{if(t<=0)return e;if(t>=e.length)return sF;switch(e.backing._tag){case"ISlice":return sI({_tag:"ISlice",chunk:e.backing.chunk,offset:e.backing.offset+t,length:e.backing.length-t});case"IConcat":if(t>e.left.length)return sJ(e.right,t-e.left.length);return sI({_tag:"IConcat",left:sJ(e.left,t),right:e.right});default:return sI({_tag:"ISlice",chunk:e,offset:t,length:e.length-t})}}),sV=v(2,(e,t)=>{if("IEmpty"===e.backing._tag)return t;if("IEmpty"===t.backing._tag)return e;let s=t.depth-e.depth;if(1>=Math.abs(s))return sI({_tag:"IConcat",left:e,right:t});if(s<-1){if(e.left.depth>=e.right.depth){let s=sV(e.right,t);return sI({_tag:"IConcat",left:e.left,right:s})}{let s=sV(e.right.right,t);if(s.depth===e.depth-3){let t=sI({_tag:"IConcat",left:e.right.left,right:s});return sI({_tag:"IConcat",left:e.left,right:t})}{let t=sI({_tag:"IConcat",left:e.left,right:e.right.left});return sI({_tag:"IConcat",left:t,right:s})}}}if(t.right.depth>=t.left.depth)return sI({_tag:"IConcat",left:sV(e,t.left),right:t.right});{let s=sV(e,t.left.left);if(s.depth===t.depth-3){let e=sI({_tag:"IConcat",left:s,right:t.left.right});return sI({_tag:"IConcat",left:e,right:t.right})}{let e=sI({_tag:"IConcat",left:t.left.right,right:t.right});return sI({_tag:"IConcat",left:s,right:e})}}}),sG=e=>0===e.length,sH=e=>e.length>0,sW=s$(0),sY=e=>sB(e,0),sQ=e=>sJ(e,1),sX=v(2,(e,{onLeft:t,onRight:s})=>tS(e)?t(e.left):s(e.right))({onLeft:_,onRight:_}),sZ=v(2,(e,t)=>{if(tk(e))return e.right;throw t(e.left)});function s0(e,t){var s;return s=e&t-1,s-=s>>1&1431655765,s=(s=(858993459&s)+(s>>2&858993459))+(s>>4)&252645135,s+=s>>8,127&(s+=s>>16)}let s1=(e,t)=>({value:e,previous:t});function s2(e,t,s,n){let i=n;if(!e){let e=n.length;i=Array(e);for(let t=0;t<e;++t)i[t]=n[t]}return i[t]=s,i}function s3(e,t,s){let n=s.length-1,i=0,r=0,a=s;if(e)i=r=t;else for(a=Array(n);i<t;)a[r++]=s[i++];for(++i;i<=n;)a[r++]=s[i++];return e&&(a.length=n),a}class s5{_tag="EmptyNode";modify(e,t,s,n,i,r){let a=s(tT());return e2(a)?new s5:(++r.value,new s8(e,n,i,a))}}function s4(e){return K(e,"EmptyNode")}function s6(e,t){return!s4(e)&&t===e.edit}class s8{edit;hash;key;value;_tag="LeafNode";constructor(e,t,s,n){this.edit=e,this.hash=t,this.key=s,this.value=n}modify(e,t,s,n,i,r){if(ey(i,this.key)){let t=s(this.value);return t===this.value?this:e2(t)?(--r.value,new s5):s6(this,e)?(this.value=t,this):new s8(e,n,i,t)}let a=s(tT());return e2(a)?this:(++r.value,nt(e,t,this.hash,this,n,new s8(e,n,i,a)))}}class s7{edit;hash;children;_tag="CollisionNode";constructor(e,t,s){this.edit=e,this.hash=t,this.children=s}modify(e,t,s,n,i,r){if(n===this.hash){let t=s6(this,e),n=this.updateCollisionList(t,e,this.hash,this.children,s,i,r);return n===this.children?this:n.length>1?new s7(e,this.hash,n):n[0]}let a=s(tT());return e2(a)?this:(++r.value,nt(e,t,this.hash,this,n,new s8(e,n,i,a)))}updateCollisionList(e,t,s,n,i,r,a){let o=n.length;for(let l=0;l<o;++l){let o=n[l];if("key"in o&&ey(r,o.key)){let c=o.value,u=i(c);if(u===c)return n;if(e2(u))return--a.value,s3(e,l,n);return s2(e,l,new s8(t,s,r,u),n)}}let l=i(tT());return e2(l)?n:(++a.value,s2(e,o,new s8(t,s,r,l),n))}}class s9{edit;mask;children;_tag="IndexedNode";constructor(e,t,s){this.edit=e,this.mask=t,this.children=s}modify(e,t,s,n,i,r){let a;let o=this.mask,l=this.children,c=n>>>t&31,u=1<<c,p=s0(o,u),m=o&u,h=s6(this,e);if(!m){let a=new s5().modify(e,t+5,s,n,i,r);return a?l.length>=16?function(e,t,s,n,i){let r=[],a=n,o=0;for(let e=0;a;++e)1&a&&(r[e]=i[o++]),a>>>=1;return r[t]=s,new ne(e,o+1,r)}(e,c,a,o,l):new s9(e,o|u,function(e,t,s,n){let i=n.length;if(e){let e=i;for(;e>=t;)n[e--]=n[e];return n[t]=s,n}let r=0,a=0,o=Array(i+1);for(;r<t;)o[a++]=n[r++];for(o[t]=s;r<i;)o[++a]=n[r++];return o}(h,p,a,l)):this}let f=l[p],d=f.modify(e,t+5,s,n,i,r);if(f===d)return this;let g=o;if(s4(d)){var b;if(!(g&=~u))return new s5;if(l.length<=2&&(s4(b=l[1^p])||"LeafNode"===b._tag||"CollisionNode"===b._tag))return l[1^p];a=s3(h,p,l)}else a=s2(h,p,d,l);return h?(this.mask=g,this.children=a,this):new s9(e,g,a)}}class ne{edit;size;children;_tag="ArrayNode";constructor(e,t,s){this.edit=e,this.size=t,this.children=s}modify(e,t,s,n,i,r){let a,o=this.size,l=this.children,c=n>>>t&31,u=l[c],p=(u||new s5).modify(e,t+5,s,n,i,r);if(u===p)return this;let m=s6(this,e);if(s4(u)&&!s4(p))++o,a=s2(m,c,p,l);else if(!s4(u)&&s4(p)){if(--o<=8)return function(e,t,s,n){let i=Array(t-1),r=0,a=0;for(let e=0,t=n.length;e<t;++e)if(e!==s){let t=n[e];t&&!s4(t)&&(i[r++]=t,a|=1<<e)}return new s9(e,a,i)}(e,o,c,l);a=s2(m,c,new s5,l)}else a=s2(m,c,p,l);return m?(this.size=o,this.children=a,this):new ne(e,o,a)}}function nt(e,t,s,n,i,r){let a;let o=t;for(;;){let t=function(e,t,s,n,i,r){if(s===i)return new s7(e,s,[r,n]);let a=s>>>t&31,o=i>>>t&31;return a===o?t=>new s9(e,1<<a|1<<o,[t]):new s9(e,1<<a|1<<o,a<o?[n,r]:[r,n])}(e,o,s,n,i,r);if("function"==typeof t)a=s1(t,a),o+=5;else{let e=t;for(;null!=a;)e=a.value(e),a=a.previous;return e}}}let ns="effect/HashMap",nn=Symbol.for(ns),ni={[nn]:nn,[Symbol.iterator](){return new na(this,(e,t)=>[e,t])},[ea](){let e=eo(ns);for(let t of this)e^=E(eo(t[0]),ec(eo(t[1])));return eb(this,e)},[ex](e){if(nm(e)){if(e._size!==this._size)return!1;for(let t of this){let s=E(e,nf(t[0],eo(t[0])));if(e2(s)||!ey(t[1],s.value))return!1}return!0}return!1},toString(){return eO(this.toJSON())},toJSON(){return{_id:"HashMap",values:Array.from(this).map(ek)}},[eS](){return this.toJSON()},pipe(){return eR(this,arguments)}},nr=(e,t,s,n)=>{let i=Object.create(ni);return i._editable=e,i._edit=t,i._root=s,i._size=n,i};class na{map;f;v;constructor(e,t){this.map=e,this.f=t,this.v=nl(this.map._root,this.f,void 0)}next(){if(e2(this.v))return{done:!0,value:void 0};let e=this.v.value;return this.v=no(e.cont),{done:!1,value:e.value}}[Symbol.iterator](){return new na(this.map,this.f)}}let no=e=>e?nc(e[0],e[1],e[2],e[3],e[4]):tT(),nl=(e,t,s)=>{switch(e._tag){case"LeafNode":if(e3(e.value))return e4({value:t(e.key,e.value.value),cont:s});return no(s);case"CollisionNode":case"ArrayNode":case"IndexedNode":{let n=e.children;return nc(n.length,n,0,t,s)}default:return no(s)}},nc=(e,t,s,n,i)=>{for(;s<e;){let r=t[s++];if(r&&!s4(r))return nl(r,n,[e,t,s,n,i])}return no(i)},nu=nr(!1,0,new s5,0),np=()=>nu,nm=e=>q(e,nn),nh=v(2,(e,t)=>nf(e,t,eo(t))),nf=v(3,(e,t,s)=>{let n=e._root,i=0;for(;;)switch(n._tag){case"LeafNode":return ey(t,n.key)?n.value:tT();case"CollisionNode":if(s===n.hash){let e=n.children;for(let s=0,n=e.length;s<n;++s){let n=e[s];if("key"in n&&ey(t,n.key))return n.value}}return tT();case"IndexedNode":{let e=1<<(s>>>i&31);if(n.mask&e){n=n.children[s0(n.mask,e)],i+=5;break}return tT()}case"ArrayNode":if(n=n.children[s>>>i&31]){i+=5;break}return tT();default:return tT()}}),nd=v(2,(e,t)=>e3(nf(e,t,eo(t)))),ng=v(3,(e,t,s)=>nw(e,t,()=>e4(s))),nb=v(3,(e,t,s)=>e._editable?(e._root=t,e._size=s,e):t===e._root?e:nr(e._editable,e._edit,t,s)),nx=e=>new na(e,e=>e),ny=e=>e._size,nv=e=>nr(!0,e._edit+1,e._root,e._size),n_=e=>(e._editable=!1,e),nw=((e,t)=>{let s=nv(e);return t(s),n_(s)},v(3,(e,t,s)=>nS(e,t,eo(t),s))),nS=v(4,(e,t,s,n)=>{let i={value:e._size},r=e._root.modify(e._editable?e._edit:NaN,0,n,s,t,i);return E(e,nb(r,i.value))}),nk=v(2,(e,t)=>nw(e,t,tT)),nO=v(2,(e,t)=>nT(e,np(),(e,s,n)=>ng(e,n,t(s,n)))),nE=v(2,(e,t)=>nT(e,void 0,(e,s,n)=>t(s,n))),nT=v(3,(e,t,s)=>{let n;let i=e._root;if("LeafNode"===i._tag)return e3(i.value)?s(t,i.value.value,i.key):t;if("EmptyNode"===i._tag)return t;let r=[i.children];for(;n=r.pop();)for(let e=0,i=n.length;e<i;){let i=n[e++];i&&!s4(i)&&("LeafNode"===i._tag?e3(i.value)&&(t=s(t,i.value.value,i.key)):r.push(i.children))}return t}),nR="effect/HashSet",nI=Symbol.for(nR),nN={[nI]:nI,[Symbol.iterator](){return nx(this._keyMap)},[ea](){return eb(this,ec(eo(this._keyMap))(eo(nR)))},[ex](e){return!!nA(e)&&ny(this._keyMap)===ny(e._keyMap)&&ey(this._keyMap,e._keyMap)},toString(){return eO(this.toJSON())},toJSON(){return{_id:"HashSet",values:Array.from(this).map(ek)}},[eS](){return this.toJSON()},pipe(){return eR(this,arguments)}},nF=e=>{let t=Object.create(nN);return t._keyMap=e,t},nA=e=>q(e,nI),nj=nF(np()),nM=()=>nj,nC=v(2,(e,t)=>nd(e._keyMap,t)),nL=v(2,(e,t)=>{let s=!1;for(let n of e)if(s=t(n))break;return s}),nU=v(2,(e,t)=>!nL(e,e=>!t(e))),nP=e=>nF(nv(e._keyMap)),n$=e=>(e._keyMap._editable=!1,e),nD=v(2,(e,t)=>{let s=nP(e);return t(s),n$(s)}),nz=v(2,(e,t)=>e._keyMap._editable?(ng(t,!0)(e._keyMap),e):nF(ng(t,!0)(e._keyMap))),nB=v(2,(e,t)=>e._keyMap._editable?(nk(t)(e._keyMap),e):nF(nk(t)(e._keyMap))),nq=v(2,(e,t)=>nD(e,e=>{for(let s of t)nB(e,s)})),nK=v(2,(e,t)=>nD(nM(),s=>{for(let n of(nJ(e,e=>nz(s,e)),t))nz(s,n)})),nJ=v(2,(e,t)=>nE(e._keyMap,(e,s)=>t(s))),nV=v(3,(e,t,s)=>nT(e._keyMap,t,(e,t,n)=>s(e,n))),nG=e=>{let t=nP(nM());for(let s of e)nz(t,s);return n$(t)},nH=(...e)=>{let t=nP(nM());for(let s of e)nz(t,s);return n$(t)},nW=e=>ny(e._keyMap),nY=Symbol.for("effect/MutableRef"),nQ={[nY]:nY,toString(){return eO(this.toJSON())},toJSON(){return{_id:"MutableRef",current:ek(this.current)}},[eS](){return this.toJSON()},pipe(){return eR(this,arguments)}},nX=e=>{let t=Object.create(nQ);return t.current=e,t},nZ=v(3,(e,t,s)=>!!ey(t,e.current)&&(e.current=s,!0)),n0=e=>e.current,n1=v(2,(e,t)=>(e.current=t,e)),n2="effect/FiberId",n3=Symbol.for(n2),n5="None",n4="Runtime",n6="Composite",n8=eh(`${n2}-${n5}`);class n7{[n3]=n3;_tag=n5;id=-1;startTimeMillis=-1;[ea](){return n8}[ex](e){return is(e)&&e._tag===n5}toString(){return eO(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag}}[eS](){return this.toJSON()}}class n9{id;startTimeMillis;[n3]=n3;_tag=n4;constructor(e,t){this.id=e,this.startTimeMillis=t}[ea](){return eb(this,eh(`${n2}-${this._tag}-${this.id}-${this.startTimeMillis}`))}[ex](e){return is(e)&&e._tag===n4&&this.id===e.id&&this.startTimeMillis===e.startTimeMillis}toString(){return eO(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,id:this.id,startTimeMillis:this.startTimeMillis}}[eS](){return this.toJSON()}}class ie{left;right;[n3]=n3;_tag=n6;constructor(e,t){this.left=e,this.right=t}_hash;[ea](){return E(eh(`${n2}-${this._tag}`),ec(eo(this.left)),ec(eo(this.right)),eb(this))}[ex](e){return is(e)&&e._tag===n6&&ey(this.left,e.left)&&ey(this.right,e.right)}toString(){return eO(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,left:ek(this.left),right:ek(this.right)}}[eS](){return this.toJSON()}}let it=new n7,is=e=>q(e,n3),ii=e=>e._tag===n5||E(iu(e),nU(e=>ii(e))),ir=v(2,(e,t)=>e._tag===n5?t:t._tag===n5?e:new ie(e,t)),ia=v(2,(e,t)=>ii(e)?t:e),io=e=>{switch(e._tag){case n5:return nM();case n4:return nH(e.id);case n6:return E(io(e.left),nK(io(e.right)))}},il=N(Symbol.for("effect/Fiber/Id/_fiberCounter"),()=>nX(0)),ic=e=>Array.from(io(e)).map(e=>`#${e}`).join(","),iu=e=>{switch(e._tag){case n5:return nM();case n4:return nH(e);case n6:return E(iu(e.left),nK(iu(e.right)))}},ip=it,im=(e,t)=>new n9(e,t),ih=(e,t)=>new ie(e,t),id=()=>{let e=n0(il);return E(il,n1(e+1)),new n9(e,Date.now())},ig=e=>{let t=nv(np());for(let s of e)ng(t,s[0],s[1]);return n_(t)},ib=e=>e&&s4(e._root),ix=Symbol.for("effect/List"),iy=e=>tW(e),iv=td(tg(ey),iy),i_={[ix]:ix,_tag:"Cons",toString(){return eO(this.toJSON())},toJSON(){return{_id:"List",_tag:"Cons",values:iy(this).map(ek)}},[eS](){return this.toJSON()},[ex](e){return iO(e)&&this._tag===e._tag&&iv(this,e)},[ea](){return eb(this,eg(iy(this)))},[Symbol.iterator](){let e=!1,t=this;return{next(){if(e)return this.return();if("Nil"===t._tag)return e=!0,this.return();let s=t.head;return t=t.tail,{done:e,value:s}},return:t=>(e||(e=!0),{done:!0,value:t})}},pipe(){return eR(this,arguments)}},iw=(e,t)=>{let s=Object.create(i_);return s.head=e,s.tail=t,s},iS=eh("Nil"),ik=Object.create({[ix]:ix,_tag:"Nil",toString(){return eO(this.toJSON())},toJSON:()=>({_id:"List",_tag:"Nil"}),[eS](){return this.toJSON()},[ea]:()=>iS,[ex](e){return iO(e)&&this._tag===e._tag},[Symbol.iterator]:()=>({next:()=>({done:!0,value:void 0})}),pipe(){return eR(this,arguments)}}),iO=e=>q(e,ix),iE=e=>"Nil"===e._tag,iT=e=>"Cons"===e._tag,iR=(e,t)=>iw(e,t),iI=()=>ik,iN=e=>iw(e,ik),iF=v(2,(e,t)=>ij(t,e)),iA=v(2,(e,t)=>iR(t,e)),ij=v(2,(e,t)=>{if(iE(e))return t;if(iE(t))return e;{let s=iw(t.head,e),n=s,i=t.tail;for(;!iE(i);){let t=iw(i.head,e);n.tail=t,n=t,i=i.tail}return s}}),iM=v(3,(e,t,s)=>{let n=t,i=e;for(;!iE(i);)n=s(n,i.head),i=i.tail;return n}),iC=e=>{let t=iI(),s=e;for(;!iE(s);)t=iA(t,s.head),s=s.tail;return t},iL="Expected List to be non-empty",iU=e=>{if(iE(e))throw Error(iL);return e.head},iP=e=>{if(iE(e))throw Error(iL);return e.tail};Array.prototype;let i$=function(){function e(e){e&&Object.assign(this,e)}return e.prototype=eH,e}(),iD=e=>Object.assign(Object.create(eH),e),iz=Symbol.for("effect/DifferChunkPatch");function iB(e){return e}({...i$.prototype,[iz]:{_Value:iB,_Patch:iB}});let iq=Symbol.for("effect/DifferContextPatch");function iK(e){return e}let iJ={...i$.prototype,[iq]:{_Value:iK,_Patch:iK}},iV=Object.create(Object.assign(Object.create(iJ),{_tag:"Empty"})),iG=()=>iV,iH=Object.assign(Object.create(iJ),{_tag:"AndThen"}),iW=(e,t)=>{let s=Object.create(iH);return s.first=e,s.second=t,s},iY=Object.assign(Object.create(iJ),{_tag:"AddService"}),iQ=(e,t)=>{let s=Object.create(iY);return s.key=e,s.service=t,s},iX=Object.assign(Object.create(iJ),{_tag:"RemoveService"}),iZ=e=>{let t=Object.create(iX);return t.key=e,t},i0=Object.assign(Object.create(iJ),{_tag:"UpdateService"}),i1=(e,t)=>{let s=Object.create(i0);return s.key=e,s.update=t,s},i2=(e,t)=>{let s=new Map(e.unsafeMap),n=iG();for(let[e,i]of t.unsafeMap.entries())if(s.has(e)){let t=s.get(e);s.delete(e),ey(t,i)||(n=i3(i1(e,()=>i))(n))}else s.delete(e),n=i3(iQ(e,i))(n);for(let[e]of s.entries())n=i3(iZ(e))(n);return n},i3=v(2,(e,t)=>iW(e,t)),i5=v(2,(e,t)=>{if("Empty"===e._tag)return t;let s=!1,n=sM(e),i=new Map(t.unsafeMap);for(;sH(n);){let e=sY(n),t=sQ(n);switch(e._tag){case"Empty":n=t;break;case"AddService":i.set(e.key,e.service),n=t;break;case"AndThen":n=sK(sK(t,e.second),e.first);break;case"RemoveService":i.delete(e.key),n=t;break;case"UpdateService":i.set(e.key,e.update(i.get(e.key))),s=!0,n=t}}if(!s)return tt(i);let r=new Map;for(let[e]of t.unsafeMap)i.has(e)&&(r.set(e,i.get(e)),i.delete(e));for(let[e,t]of i)r.set(e,t);return tt(r)}),i4=Symbol.for("effect/DifferHashMapPatch");function i6(e){return e}({...i$.prototype,[i4]:{_Value:i6,_Key:i6,_Patch:i6}});let i8=Symbol.for("effect/DifferHashSetPatch");function i7(e){return e}let i9={...i$.prototype,[i8]:{_Value:i7,_Key:i7,_Patch:i7}},re=Object.create(Object.assign(Object.create(i9),{_tag:"Empty"})),rt=()=>re,rs=Object.assign(Object.create(i9),{_tag:"AndThen"}),rn=(e,t)=>{let s=Object.create(rs);return s.first=e,s.second=t,s},ri=Object.assign(Object.create(i9),{_tag:"Add"}),rr=e=>{let t=Object.create(ri);return t.value=e,t},ra=Object.assign(Object.create(i9),{_tag:"Remove"}),ro=e=>{let t=Object.create(ra);return t.value=e,t},rl=(e,t)=>{let[s,n]=nV([e,rt()],([e,t],s)=>nC(s)(e)?[nB(s)(e),t]:[e,rc(rr(s))(t)])(t);return nV(n,(e,t)=>rc(ro(t))(e))(s)},rc=v(2,(e,t)=>rn(e,t)),ru=v(2,(e,t)=>{if("Empty"===e._tag)return t;let s=t,n=sM(e);for(;sH(n);){let e=sY(n),t=sQ(n);switch(e._tag){case"Empty":n=t;break;case"AndThen":n=sK(e.first)(sK(e.second)(t));break;case"Add":s=nz(e.value)(s),n=t;break;case"Remove":s=nB(e.value)(s),n=t}}return s}),rp=Symbol.for("effect/DifferOrPatch");function rm(e){return e}let rh={...i$.prototype,[rp]:{_Value:rm,_Key:rm,_Patch:rm}},rf=Object.create(Object.assign(Object.create(rh),{_tag:"Empty"})),rd=Object.assign(Object.create(rh),{_tag:"AndThen"}),rg=(e,t)=>{let s=Object.create(rd);return s.first=e,s.second=t,s},rb=Object.assign(Object.create(rh),{_tag:"SetLeft"}),rx=Object.assign(Object.create(rh),{_tag:"SetRight"}),ry=Object.assign(Object.create(rh),{_tag:"UpdateLeft"}),rv=Object.assign(Object.create(rh),{_tag:"UpdateRight"}),r_=((e,t)=>rg(e,t),Symbol.for("effect/DifferReadonlyArrayPatch"));function rw(e){return e}let rS={...i$.prototype,[r_]:{_Value:rw,_Patch:rw}},rk=Object.create(Object.assign(Object.create(rS),{_tag:"Empty"})),rO=()=>rk,rE=Object.assign(Object.create(rS),{_tag:"AndThen"}),rT=(e,t)=>{let s=Object.create(rE);return s.first=e,s.second=t,s},rR=Object.assign(Object.create(rS),{_tag:"Append"}),rI=e=>{let t=Object.create(rR);return t.values=e,t},rN=Object.assign(Object.create(rS),{_tag:"Slice"}),rF=(e,t)=>{let s=Object.create(rN);return s.from=e,s.until=t,s},rA=Object.assign(Object.create(rS),{_tag:"Update"}),rj=(e,t)=>{let s=Object.create(rA);return s.index=e,s.patch=t,s},rM=e=>{let t=0,s=rO();for(;t<e.oldValue.length&&t<e.newValue.length;){let n=e.oldValue[t],i=e.newValue[t],r=e.differ.diff(n,i);ey(r,e.differ.empty)||(s=rC(s,rj(t,r))),t+=1}return t<e.oldValue.length&&(s=rC(s,rF(0,t))),t<e.newValue.length&&(s=rC(s,rI(si(t)(e.newValue)))),s},rC=v(2,(e,t)=>rT(e,t)),rL=v(3,(e,t,s)=>{if("Empty"===e._tag)return t;let n=t.slice(),i=sg(e);for(;tb(i);){let e=t7(i),t=st(i);switch(e._tag){case"Empty":i=t;break;case"AndThen":t.unshift(e.first,e.second),i=t;break;case"Append":for(let t of e.values)n.push(t);i=t;break;case"Slice":n=n.slice(e.from,e.until),i=t;break;case"Update":n[e.index]=s.patch(e.patch,n[e.index]),i=t}}return n}),rU={[Symbol.for("effect/Differ")]:{_P:_,_V:_}},rP=e=>{let t=Object.create(rU);return t.empty=e.empty,t.diff=e.diff,t.combine=e.combine,t.patch=e.patch,t},r$=()=>rP({empty:iG(),combine:(e,t)=>i3(t)(e),diff:(e,t)=>i2(e,t),patch:(e,t)=>i5(t)(e)}),rD=()=>rP({empty:rt(),combine:(e,t)=>rc(t)(e),diff:(e,t)=>rl(e,t),patch:(e,t)=>ru(t)(e)}),rz=e=>rP({empty:rO(),combine:(e,t)=>rC(e,t),diff:(t,s)=>rM({oldValue:t,newValue:s,differ:e}),patch:(t,s)=>rL(t,s,e)}),rB=()=>rq((e,t)=>t),rq=e=>rP({empty:_,combine:(e,t)=>e===_?t:t===_?e:s=>t(e(s)),diff:(e,t)=>ey(e,t)?_:w(t),patch:(t,s)=>e(s,t(s))}),rK=e=>255&e,rJ=e=>e>>8&255,rV=(e,t)=>(255&e)+((t&e&255)<<8),rG=rV(0,0),rH=v(2,(e,t)=>rV(rK(e)&~t,rJ(e))),rW=v(2,(e,t)=>e|t),rY=e=>~e>>>0&255,rQ=e=>r1(e,32),rX=v(2,(e,t)=>e|t),rZ=e=>r0(e)&&!r4(e),r0=e=>r1(e,1),r1=v(2,(e,t)=>(e&t)!=0),r2=(...e)=>e.reduce((e,t)=>e|t,0),r3=r2(0),r5=e=>r1(e,4),r4=e=>r1(e,16),r6=v(2,(e,t)=>rV(e^t,t)),r8=v(2,(e,t)=>e&(rY(rK(t))|rJ(t))|rK(t)&rJ(t)),r7=rP({empty:rG,diff:(e,t)=>r6(e,t),combine:(e,t)=>rW(t)(e),patch:(e,t)=>r8(t,e)}),r9=e=>rV(e,e),ae=e=>rV(e,0),at="Empty",as="Fail",an="Interrupt",ai="Parallel",ar="Sequential",aa="effect/Cause",ao=Symbol.for(aa),al={[ao]:{_E:e=>e},[ea](){return E(eo(aa),ec(eo(aF(this))),eb(this))},[ex](e){return ad(e)&&aN(this,e)},pipe(){return eR(this,arguments)},toJSON(){switch(this._tag){case"Empty":return{_id:"Cause",_tag:this._tag};case"Die":return{_id:"Cause",_tag:this._tag,defect:ek(this.defect)};case"Interrupt":return{_id:"Cause",_tag:this._tag,fiberId:this.fiberId.toJSON()};case"Fail":return{_id:"Cause",_tag:this._tag,failure:ek(this.error)};case"Sequential":case"Parallel":return{_id:"Cause",_tag:this._tag,left:ek(this.left),right:ek(this.right)}}},toString(){return az(this)},[eS](){return this.toJSON()}},ac=(()=>{let e=Object.create(al);return e._tag=at,e})(),au=e=>{let t=Object.create(al);return t._tag=as,t.error=e,t},ap=e=>{let t=Object.create(al);return t._tag="Die",t.defect=e,t},am=e=>{let t=Object.create(al);return t._tag=an,t.fiberId=e,t},ah=(e,t)=>{let s=Object.create(al);return s._tag=ai,s.left=e,s.right=t,s},af=(e,t)=>{let s=Object.create(al);return s._tag=ar,s.left=e,s.right=t,s},ad=e=>q(e,ao),ag=e=>"Die"===e._tag,ab=e=>e._tag===at||a$(e,!0,(e,t)=>{switch(t._tag){case at:return e4(e);case"Die":case as:case an:return e4(!1);default:return tT()}}),ax=e=>e3(aO(e)),ay=e=>aD(void 0,aC)(e),av=e=>sP(a$(e,sA(),(e,t)=>t._tag===as?e4(E(e,sK(t.error))):tT())),a_=e=>sP(a$(e,sA(),(e,t)=>"Die"===t._tag?e4(E(e,sK(t.defect))):tT())),aw=e=>a$(e,nM(),(e,t)=>t._tag===an?e4(E(e,nz(t.fiberId))):tT()),aS=e=>aj(e,e=>e._tag===as?e4(e.error):tT()),ak=e=>{let t=aS(e);switch(t._tag){case"None":return tE(e);case"Some":return tO(t.value)}},aO=e=>aj(e,e=>e._tag===an?e4(e.fiberId):tT()),aE=e=>aP(e,{onEmpty:tT(),onFail:e=>e4(ap(e)),onDie:e=>e4(ap(e)),onInterrupt:()=>tT(),onSequential:(e,t)=>e3(e)&&e3(t)?e4(af(e.value,t.value)):e3(e)&&e2(t)?e4(e.value):e2(e)&&e3(t)?e4(t.value):tT(),onParallel:(e,t)=>e3(e)&&e3(t)?e4(ah(e.value,t.value)):e3(e)&&e2(t)?e4(e.value):e2(e)&&e3(t)?e4(t.value):tT()}),aT=e=>aP(e,{onEmpty:ac,onFail:()=>ac,onDie:e=>ap(e),onInterrupt:e=>am(e),onSequential:af,onParallel:ah}),aR=e=>aP(e,{onEmpty:ac,onFail:e=>ap(e),onDie:e=>ap(e),onInterrupt:e=>am(e),onSequential:(e,t)=>af(e,t),onParallel:(e,t)=>ah(e,t)}),aI=((e,t)=>aI(e,e=>au(t(e))),v(2,(e,t)=>aP(e,{onEmpty:ac,onFail:e=>t(e),onDie:e=>ap(e),onInterrupt:e=>am(e),onSequential:(e,t)=>af(e,t),onParallel:(e,t)=>ah(e,t)}))),aN=(e,t)=>{let s=sM(e),n=sM(t);for(;sH(s)&&sH(n);){let[e,t]=E(sY(s),a$([nM(),sA()],([e,t],s)=>{let[n,i]=aM(s);return e4([E(e,nK(n)),E(t,sV(i))])})),[i,r]=E(sY(n),a$([nM(),sA()],([e,t],s)=>{let[n,i]=aM(s);return e4([E(e,nK(n)),E(t,sV(i))])}));if(!ey(e,i))return!1;s=t,n=r}return!0},aF=e=>aA(sM(e),sA()),aA=(e,t)=>{for(;;){let[s,n]=E(e,sv([nM(),sA()],([e,t],s)=>{let[n,i]=aM(s);return[E(e,nK(n)),E(t,sV(i))]})),i=nW(s)>0?E(t,sK(s)):t;if(sG(n))return sP(i);e=n,t=i}throw Error(Q("Cause.flattenCauseLoop"))},aj=v(2,(e,t)=>{let s=[e];for(;s.length>0;){let e=s.pop(),n=t(e);switch(n._tag){case"None":switch(e._tag){case ar:case ai:s.push(e.right),s.push(e.left)}break;case"Some":return n}}return tT()}),aM=e=>{let t=e,s=[],n=nM(),i=sA();for(;void 0!==t;)switch(t._tag){case at:if(0===s.length)return[n,i];t=s.pop();break;case as:if(n=nz(n,sj(t._tag,t.error)),0===s.length)return[n,i];t=s.pop();break;case"Die":if(n=nz(n,sj(t._tag,t.defect)),0===s.length)return[n,i];t=s.pop();break;case an:if(n=nz(n,sj(t._tag,t.fiberId)),0===s.length)return[n,i];t=s.pop();break;case ar:switch(t.left._tag){case at:t=t.right;break;case ar:t=af(t.left.left,af(t.left.right,t.right));break;case ai:t=ah(af(t.left.left,t.right),af(t.left.right,t.right));break;default:i=sK(i,t.right),t=t.left}break;case ai:s.push(t.right),t=t.left}throw Error(Q("Cause.evaluateCauseLoop"))},aC={emptyCase:S,failCase:k,dieCase:k,interruptCase:S,sequentialCase:(e,t,s)=>t&&s,parallelCase:(e,t,s)=>t&&s},aL="SequentialCase",aU="ParallelCase",aP=v(2,(e,{onDie:t,onEmpty:s,onFail:n,onInterrupt:i,onParallel:r,onSequential:a})=>aD(e,void 0,{emptyCase:()=>s,failCase:(e,t)=>n(t),dieCase:(e,s)=>t(s),interruptCase:(e,t)=>i(t),sequentialCase:(e,t,s)=>a(t,s),parallelCase:(e,t,s)=>r(t,s)})),a$=v(3,(e,t,s)=>{let n=t,i=e,r=[];for(;void 0!==i;){let e=s(n,i);switch(n=e3(e)?e.value:n,i._tag){case ar:case ai:r.push(i.right),i=i.left;break;default:i=void 0}void 0===i&&r.length>0&&(i=r.pop())}return n}),aD=v(3,(e,t,s)=>{let n=[e],i=[];for(;n.length>0;){let e=n.pop();switch(e._tag){case at:i.push(tE(s.emptyCase(t)));break;case as:i.push(tE(s.failCase(t,e.error)));break;case"Die":i.push(tE(s.dieCase(t,e.defect)));break;case an:i.push(tE(s.interruptCase(t,e.fiberId)));break;case ar:n.push(e.right),n.push(e.left),i.push(tO({_tag:aL}));break;case ai:n.push(e.right),n.push(e.left),i.push(tO({_tag:aU}))}}let r=[];for(;i.length>0;){let e=i.pop();switch(e._tag){case"Left":switch(e.left._tag){case aL:{let e=r.pop(),n=r.pop(),i=s.sequentialCase(t,e,n);r.push(i);break}case aU:{let e=r.pop(),n=r.pop(),i=s.parallelCase(t,e,n);r.push(i)}}break;case"Right":r.push(e.right)}}if(0===r.length)throw Error("BUG: Cause.reduceWithContext - please report an issue at https://github.com/Effect-TS/effect/issues");return r.pop()}),az=e=>ay(e)?"All fibers interrupted without errors.":aH(e).map(e=>e.stack).join("\n");class aB extends globalThis.Error{span=void 0;constructor(e){let t=Error.stackTraceLimit;Error.stackTraceLimit=0,super(aq(e)),""===this.message&&(this.message="An error has occurred"),Error.stackTraceLimit=t,this.name=e instanceof Error?e.name:"Error","object"==typeof e&&null!==e&&(aG in e&&(this.span=e[aG]),Object.keys(e).forEach(t=>{t in this||(this[t]=e[t])})),this.stack=aV(`${this.name}: ${this.message}`,e instanceof Error&&e.stack?e.stack:"",this.span)}}let aq=e=>{if("string"==typeof e)return e;if("object"==typeof e&&null!==e&&e instanceof Error)return e.message;try{if(q(e,"toString")&&L(e.toString)&&e.toString!==Object.prototype.toString&&e.toString!==globalThis.Array.prototype.toString)return e.toString()}catch{}return JSON.stringify(e)},aK=/\((.*)\)/,aJ=N("effect/Tracer/spanToTrace",()=>new WeakMap),aV=(e,t,s)=>{let n=[e],i=t.startsWith(e)?t.slice(e.length).split("\n"):t.split("\n");for(let e=1;e<i.length&&!i[e].includes("Generator.next");e++){if(i[e].includes("effect_internal_function")){n.pop();break}n.push(i[e].replace(/at .*effect_instruction_i.*\((.*)\)/,"at $1").replace(/EffectPrimitive\.\w+/,"<anonymous>"))}if(s){let e=s,t=0;for(;e&&"Span"===e._tag&&t<10;){let s=aJ.get(e);if("function"==typeof s){let t=s(),i=t.match(aK),r=i?i[1]:t.replace(/^at /,"");n.push(`    at ${e.name} (${r})`)}else n.push(`    at ${e.name}`);e=tj(e.parent),t++}}return n.join("\n")},aG=Symbol.for("effect/SpanAnnotation"),aH=e=>aD(e,void 0,{emptyCase:()=>[],dieCase:(e,t)=>[new aB(t)],failCase:(e,t)=>[new aB(t)],interruptCase:()=>[],parallelCase:(e,t,s)=>[...t,...s],sequentialCase:(e,t,s)=>[...t,...s]}),aW="Pending",aY="Done",aQ=Symbol.for("effect/Deferred"),aX={_E:e=>e,_A:e=>e},aZ=e=>({_tag:aW,joiners:e}),a0=e=>({_tag:aY,effect:e});class a1{self;called=!1;constructor(e){this.self=e}next(e){return this.called?{value:e,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(e){return{value:e,done:!0}}throw(e){throw e}[Symbol.iterator](){return new a1(this.self)}}let a2=Symbol.for("effect/Tracer"),a3=tu("effect/Tracer"),a5=tu("effect/ParentSpan"),a4=function(){let e="abcdef0123456789",t=e.length;return function(s){let n="";for(let i=0;i<s;i++)n+=e.charAt(Math.floor(Math.random()*t));return n}}();class a6{name;parent;context;links;startTime;kind;_tag="Span";spanId;traceId="native";sampled=!0;status;attributes;events=[];constructor(e,t,s,n,i,r){this.name=e,this.parent=t,this.context=s,this.links=n,this.startTime=i,this.kind=r,this.status={_tag:"Started",startTime:i},this.attributes=new Map,this.traceId="Some"===t._tag?t.value.traceId:a4(32),this.spanId=a4(16)}end(e,t){this.status={_tag:"Ended",endTime:e,exit:t,startTime:this.status.startTime}}attribute(e,t){this.attributes.set(e,t)}event(e,t,s){this.events.push([e,t,s??{}])}}let a8=e=>{if(e?.captureStackTrace===!1||e?.captureStackTrace!==void 0&&"boolean"!=typeof e.captureStackTrace)return e;let t=Error.stackTraceLimit;Error.stackTraceLimit=3;let s=Error();Error.stackTraceLimit=t;let n=!1;return{...e,captureStackTrace:()=>{if(!1!==n)return n;if(void 0!==s.stack){let e=s.stack.split("\n");if(void 0!==e[3])return n=e[3].trim()}}}},a7=Symbol.for("effect/EffectError"),a9=e=>q(e,a7),oe=e=>({[a7]:a7,_tag:"EffectError",cause:e}),ot=(e,t)=>{let s=new or("Blocked");return s.effect_instruction_i0=e,s.effect_instruction_i1=t,s},os=e=>{let t=new or("RunBlocked");return t.effect_instruction_i0=e,t},on=Symbol.for("effect/Effect");class oi{patch;op;_op=ez;constructor(e,t){this.patch=e,this.op=t}}class or{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[on]=eV;constructor(e){this._op=e}[ex](e){return this===e}[ea](){return eb(this,el(this))}pipe(){return eR(this,arguments)}toJSON(){return{_id:"Effect",_op:this._op,effect_instruction_i0:ek(this.effect_instruction_i0),effect_instruction_i1:ek(this.effect_instruction_i1),effect_instruction_i2:ek(this.effect_instruction_i2)}}toString(){return eO(this.toJSON())}[eS](){return this.toJSON()}[Symbol.iterator](){return new a1(new es(this))}}class oa{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[on]=eV;constructor(e){this._op=e,this._tag=e}[ex](e){return l7(e)&&"Failure"===e._op&&ey(this.effect_instruction_i0,e.effect_instruction_i0)}[ea](){return E(eh(this._tag),ec(eo(this.effect_instruction_i0)),eb(this))}get cause(){return this.effect_instruction_i0}pipe(){return eR(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,cause:this.cause.toJSON()}}toString(){return eO(this.toJSON())}[eS](){return this.toJSON()}[Symbol.iterator](){return new a1(new es(this))}}class oo{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[on]=eV;constructor(e){this._op=e,this._tag=e}[ex](e){return l7(e)&&"Success"===e._op&&ey(this.effect_instruction_i0,e.effect_instruction_i0)}[ea](){return E(eh(this._tag),ec(eo(this.effect_instruction_i0)),eb(this))}get value(){return this.effect_instruction_i0}pipe(){return eR(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,value:ek(this.value)}}toString(){return eO(this.toJSON())}[eS](){return this.toJSON()}[Symbol.iterator](){return new a1(new es(this))}}let ol=e=>q(e,on),oc=e=>{let t=new or(e$);return t.effect_instruction_i0=e,t},ou=v(3,(e,t,s)=>o4(n=>oF(e,e=>oF(ok(oZ(()=>n(t(e)))),t=>oZ(()=>s(e,t)).pipe(oL({onFailure:e=>{switch(t._tag){case eF:return oT(ah(t.effect_instruction_i0,e));case eC:return oT(e)}},onSuccess:()=>t})))))),op=v(2,(e,t)=>oF(e,()=>oX(t))),om=e=>op(e,void 0),oh=function(){let e=new or(eN);switch(arguments.length){case 2:e.effect_instruction_i0=arguments[0],e.commit=arguments[1];break;case 3:e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.commit=arguments[2];break;case 4:e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.effect_instruction_i2=arguments[2],e.commit=arguments[3];break;default:throw Error(Q("you're not supposed to end up here"))}return e},of=(e,t=ip)=>oh(e,function(){let e,s,n,i;function r(t){e?e(t):void 0===s&&(s=t)}let a=new or(eI);return a.effect_instruction_i0=t=>{e=t,s&&t(s)},a.effect_instruction_i1=t,1!==this.effect_instruction_i0.length?(i=new AbortController,n=ei(()=>this.effect_instruction_i0(r,i.signal))):n=ei(()=>this.effect_instruction_i0(r)),n||i?oG(a,e=>(i&&i.abort(),n??o6)):a}),od=v(2,(e,t)=>{let s=new or(eA);return s.effect_instruction_i0=e,s.effect_instruction_i1=t,s}),og=v(2,(e,t)=>oU(e,{onFailure:t,onSuccess:oX})),ob=v(3,(e,t,s)=>od(e,e=>{let n=ak(e);switch(n._tag){case"Left":return t(n.left)?s(n.left):oT(e);case"Right":return oT(n.right)}})),ox=Symbol.for("effect/SpanAnnotation"),oy=Symbol.for("effect/OriginalAnnotation"),ov=(e,t)=>e3(t)?new Proxy(e,{has:(e,t)=>t===ox||t===oy||t in e,get:(s,n)=>n===ox?t.value:n===oy?e:s[n]}):e,o_=e=>!B(e)||ox in e?oT(ap(e)):oc(t=>oT(ap(ov(e,cF(t))))),ow=e=>oR(()=>ap(new l1(e))),oS=e=>oU(e,{onFailure:e=>oX(tO(e)),onSuccess:e=>oX(tE(e))}),ok=e=>oC(e,{onFailure:cr,onSuccess:cp}),oO=e=>!B(e)||ox in e?oT(au(e)):oc(t=>oT(au(ov(e,cF(t))))),oE=e=>oF(o0(e),oO),oT=e=>{let t=new oa(eF);return t.effect_instruction_i0=e,t},oR=e=>oF(o0(e),oT),oI=oc(e=>oX(e.id())),oN=e=>oc(t=>e(t.id())),oF=v(2,(e,t)=>{let s=new or(ej);return s.effect_instruction_i0=e,s.effect_instruction_i1=t,s}),oA=v(2,(e,t)=>oF(e,e=>{let s="function"==typeof t?t(e):t;return ol(s)?s:Y(s)?of(e=>{s.then(t=>e(oX(t)),t=>e(oO(new l8(t))))}):oX(s)})),oj=e=>{let t=new or("OnStep");return t.effect_instruction_i0=e,t},oM=e=>oF(e,_),oC=v(2,(e,t)=>oL(e,{onFailure:e=>oX(t.onFailure(e)),onSuccess:e=>oX(t.onSuccess(e))})),oL=v(2,(e,t)=>{let s=new or(eM);return s.effect_instruction_i0=e,s.effect_instruction_i1=t.onFailure,s.effect_instruction_i2=t.onSuccess,s}),oU=v(2,(e,t)=>oL(e,{onFailure:e=>{if(a_(e).length>0)return oT(aR(e));let s=av(e);return s.length>0?t.onFailure(sY(s)):oT(e)},onSuccess:t.onSuccess})),oP=v(2,(e,t)=>oZ(()=>{let s=tW(e),n=tH(s.length),i=0;return op(o9({while:()=>i<s.length,body:()=>t(s[i],i),step:e=>{n[i++]=e}}),n)})),o$=v(2,(e,t)=>oZ(()=>{let s=tW(e),n=0;return o9({while:()=>n<s.length,body:()=>t(s[n],n),step:()=>{n++}})})),oD=(e=>"boolean"==typeof e[0]||ol(e[0]),e=>oT(am(e))),oz=e=>{let t=new or(eU);return t.effect_instruction_i0=r9(1),t.effect_instruction_i1=()=>e,t},oB=v(2,(e,t)=>o4(s=>oF(ok(s(e)),e=>cv(t,e)))),oq=v(2,(e,t)=>oF(e,e=>o0(()=>t(e)))),oK=v(2,(e,t)=>oU(e,{onFailure:e=>oE(()=>t.onFailure(e)),onSuccess:e=>o0(()=>t.onSuccess(e))})),oJ=v(2,(e,t)=>oL(e,{onFailure:e=>{let s=ak(e);switch(s._tag){case"Left":return oE(()=>t(s.left));case"Right":return oT(s.right)}},onSuccess:oX})),oV=((e,t)=>oV(e,e=>ce(e)?o6:t(e.effect_instruction_i0)),v(2,(e,t)=>o4(s=>oL(s(e),{onFailure:e=>{let s=cr(e);return oL(t(s),{onFailure:t=>cr(af(e,t)),onSuccess:()=>s})},onSuccess:e=>{let s=cp(e);return li(t(s),s)}})))),oG=v(2,(e,t)=>oV(e,cc({onFailure:e=>ay(e)?om(t(aw(e))):o6,onSuccess:()=>o6}))),oH=v(2,(e,t)=>o3(e,t,oX)),oW=e=>oY(e,_),oY=v(2,(e,t)=>oU(e,{onFailure:e=>o_(t(e)),onSuccess:oX})),oQ=(e,t)=>tW(e).reduceRight(([e,s],n)=>{let i=t(n);switch(i._tag){case"Left":return[[i.left,...e],s];case"Right":return[e,[i.right,...s]]}},[sd(),sd()]),oX=((e,t)=>oX(t.runtimeFlags),e=>{let t=new oo(eC);return t.effect_instruction_i0=e,t}),oZ=e=>oF(o0(e),_),o0=e=>{let t=new or(eL);return t.effect_instruction_i0=e,t},o1=v(2,(e,t)=>oF(e,e=>{let s="function"==typeof t?t(e):t;return ol(s)?op(s,e):Y(s)?of(t=>{s.then(s=>t(oX(e)),e=>t(oO(new l8(e))))}):oX(e)})),o2=e=>oc(t=>{let s=E(t.getFiberRef(lD),tI(()=>t.scope()));return e(lw(lD,e4(s)))}),o3=v(3,(e,t,s)=>oL(e,{onFailure:e=>a_(e).length>0?oT(tC(aE(e))):t(),onSuccess:s})),o5=e=>{let t=new or(eU);return t.effect_instruction_i0=ae(1),t.effect_instruction_i1=()=>e,t},o4=e=>oh(e,function(){let e=new or(eU);return e.effect_instruction_i0=ae(1),e.effect_instruction_i1=e=>r0(e)?ei(()=>this.effect_instruction_i0(oz)):ei(()=>this.effect_instruction_i0(o5)),e}),o6=oX(void 0),o8=e=>{let t=new or(eU);return t.effect_instruction_i0=e,t.effect_instruction_i1=void 0,t},o7=v(2,(e,t)=>oF(t,t=>t?E(e,oq(e4)):oX(tT()))),o9=e=>{let t=new or(eP);return t.effect_instruction_i0=e.while,t.effect_instruction_i1=e.body,t.effect_instruction_i2=e.step,t},le=v(2,(e,t)=>{let s=new or(eU);return s.effect_instruction_i0=t,s.effect_instruction_i1=()=>e,s}),lt=e=>{let t=new or(eD);return void 0!==e?.priority?lC(t,e.priority):t},ls=v(2,(e,t)=>oF(e,e=>oq(t,t=>[e,t]))),ln=v(2,(e,t)=>oF(e,e=>op(t,e))),li=v(2,(e,t)=>oF(e,()=>t)),lr=v(3,(e,t,s)=>oF(e,e=>oq(t,t=>s(e,t)))),la=(()=>{let e=setInterval(()=>{},2147483648-1);return o0(()=>clearInterval(e))},e=>oF(oI,t=>E(e,lo(t)))),lo=v(2,(e,t)=>oF(e.interruptAsFork(t),()=>e.await)),ll={_tag:"All",syslog:0,label:"ALL",ordinal:Number.MIN_SAFE_INTEGER,pipe(){return eR(this,arguments)}},lc={_tag:"Info",syslog:6,label:"INFO",ordinal:2e4,pipe(){return eR(this,arguments)}},lu={_tag:"Debug",syslog:7,label:"DEBUG",ordinal:1e4,pipe(){return eR(this,arguments)}},lp={_tag:"None",syslog:7,label:"OFF",ordinal:Number.MAX_SAFE_INTEGER,pipe(){return eR(this,arguments)}},lm=Symbol.for("effect/FiberRef"),lh={_A:e=>e},lf=e=>lb(e,e=>[e,e]),ld=v(2,(e,t)=>oF(lf(e),t)),lg=v(2,(e,t)=>lb(e,()=>[void 0,t])),lb=v(2,(e,t)=>oc(s=>{let[n,i]=t(s.getFiberRef(e));return s.setFiberRef(e,i),oX(n)})),lx=Symbol.for("effect/RequestResolver"),ly={_A:e=>e,_R:e=>e};class lv{runAll;target;[lx]=ly;constructor(e,t){this.runAll=e,this.target=t}[ea](){return eb(this,this.target?eo(this.target):el(this))}[ex](e){return this.target?l_(e)&&ey(this.target,e.target):this===e}identified(...e){return new lv(this.runAll,sC(e))}pipe(){return eR(this,arguments)}}let l_=e=>q(e,lx),lw=v(3,(e,t,s)=>ou(ln(lf(t),lg(t,s)),()=>e,e=>lg(t,e))),lS=v(3,(e,t,s)=>ld(t,n=>lw(e,t,s(n)))),lk=(e,t)=>lR(e,{differ:rB(),fork:t?.fork??_,join:t?.join}),lO=e=>{let t=rD();return lR(e,{differ:t,fork:t.empty})},lE=e=>{let t=rz(rB());return lR(e,{differ:t,fork:t.empty})},lT=e=>{let t=r$();return lR(e,{differ:t,fork:t.empty})},lR=(e,t)=>({[lm]:lh,initial:e,diff:(e,s)=>t.differ.diff(e,s),combine:(e,s)=>t.differ.combine(e,s),patch:e=>s=>t.differ.patch(e,s),fork:t.fork,join:t.join??((e,t)=>t),pipe(){return eR(this,arguments)}}),lI=N(Symbol.for("effect/FiberRef/currentContext"),()=>lT(tm())),lN=N(Symbol.for("effect/FiberRef/currentSchedulingPriority"),()=>lk(0)),lF=N(Symbol.for("effect/FiberRef/currentMaxOpsBeforeYield"),()=>lk(2048)),lA=N(Symbol.for("effect/FiberRef/currentLogAnnotation"),()=>lk(np())),lj=N(Symbol.for("effect/FiberRef/currentLogLevel"),()=>lk(lc)),lM=N(Symbol.for("effect/FiberRef/currentLogSpan"),()=>lk(iI())),lC=v(2,(e,t)=>lw(e,lN,t)),lL=N(Symbol.for("effect/FiberRef/currentConcurrency"),()=>lk("unbounded")),lU=N(Symbol.for("effect/FiberRef/currentRequestBatching"),()=>lk(!0)),lP=N(Symbol.for("effect/FiberRef/currentUnhandledErrorLogLevel"),()=>lk(e4(lu))),l$=N(Symbol.for("effect/FiberRef/currentMetricLabels"),()=>lE(sd())),lD=N(Symbol.for("effect/FiberRef/currentForkScopeOverride"),()=>lk(tT(),{fork:()=>tT(),join:(e,t)=>e})),lz=N(Symbol.for("effect/FiberRef/currentInterruptedCause"),()=>lk(ac,{fork:()=>ac,join:(e,t)=>e})),lB=N(Symbol.for("effect/FiberRef/currentTracerEnabled"),()=>lk(!0)),lq=N(Symbol.for("effect/FiberRef/currentTracerTiming"),()=>lk(!0)),lK=N(Symbol.for("effect/FiberRef/currentTracerSpanAnnotations"),()=>lk(np())),lJ=N(Symbol.for("effect/FiberRef/currentTracerSpanLinks"),()=>lk(sA())),lV=Symbol.for("effect/Scope"),lG=Symbol.for("effect/CloseableScope"),lH=(e,t)=>e.addFinalizer(()=>om(t)),lW=(e,t)=>e.addFinalizer(t),lY=(e,t)=>e.close(t),lQ=(e,t)=>e.fork(t),lX=function(){class e extends globalThis.Error{commit(){return oO(this)}toString(){return this.message?`${this.name}: ${this.message}`:this.name}toJSON(){return{...this}}[eS](){let e=this.stack;return e?`${this.toString()}
${e.split("\n").slice(1).join("\n")}`:this.toString()}}return Object.assign(e.prototype,eW),e}(),lZ=(e,t)=>{class s extends lX{_tag=t}return Object.assign(s.prototype,e),s.prototype.name=t,s},l0=Symbol.for("effect/Cause/errors/RuntimeException"),l1=lZ({[l0]:l0},"RuntimeException"),l2=Symbol.for("effect/Cause/errors/InterruptedException"),l3=e=>q(e,l2),l5=Symbol.for("effect/Cause/errors/NoSuchElement"),l4=lZ({[l5]:l5},"NoSuchElementException"),l6=Symbol.for("effect/Cause/errors/UnknownException"),l8=function(){class e extends lX{error;_tag="UnknownException";constructor(e,t){super(t??(q(e,"message")&&F(e.message)?e.message:void 0)),this.error=e}}return Object.assign(e.prototype,{[l6]:l6,name:"UnknownException"}),e}(),l7=e=>ol(e)&&"_tag"in e&&("Success"===e._tag||"Failure"===e._tag),l9=e=>"Failure"===e._tag,ce=e=>"Success"===e._tag,ct=v(2,(e,t)=>{switch(e._tag){case eF:return cr(e.effect_instruction_i0);case eC:return cp(t)}}),cs=e=>ct(e,void 0),cn=(e,t)=>cf(e,t?.parallel?ah:af),ci=e=>cr(au(e)),cr=e=>{let t=new oa(eF);return t.effect_instruction_i0=e,t},ca=((e,t)=>{switch(e._tag){case eF:return cr(e.effect_instruction_i0);case eC:return t(e.effect_instruction_i0)}},v(2,(e,t)=>{switch(e._tag){case eF:return oX(cr(e.effect_instruction_i0));case eC:return ok(t(e.effect_instruction_i0))}})),co=e=>cr(am(e)),cl=v(2,(e,t)=>{switch(e._tag){case eF:return cr(e.effect_instruction_i0);case eC:return cp(t(e.effect_instruction_i0))}}),cc=v(2,(e,{onFailure:t,onSuccess:s})=>{switch(e._tag){case eF:return t(e.effect_instruction_i0);case eC:return s(e.effect_instruction_i0)}}),cu=v(2,(e,{onFailure:t,onSuccess:s})=>{switch(e._tag){case eF:return t(e.effect_instruction_i0);case eC:return s(e.effect_instruction_i0)}}),cp=e=>{let t=new oo(eC);return t.effect_instruction_i0=e,t},cm=cp(void 0),ch=v(3,(e,t,{onFailure:s,onSuccess:n})=>{switch(e._tag){case eF:switch(t._tag){case eC:return cr(e.effect_instruction_i0);case eF:return cr(s(e.effect_instruction_i0,t.effect_instruction_i0))}case eC:switch(t._tag){case eC:return cp(n(e.effect_instruction_i0,t.effect_instruction_i0));case eF:return cr(t.effect_instruction_i0)}}}),cf=(e,t)=>{let s=sC(e);return sH(s)?E(sQ(s),sv(E(sY(s),cl(sM)),(e,s)=>E(e,ch(s,{onSuccess:(e,t)=>E(e,sK(t)),onFailure:t}))),cl(sP),cl(e=>sU(e)),e4):tT()},cd=e=>({[aQ]:aX,state:nX(aZ([])),blockingOn:e,pipe(){return eR(this,arguments)}}),cg=()=>oF(oI,e=>cb(e)),cb=e=>o0(()=>cd(e)),cx=e=>of(t=>{let s=n0(e.state);switch(s._tag){case aY:return t(s.effect);case aW:return s.joiners.push(t),ck(e,t)}},e.blockingOn),cy=v(2,(e,t)=>o0(()=>{let s=n0(e.state);switch(s._tag){case aY:return!1;case aW:n1(e.state,a0(t));for(let e=0,n=s.joiners.length;e<n;e++)s.joiners[e](t);return!0}})),cv=v(2,(e,t)=>cy(e,t)),c_=v(2,(e,t)=>cy(e,oT(t))),cw=v(2,(e,t)=>cy(e,oX(t))),cS=(e,t)=>{let s=n0(e.state);if(s._tag===aW){n1(e.state,a0(t));for(let e=0,n=s.joiners.length;e<n;e++)s.joiners[e](t)}},ck=(e,t)=>o0(()=>{let s=n0(e.state);if(s._tag===aW){let e=s.joiners.indexOf(t);e>=0&&s.joiners.splice(e,1)}}),cO=lf(lI),cE=()=>cO,cT=e=>oF(cE(),e),cR=v(2,(e,t)=>lw(lI,t)(e)),cI=v(2,(e,t)=>lS(lI,e=>tc(e,t))(e)),cN=v(2,(e,t)=>cT(s=>cR(e,t(s)))),cF=e=>{let t=e.getFiberRef(lI).unsafeMap.get(a5.key);return void 0!==t&&"Span"===t._tag?e4(t):tT()},cA={_tag:"Span",spanId:"noop",traceId:"noop",name:"noop",sampled:!1,parent:tT(),context:tm(),status:{_tag:"Ended",startTime:BigInt(0),endTime:BigInt(0),exit:cm},attributes:new Map,links:[],kind:"internal",attribute(){},event(){},end(){}},cj=e=>{let t=Object.create(cA);return t.name=e,t},cM=Symbol.for("effect/Duration"),cC=BigInt(0),cL=BigInt(24),cU=BigInt(60),cP=BigInt(1e3),c$=BigInt(1e6),cD=BigInt(1e9),cz=/^(-?\d+(?:\.\d+)?)\s+(nanos?|micros?|millis?|seconds?|minutes?|hours?|days?|weeks?)$/,cB=e=>{if(cG(e))return e;if(A(e))return cQ(e);if(M(e))return cW(e);if(Array.isArray(e)){if(2===e.length&&A(e[0])&&A(e[1]))return cW(BigInt(e[0])*cD+BigInt(e[1]))}else if(F(e)){cz.lastIndex=0;let t=cz.exec(e);if(t){let[e,s,n]=t,i=Number(s);switch(n){case"nano":case"nanos":return cW(BigInt(s));case"micro":case"micros":return cY(BigInt(s));case"milli":case"millis":return cQ(i);case"second":case"seconds":return cX(i);case"minute":case"minutes":return cZ(i);case"hour":case"hours":return c0(i);case"day":case"days":return c1(i);case"week":case"weeks":return c2(i)}}}throw Error("Invalid DurationInput")},cq={_tag:"Millis",millis:0},cK={_tag:"Infinity"},cJ={[cM]:cM,[ea](){return eb(this,ed(this.value))},[ex](e){return cG(e)&&un(this,e)},toString(){return`Duration(${ui(this)})`},toJSON(){switch(this.value._tag){case"Millis":return{_id:"Duration",_tag:"Millis",millis:this.value.millis};case"Nanos":return{_id:"Duration",_tag:"Nanos",hrtime:c4(this)};case"Infinity":return{_id:"Duration",_tag:"Infinity"}}},[eS](){return this.toJSON()},pipe(){return eR(this,arguments)}},cV=e=>{let t=Object.create(cJ);return A(e)?isNaN(e)||e<=0?t.value=cq:Number.isFinite(e)?Number.isInteger(e)?t.value={_tag:"Millis",millis:e}:t.value={_tag:"Nanos",nanos:BigInt(Math.round(1e6*e))}:t.value=cK:e<=cC?t.value=cq:t.value={_tag:"Nanos",nanos:e},t},cG=e=>q(e,cM),cH=cV(0),cW=e=>cV(e),cY=e=>cV(e*cP),cQ=e=>cV(e),cX=e=>cV(1e3*e),cZ=e=>cV(6e4*e),c0=e=>cV(36e5*e),c1=e=>cV(864e5*e),c2=e=>cV(6048e5*e),c3=e=>{let t=cB(e);switch(t.value._tag){case"Infinity":return 1/0;case"Nanos":return Number(t.value.nanos)/1e6;case"Millis":return t.value.millis}},c5=e=>{let t=cB(e);switch(t.value._tag){case"Infinity":throw Error("Cannot convert infinite duration to nanos");case"Nanos":return t.value.nanos;case"Millis":return BigInt(Math.round(1e6*t.value.millis))}},c4=e=>{let t=cB(e);switch(t.value._tag){case"Infinity":return[1/0,0];case"Nanos":return[Number(t.value.nanos/cD),Number(t.value.nanos%cD)];case"Millis":return[Math.floor(t.value.millis/1e3),Math.round(t.value.millis%1e3*1e6)]}},c6=v(2,(e,t)=>{let s=cB(e);switch(s.value._tag){case"Nanos":return t.onNanos(s.value.nanos);case"Infinity":return t.onMillis(1/0);case"Millis":return t.onMillis(s.value.millis)}}),c8=v(3,(e,t,s)=>{let n=cB(e),i=cB(t);if("Infinity"===n.value._tag||"Infinity"===i.value._tag)return s.onMillis(c3(n),c3(i));if("Nanos"===n.value._tag||"Nanos"===i.value._tag){let e="Nanos"===n.value._tag?n.value.nanos:BigInt(Math.round(1e6*n.value.millis)),t="Nanos"===i.value._tag?i.value.nanos:BigInt(Math.round(1e6*i.value.millis));return s.onNanos(e,t)}return s.onMillis(n.value.millis,i.value.millis)}),c7=(e,t)=>c8(e,t,{onMillis:(e,t)=>e===t,onNanos:(e,t)=>e===t}),c9=v(2,(e,t)=>c6(e,{onMillis:e=>cV(e*t),onNanos:e=>cV(e*BigInt(t))})),ue=v(2,(e,t)=>c8(e,t,{onMillis:(e,t)=>cV(e+t),onNanos:(e,t)=>cV(e+t)})),ut=((e,t)=>c8(e,t,{onMillis:(e,t)=>e<t,onNanos:(e,t)=>e<t}),v(2,(e,t)=>c8(e,t,{onMillis:(e,t)=>e<=t,onNanos:(e,t)=>e<=t}))),us=v(2,(e,t)=>c8(e,t,{onMillis:(e,t)=>e>=t,onNanos:(e,t)=>e>=t})),un=v(2,(e,t)=>c7(cB(e),cB(t))),ui=e=>{let t=cB(e),s=[];if("Infinity"===t.value._tag)return"Infinity";let n=c5(t);n%c$&&s.push(`${n%c$}ns`);let i=n/c$;i%cP!==cC&&s.push(`${i%cP}ms`);let r=i/cP;r%cU!==cC&&s.push(`${r%cU}s`);let a=r/cU;a%cU!==cC&&s.push(`${a%cU}m`);let o=a/cU;o%cL!==cC&&s.push(`${o%cL}h`);let l=o/cL;return l!==cC&&s.push(`${l}d`),s.reverse().join(" ")},ur=Symbol.for("effect/Clock"),ua=tu("effect/Clock"),uo=2147483648-1,ul={unsafeSchedule(e,t){let s=c3(t);if(s>uo)return k;let n=!1,i=setTimeout(()=>{n=!0,e()},s);return()=>(clearTimeout(i),!n)}},uc=function(){let e=BigInt(1e6);if("undefined"==typeof performance)return()=>BigInt(Date.now())*e;let t=BigInt(Date.now())*e-BigInt(Math.round(1e6*performance.now()));return()=>t+BigInt(Math.round(1e6*performance.now()))}(),uu=function(){let e="object"==typeof process&&"hrtime"in process&&"function"==typeof process.hrtime.bigint?process.hrtime:void 0;if(!e)return uc;let t=uc()-e.bigint();return()=>t+e.bigint()}();class up{[ur]=ur;unsafeCurrentTimeMillis(){return Date.now()}unsafeCurrentTimeNanos(){return uu()}currentTimeMillis=o0(()=>this.unsafeCurrentTimeMillis());currentTimeNanos=o0(()=>this.unsafeCurrentTimeNanos());scheduler(){return oX(ul)}sleep(e){return of(t=>om(o0(ul.unsafeSchedule(()=>t(o6),e))))}}let um=e=>e.replace(/[/\\^$*+?.()|[\]{}]/g,"\\$&"),uh="InvalidData",uf="MissingData",ud="SourceUnavailable",ug="Unsupported",ub=Symbol.for("effect/ConfigError"),ux={_tag:"ConfigError",[ub]:ub},uy=(e,t)=>{let s=Object.create(ux);return s._op="And",s.left=e,s.right=t,Object.defineProperty(s,"toString",{enumerable:!1,value(){return`${this.left} and ${this.right}`}}),s},uv=(e,t)=>{let s=Object.create(ux);return s._op="Or",s.left=e,s.right=t,Object.defineProperty(s,"toString",{enumerable:!1,value(){return`${this.left} or ${this.right}`}}),s},u_=(e,t,s={pathDelim:"."})=>{let n=Object.create(ux);return n._op=uh,n.path=e,n.message=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){let e=E(this.path,sk(s.pathDelim));return`(Invalid data at ${e}: "${this.message}")`}}),n},uw=(e,t,s={pathDelim:"."})=>{let n=Object.create(ux);return n._op=uf,n.path=e,n.message=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){let e=E(this.path,sk(s.pathDelim));return`(Missing data at ${e}: "${this.message}")`}}),n},uS=(e,t,s,n={pathDelim:"."})=>{let i=Object.create(ux);return i._op=ud,i.path=e,i.message=t,i.cause=s,Object.defineProperty(i,"toString",{enumerable:!1,value(){let e=E(this.path,sk(n.pathDelim));return`(Source unavailable at ${e}: "${this.message}")`}}),i},uk=(e,t,s={pathDelim:"."})=>{let n=Object.create(ux);return n._op=ug,n.path=e,n.message=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){let e=E(this.path,sk(s.pathDelim));return`(Unsupported operation at ${e}: "${this.message}")`}}),n},uO=v(2,(e,t)=>{switch(e._op){case"And":return uy(uO(e.left,t),uO(e.right,t));case"Or":return uv(uO(e.left,t),uO(e.right,t));case uh:return u_([...t,...e.path],e.message);case uf:return uw([...t,...e.path],e.message);case ud:return uS([...t,...e.path],e.message,e.cause);case ug:return uk([...t,...e.path],e.message)}}),uE={_tag:"Empty"},uT=v(2,(e,t)=>{let s=iN(t),n=e;for(;iT(s);){let e=s.head;switch(e._tag){case"Empty":s=s.tail;break;case"AndThen":s=iR(e.first,iR(e.second,s.tail));break;case"MapName":n=sb(n,e.f),s=s.tail;break;case"Nested":n=tQ(n,e.name),s=s.tail;break;case"Unnested":if(!E(t8(n),tz(e.name)))return tO(uw(n,`Expected ${e.name} to be in path in ConfigProvider#unnested`));n=st(n),s=s.tail}}return tE(n)}),uR=(e,t)=>[...e,...t],uI=Symbol.for("effect/ConfigProvider"),uN=tu("effect/ConfigProvider"),uF=Symbol.for("effect/ConfigProviderFlat"),uA=e=>({[uI]:uI,pipe(){return eR(this,arguments)},...e}),uj=e=>({[uF]:uF,patch:e.patch,load:(t,s,n=!0)=>e.load(t,s,n),enumerateChildren:e.enumerateChildren}),uM=e=>uA({load:t=>oF(uU(e,sd(),t,!1),e=>tR(t8(e),{onNone:()=>oO(uw(sd(),`Expected a single value having structure: ${t}`)),onSome:oX})),flattened:e}),uC=(e,t,s,n)=>{let i=s_(s.length,t=>t>=n.length?tT():e4([e(t),t+1])),r=s_(n.length,e=>e>=s.length?tT():e4([t(e),e+1]));return[uR(s,i),uR(n,r)]},uL=(e,t)=>{let s=t;if("Nested"===s._tag){let t=e.slice();for(;"Nested"===s._tag;)t.push(s.name),s=s.config;return t}return e},uU=(e,t,s,n)=>{switch(s._tag){case"Constant":return oX(sg(s.value));case"Described":return oZ(()=>uU(e,t,s.config,n));case"Fail":return oO(uw(t,s.message));case"Fallback":return E(oZ(()=>uU(e,t,s.first,n)),og(i=>s.condition(i)?E(uU(e,t,s.second,n),og(e=>oO(uv(i,e)))):oO(i)));case"Lazy":return oZ(()=>uU(e,t,s.config(),n));case"MapOrFail":return oZ(()=>E(uU(e,t,s.original,n),oF(oP(e=>E(s.mapOrFail(e),oJ(uO(uL(t,s.original))))))));case"Nested":return oZ(()=>uU(e,uR(t,sg(s.name)),s.config,n));case"Primitive":return E(uT(t,e.patch),oF(t=>E(e.load(t,s,n),oF(e=>{if(0===e.length){let e=E(t9(t),tI(()=>"<n/a>"));return oO(uw([],`Expected ${s.description} with name ${e}`))}return oX(e)}))));case"Sequence":return E(uT(t,e.patch),oF(n=>E(e.enumerateChildren(n),oF(uB),oF(i=>0===i.length?oZ(()=>oq(uU(e,n,s.config,!0),sg)):E(oP(i,n=>uU(e,tX(t,`[${n}]`),s.config,!0)),oq(e=>{let t=sy(e);return 0===t.length?sg(sd()):sg(t)}))))));case"HashMap":return oZ(()=>E(uT(t,e.patch),oF(t=>E(e.enumerateChildren(t),oF(i=>E(i,oP(i=>uU(e,uR(t,sg(i)),s.valueConfig,n)),oq(e=>0===e.length?sg(np()):E(uz(e),sb(e=>ig(so(tW(i),e)))))))))));case"ZipWith":return oZ(()=>E(uU(e,t,s.left,n),oS,oF(i=>E(uU(e,t,s.right,n),oS,oF(e=>{if(tS(i)&&tS(e))return oO(uy(i.left,e.left));if(tS(i)&&tk(e))return oO(i.left);if(tk(i)&&tS(e))return oO(e.left);if(tk(i)&&tk(e)){let n=E(t,sk(".")),r=uP(t,n),[a,o]=uC(r,r,E(i.right,sb(tE)),E(e.right,sb(tE)));return E(a,so(o),oP(([e,t])=>E(ls(e,t),oq(([e,t])=>s.zip(e,t)))))}throw Error("BUG: ConfigProvider.fromFlatLoop - please report an issue at https://github.com/Effect-TS/effect/issues")})))))}},uP=(e,t)=>s=>tO(uw(e,`The element at index ${s} in a sequence at path "${t}" was missing`)),u$=(e,t)=>e.split(RegExp(`\\s*${um(t)}\\s*`)),uD=(e,t,s,n,i)=>i?E(u$(e,n),oP(e=>s.parse(e.trim())),oJ(uO(t))):E(s.parse(e),oK({onFailure:uO(t),onSuccess:sg})),uz=e=>Object.keys(e[0]).map(t=>e.map(e=>e[t])),uB=e=>E(oP(e,uK),oK({onFailure:()=>sd(),onSuccess:sa(tK)}),oS,oq(sX)),uq=/^(\[(\d+)\])$/,uK=e=>{let t=e.match(uq);if(null!==t){let e=t[2];return E(void 0!==e&&e.length>0?e4(e):tT(),tU(uJ))}return tT()},uJ=e=>{let t=Number.parseInt(e);return Number.isNaN(t)?tT():e4(t)},uV=Symbol.for("effect/Console"),uG=tu("effect/Console"),uH={[uV]:uV,assert:(e,...t)=>o0(()=>{console.assert(e,...t)}),clear:o0(()=>{console.clear()}),count:e=>o0(()=>{console.count(e)}),countReset:e=>o0(()=>{console.countReset(e)}),debug:(...e)=>o0(()=>{console.debug(...e)}),dir:(e,t)=>o0(()=>{console.dir(e,t)}),dirxml:(...e)=>o0(()=>{console.dirxml(...e)}),error:(...e)=>o0(()=>{console.error(...e)}),group:e=>e?.collapsed?o0(()=>console.groupCollapsed(e?.label)):o0(()=>console.group(e?.label)),groupEnd:o0(()=>{console.groupEnd()}),info:(...e)=>o0(()=>{console.info(...e)}),log:(...e)=>o0(()=>{console.log(...e)}),table:(e,t)=>o0(()=>{console.table(e,t)}),time:e=>o0(()=>console.time(e)),timeEnd:e=>o0(()=>console.timeEnd(e)),timeLog:(e,...t)=>o0(()=>{console.timeLog(e,...t)}),trace:(...e)=>o0(()=>{console.trace(...e)}),warn:(...e)=>o0(()=>{console.warn(...e)}),unsafe:console},uW=Symbol.for("effect/Random"),uY=tu("effect/Random");class uQ{seed;[uW]=uW;PRNG;constructor(e){this.seed=e,this.PRNG=new Z(e)}get next(){return o0(()=>this.PRNG.number())}get nextBoolean(){return oq(this.next,e=>e>.5)}get nextInt(){return o0(()=>this.PRNG.integer(Number.MAX_SAFE_INTEGER))}nextRange(e,t){return oq(this.next,s=>(t-e)*s+e)}nextIntBetween(e,t){return o0(()=>this.PRNG.integer(t-e)+e)}shuffle(e){return uX(e,e=>this.nextIntBetween(0,e))}}let uX=(e,t)=>oZ(()=>E(o0(()=>Array.from(e)),oF(e=>{let s=[];for(let t=e.length;t>=2;t-=1)s.push(t);return E(s,o$(s=>E(t(s),oq(t=>uZ(e,s-1,t)))),op(sC(e)))}))),uZ=(e,t,s)=>{let n=e[t];return e[t]=e[s],e[s]=n,e},u0=E(tm(),ta(ua,new up),ta(uG,uH),ta(uY,new uQ(4294967296*Math.random()>>>0)),ta(uN,(e=>{let{pathDelim:t,seqDelim:s}=Object.assign({},{pathDelim:"_",seqDelim:","},e),n=e=>E(e,sk(t)),i=e=>e.split(t),r=()=>"undefined"!=typeof process&&"env"in process&&"object"==typeof process.env?process.env:{};return uM(uj({load:(e,t,i=!0)=>{let a=n(e),o=r();return E(a in o?e4(o[a]):tT(),oJ(()=>uw(e,`Expected ${a} to exist in the process context`)),oF(n=>uD(n,e,t,s,i)))},enumerateChildren:e=>o0(()=>nG(Object.keys(r()).map(e=>i(e.toUpperCase())).filter(t=>{for(let s=0;s<e.length;s++){let n=E(e,t6(s)),i=t[s];if(void 0===i||n!==i)return!1}return!0}).flatMap(t=>t.slice(e.length,e.length+1)))),patch:uE}))})()),ta(a3,{[a2]:a2,span:(e,t,s,n,i,r)=>new a6(e,t,s,n,i,r),context:e=>e()})),u1=N(Symbol.for("effect/DefaultServices/currentServices"),()=>lT(u0)),u2=e=>ld(u1,t=>e(to(t,ua))),u3=u2(e=>e.currentTimeMillis);i=e=>e.next,ld(u1,e=>i(to(e,uY)));let u5=e=>oF(oI,t=>cy(e,oD(t))),u4="Sequential",u6="Parallel",u8={_tag:u4},u7=e=>e._tag===u4,u9=e=>e._tag===u6,pe={_tag:u6},pt=e=>({_tag:"ParallelN",parallelism:e}),ps=Symbol.for("effect/FiberRefs");class pn{locals;[ps]=ps;constructor(e){this.locals=e}pipe(){return eR(this,arguments)}}let pi=(e,t,s,n=!1)=>{let i,r=t,a=s,o=n;for(;void 0===i;)if(t2(r)&&t2(a)){let e=t7(r)[0],t=st(r),s=t7(a)[0],n=t7(a)[1],l=st(a);e.startTimeMillis<s.startTimeMillis?(a=l,o=!0):e.startTimeMillis>s.startTimeMillis?r=t:e.id<s.id?(a=l,o=!0):e.id>s.id?r=t:i=[n,o]}else i=[e.initial,!0];return i},pr=v(3,(e,t,s)=>{let n=new Map(e.locals);return s.locals.forEach((e,s)=>{let i=e[0][1];if(!e[0][0][ex](t)){if(!n.has(s)){if(ey(i,s.initial))return;n.set(s,[[t,s.join(s.initial,i)]]);return}let r=n.get(s),[a,o]=pi(s,r,e);if(o){let e=s.diff(a,i),o=r[0][1],l=s.join(o,s.patch(e)(o));if(!ey(o,l)){let e;let i=r[0][0];e=i[ex](t)?[[i,l],...r.slice(1)]:[[t,l],...r],n.set(s,e)}}}}),new pn(n)}),pa=v(2,(e,t)=>{let s=new Map;return po(e,s,t),new pn(s)}),po=(e,t,s)=>{e.locals.forEach((e,n)=>{let i=e[0][1],r=n.patch(n.fork)(i);ey(i,r)?t.set(n,e):t.set(n,[[s,r],...e])})},pl=v(2,(e,t)=>{let s=new Map(e.locals);return s.delete(t),new pn(s)}),pc=v(2,(e,t)=>e.locals.has(t)?e4(t7(e.locals.get(t))[1]):tT()),pu=v(2,(e,t)=>E(pc(e,t),tI(()=>t.initial))),pp=v(2,(e,{fiberId:t,fiberRef:s,value:n})=>{if(0===e.locals.size)return new pn(new Map([[s,[[t,n]]]]));let i=new Map(e.locals);return pm(i,t,s,n),new pn(i)}),pm=(e,t,s,n)=>{let i;let r=e.get(s)??[];if(t2(r)){let[e,s]=t7(r);if(e[ex](t)){if(ey(s,n))return;i=[[t,n],...r.slice(1)]}else i=[[t,n],...r]}else i=[[t,n]];e.set(s,i)},ph=v(2,(e,{entries:t,forkAs:s})=>{if(0===e.locals.size)return new pn(new Map(t));let n=new Map(e.locals);return void 0!==s&&po(e,n,s),t.forEach(([e,t])=>{1===t.length?pm(n,t[0][0],e,t[0][1]):t.forEach(([t,s])=>{pm(n,t,e,s)})}),new pn(n)}),pf="Empty",pd="Remove",pg="Update",pb="AndThen",px={_tag:pf},py=(e,t)=>{let s=new Map(e.locals),n=px;for(let[e,i]of t.locals.entries()){let t=t7(i)[1],r=s.get(e);if(void 0!==r){let s=t7(r)[1];ey(s,t)||(n=pv({_tag:pg,fiberRef:e,patch:e.diff(s,t)})(n))}else n=pv({_tag:"Add",fiberRef:e,value:t})(n);s.delete(e)}for(let[e]of s.entries())n=pv({_tag:pd,fiberRef:e})(n);return n},pv=v(2,(e,t)=>({_tag:pb,first:e,second:t})),p_=v(3,(e,t,s)=>{let n=s,i=sg(e);for(;t2(i);){let e=t7(i),s=st(i);switch(e._tag){case pf:i=s;break;case"Add":n=pp(n,{fiberId:t,fiberRef:e.fiberRef,value:e.value}),i=s;break;case pd:n=pl(n,e.fiberRef),i=s;break;case pg:{let r=pu(n,e.fiberRef);n=pp(n,{fiberId:t,fiberRef:e.fiberRef,value:e.fiberRef.patch(e.patch)(r)}),i=s;break}case pb:i=tQ(e.first)(tQ(e.second)(s))}}return n}),pw="effect/FiberStatus",pS=Symbol.for(pw),pk="Done",pO="Running",pE="Suspended",pT=eh(`${pw}-${pk}`);class pR{[pS]=pS;_tag=pk;[ea](){return pT}[ex](e){return pA(e)&&e._tag===pk}}class pI{runtimeFlags;[pS]=pS;_tag=pO;constructor(e){this.runtimeFlags=e}[ea](){return E(eo(pw),ec(eo(this._tag)),ec(eo(this.runtimeFlags)),eb(this))}[ex](e){return pA(e)&&e._tag===pO&&this.runtimeFlags===e.runtimeFlags}}class pN{runtimeFlags;blockingOn;[pS]=pS;_tag=pE;constructor(e,t){this.runtimeFlags=e,this.blockingOn=t}[ea](){return E(eo(pw),ec(eo(this._tag)),ec(eo(this.runtimeFlags)),ec(eo(this.blockingOn)),eb(this))}[ex](e){return pA(e)&&e._tag===pE&&this.runtimeFlags===e.runtimeFlags&&ey(this.blockingOn,e.blockingOn)}}let pF=new pR,pA=e=>q(e,pS),pj=e=>new pI(e),pM=(e,t)=>new pN(e,t),pC=e=>e._tag===pk,pL={_tag:"Fatal",syslog:2,label:"FATAL",ordinal:5e4,pipe(){return eR(this,arguments)}},pU={_tag:"Error",syslog:3,label:"ERROR",ordinal:4e4,pipe(){return eR(this,arguments)}},pP={_tag:"Warning",syslog:4,label:"WARN",ordinal:3e4,pipe(){return eR(this,arguments)}},p$={_tag:"Trace",syslog:7,label:"TRACE",ordinal:0,pipe(){return eR(this,arguments)}},pD=(r=E(tK,tJ(e=>e.ordinal)),v(2,(e,t)=>1===r(e,t))),pz=e=>{switch(e){case"All":return ll;case"Debug":return lu;case"Error":return pU;case"Fatal":return pL;case"Info":return lc;case"Trace":return p$;case"None":return lp;case"Warning":return pP}},pB=Symbol.for("effect/Readable"),pq=Symbol.for("effect/Ref"),pK={_A:e=>e};class pJ{ref;[pq]=pK;[pB];constructor(e){this.ref=e,this[pB]=pB,this.get=o0(()=>n0(this.ref))}get;modify(e){return o0(()=>{let t=n0(this.ref),[s,n]=e(t);return t!==n&&n1(n)(this.ref),s})}pipe(){return eR(this,arguments)}}let pV=e=>new pJ(nX(e)),pG=e=>o0(()=>pV(e)),pH=e=>e.get,pW=v(2,(e,t)=>e.modify(()=>[void 0,t])),pY=v(2,(e,t)=>e.modify(t)),pQ=v(2,(e,t)=>e.modify(e=>[void 0,t(e)]));class pX{buckets=[];scheduleTask(e,t){let s,n;for(s=0;s<this.buckets.length;s++)if(this.buckets[s][0]<=t)n=this.buckets[s];else break;if(n)n[1].push(e);else{let n=[];for(let e=0;e<s;e++)n.push(this.buckets[e]);n.push([t,[e]]);for(let e=s;e<this.buckets.length;e++)n.push(this.buckets[e]);this.buckets=n}}}class pZ{maxNextTickBeforeTimer;running=!1;tasks=new pX;constructor(e){this.maxNextTickBeforeTimer=e}starveInternal(e){let t=this.tasks.buckets;for(let[e,s]of(this.tasks.buckets=[],t))for(let e=0;e<s.length;e++)s[e]();0===this.tasks.buckets.length?this.running=!1:this.starve(e)}starve(e=0){e>=this.maxNextTickBeforeTimer?setTimeout(()=>this.starveInternal(0),0):Promise.resolve(void 0).then(()=>this.starveInternal(e+1))}shouldYield(e){return e.currentOpCount>e.getFiberRef(lF)&&e.getFiberRef(lN)}scheduleTask(e,t){this.tasks.scheduleTask(e,t),this.running||(this.running=!0,this.starve())}}let p0=N(Symbol.for("effect/Scheduler/defaultScheduler"),()=>new pZ(2048));class p1{tasks=new pX;deferred=!1;scheduleTask(e,t){this.deferred?p0.scheduleTask(e,t):this.tasks.scheduleTask(e,t)}shouldYield(e){return e.currentOpCount>e.getFiberRef(lF)&&e.getFiberRef(lN)}flush(){for(;this.tasks.buckets.length>0;){let e=this.tasks.buckets;for(let[t,s]of(this.tasks.buckets=[],e))for(let e=0;e<s.length;e++)s[e]()}this.deferred=!0}}let p2=N(Symbol.for("effect/FiberRef/currentScheduler"),()=>lk(p0)),p3=(e,t)=>({_tag:"Par",left:e,right:t}),p5=(e,t)=>({_tag:"Seq",left:e,right:t}),p4=e=>{let t=iN(e),s=iI();for(;;){let[e,n]=iM(t,[mn(),iI()],([e,t],s)=>{let[n,i]=p6(s);return[mr(e,n),iF(t,i)]});if(s=p8(s,e),iE(n))return iC(s);t=n}throw Error("BUG: BlockedRequests.flatten - please report an issue at https://github.com/Effect-TS/effect/issues")},p6=e=>{let t=e,s=mn(),n=iI(),i=iI();for(;;)switch(t._tag){case"Empty":if(iE(n))return[s,i];t=n.head,n=n.tail;break;case"Par":n=iR(t.right,n),t=t.left;break;case"Seq":{let e=t.left,s=t.right;switch(e._tag){case"Empty":t=s;break;case"Par":{let n=e.left,i=e.right;t=p3(p5(n,s),p5(i,s));break}case"Seq":t=p5(e.left,p5(e.right,s));break;case"Single":t=e,i=iR(s,i)}break}case"Single":if(s=mi(s,t),iE(n))return[s,i];t=n.head,n=n.tail}throw Error("BUG: BlockedRequests.step - please report an issue at https://github.com/Effect-TS/effect/issues")},p8=(e,t)=>{if(iE(e))return iN(ml(t));if(ma(t))return e;let s=mf(e.head),n=mo(t);return 1===s.length&&1===n.length&&ey(s[0],n[0])?iR(mh(e.head,ml(t)),e.tail):iR(ml(t),e)},p7=Symbol.for("effect/RequestBlock/Entry"),p9={_R:e=>e},me=Symbol.for("effect/RequestBlock/RequestBlockParallel"),mt={_R:e=>e};class ms{map;[me]=mt;constructor(e){this.map=e}}let mn=()=>new ms(np()),mi=(e,t)=>new ms(nw(e.map,t.dataSource,e=>tF(tL(e,sq(t.blockedRequest)),()=>sM(t.blockedRequest)))),mr=(e,t)=>new ms(nT(e.map,t.map,(e,t,s)=>ng(e,s,tR(nh(e,s),{onNone:()=>t,onSome:e=>sV(t,e)})))),ma=e=>ib(e.map),mo=e=>Array.from(nx(e.map)),ml=e=>mm(nO(e.map,e=>sM(e))),mc=Symbol.for("effect/RequestBlock/RequestBlockSequential"),mu={_R:e=>e};class mp{map;[mc]=mu;constructor(e){this.map=e}}let mm=e=>new mp(e),mh=(e,t)=>new mp(nT(t.map,e.map,(e,t,s)=>ng(e,s,tR(nh(e,s),{onNone:()=>sA(),onSome:e=>sV(e,t)})))),mf=e=>Array.from(nx(e.map)),md=e=>Array.from(e.map),mg=N(Symbol.for("effect/FiberRef/currentRequestMap"),()=>lk(new Map)),mb=(e,t,s,n)=>{switch(e){case void 0:return t();case"unbounded":return s();case"inherit":return ld(lL,e=>"unbounded"===e?s():e>1?n(e):t());default:return e>1?n(e):t()}},mx=(e,t,s)=>{switch(e){case void 0:return t();case"unbounded":return s();case"inherit":return ld(lL,e=>"unbounded"===e||e>1?s():t());default:return e>1?s():t()}},my=e=>{let t=cB(e);return u2(e=>e.sleep(t))},mv=e=>t=>{let s=t.label.replace(/[\s="]/g,"_");return`${s}=${e-t.startTime}ms`},m_="effect/MetricLabel",mw=Symbol.for(m_);class mS{key;value;[mw]=mw;_hash;constructor(e,t){this.key=e,this.value=t,this._hash=eh(m_+this.key+this.value)}[ea](){return this._hash}[ex](e){return mO(e)&&this.key===e.key&&this.value===e.value}pipe(){return eR(this,arguments)}}let mk=(e,t)=>new mS(e,t),mO=e=>q(e,mw),mE=e=>{let t,s;return"function"==typeof e?t=e:(t=e.try,s=e.catch),o0(()=>{try{return t()}catch(e){throw oe(au(s?s(e):new l8(e)))}})},mT=v(3,(e,t,s)=>ob(e,K(t),s)),mR=v(2,(e,t)=>{let s;return ob(e,e=>(s??=Object.keys(t),q(e,"_tag")&&F(e._tag)&&s.includes(e._tag)),e=>t[e._tag](e))}),mI=e=>mq(e,mA,py),mN=v(3,(e,t,s)=>oF(e,e=>t(e)?oX(e):s(e))),mF=v(e=>ol(e[0]),(e,t,s)=>mN(e,t,e=>void 0===s?oO(new l4):oE(()=>s(e)))),mA=oc(e=>oX(e.getFiberRefs())),mj=e=>(...t)=>{let s;let n=tA(e);for(let e=0,n=t.length;e<n;e++){let n=t[e];ad(n)&&(s=void 0!==s?af(s,n):n,t=[...t.slice(0,e),...t.slice(e+1)],e--)}return 0===t.length?t="":1===t.length&&(t=t[0]),void 0===s&&(s=ac),oc(e=>(e.log(t,s,n),o6))},mM=mj(lu),mC=mj(lc),mL=mj(pP),mU=mj(pU),mP=v(2,(e,t)=>oL(e,{onFailure:e=>oR(()=>t(e)),onSuccess:oX})),m$=e=>oq(e,e=>!e),mD=e=>mV((t,s)=>E(e,p_(t,s))),mz=v(3,(e,t,s)=>cT(n=>cR(e,ta(n,t,s)))),mB=v(3,(e,t,s)=>cT(n=>oF(s,s=>cR(e,E(n,ta(t,s)))))),mq=v(3,(e,t,s)=>oF(t,n=>oF(e,e=>oq(t,t=>[s(n,t),e])))),mK=v(2,(e,t)=>oL(e,{onFailure:e=>{let s=ak(e);switch(s._tag){case"Left":return li(t(s.left),oT(e));case"Right":return oT(e)}},onSuccess:oX})),mJ=e=>{let t,s;return("function"==typeof e?t=e:(t=e.try,s=e.catch),t.length>=1)?of((e,n)=>{try{t(n).then(t=>e(cp(t)),t=>e(oO(s?s(t):new l8(t))))}catch(t){e(oO(s?s(t):new l8(t)))}}):of(e=>{try{t().then(t=>e(cp(t)),t=>e(oO(s?s(t):new l8(t))))}catch(t){e(oO(s?s(t):new l8(t)))}})},mV=e=>oc(t=>(t.setFiberRefs(e(t.id(),t.getFiberRefs())),o6)),mG=v(2,(e,t)=>oZ(()=>t()?oq(e,e4):oX(tT()))),mH=BigInt(0),mW=(e,t,s)=>{if(!1===e.getFiberRef(lB))return cj(t);let n=e.getFiberRef(lI),i=e.getFiberRef(u1),r=to(i,a3),a=to(i,ua),o=e.getFiberRef(lq),l=e.getFiberRefs(),c=pc(l,lK),u=pc(l,lJ),p=s.parent?e4(s.parent):s.root?tT():tl(n,a5),m="Some"===u._tag?void 0!==s.links?[...sU(u.value),...s.links??[]]:sU(u.value):s.links??sd(),h=r.span(t,p,s.context??tm(),m,o?a.unsafeCurrentTimeNanos():mH,s.kind??"internal");return"function"==typeof s.captureStackTrace&&aJ.set(h,s.captureStackTrace),"Some"===c._tag&&nE(c.value,(e,t)=>h.attribute(t,e)),void 0!==s.attributes&&Object.entries(s.attributes).forEach(([e,t])=>h.attribute(e,t)),h},mY=(e,...t)=>{let s=a8(1===t.length?void 0:t[0]),n=t[t.length-1];return oc(t=>{let i=mW(t,e,s),r=t.getFiberRef(lq),a=to(t.getFiberRef(u1),ua);return oV(n(i),e=>o0(()=>{"Ended"!==i.status._tag&&(l9(e)&&aJ.has(i)&&i.attribute("code.stacktrace",aJ.get(i)()),i.end(r?a.unsafeCurrentTimeNanos():mH,e))}))})},mQ=v(2,(e,t)=>mz(e,a5,t)),mX="InterruptSignal",mZ="Stateful",m0="Resume",m1="YieldNow",m2=e=>({_tag:mX,cause:e}),m3=e=>({_tag:mZ,onFiber:e}),m5=e=>({_tag:m0,effect:e}),m4=()=>({_tag:m1}),m6=Symbol.for("effect/FiberScope");class m8{[m6]=m6;fiberId=ip;roots=new Set;add(e,t){this.roots.add(t),t.addObserver(()=>{this.roots.delete(t)})}}class m7{fiberId;parent;[m6]=m6;constructor(e,t){this.fiberId=e,this.parent=t}add(e,t){this.parent.tell(m3(e=>{e.addChild(t),t.addObserver(()=>{e.removeChild(t)})}))}}let m9=e=>new m7(e.id(),e),he=N(Symbol.for("effect/FiberScope/Global"),()=>new m8),ht=Symbol.for("effect/Fiber"),hs={_E:e=>e,_A:e=>e},hn={[ht]:hs,pipe(){return eR(this,arguments)}},hi=Symbol.for("effect/Fiber"),hr=((e,t)=>e.interruptAsFork(t),e=>ln(oM(e.await),e.inheritAll)),ha=((e,t)=>ha(e,e=>o0(()=>t(e))),v(2,(e,t)=>({...hn,id:()=>e.id(),await:oF(e.await,ca(t)),children:e.children,inheritAll:e.inheritAll,poll:oF(e.poll,e=>{switch(e._tag){case"None":return oX(tT());case"Some":return E(ca(e.value,t),oq(e4))}}),interruptAsFork:t=>e.interruptAsFork(t)})));(e,t)=>({...hn,id:()=>ia(e.id(),t.id()),await:lr(e.await,t.await,(e,t)=>ce(e)?e:t),children:e.children,inheritAll:li(t.inheritAll,e.inheritAll),poll:lr(e.poll,t.poll,(e,t)=>{switch(e._tag){case"None":return tT();case"Some":return ce(e.value)?e:t}}),interruptAsFork:s=>E(lo(e,s),li(E(t,lo(s))),om)});let ho="effect/FiberCurrent",hl=Symbol.for("effect/Logger"),hc={_Message:e=>e,_Output:e=>e},hu=e=>({[hl]:hc,log:e,pipe(){return eR(this,arguments)}}),hp=v(2,(e,t)=>hu(s=>t(e.log(s)))),hm=((e,t)=>hu(s=>[e.log(s),t.log(s)]),hu(({annotations:e,cause:t,date:s,fiberId:n,logLevel:i,message:r,spans:a})=>{let o=s.getTime(),l=`timestamp=${s.toISOString()} level=${i.label} fiber=${ic(n)}`;if(Array.isArray(r))for(let e=0;e<r.length;e++){let t=eE(r[e]);t.length>0&&(l+=" message=",l=hd(t,l))}else{let e=eE(r);e.length>0&&(l+=" message=",l=hd(e,l))}if(null!=t&&"Empty"!==t._tag&&(l+=" cause=",l=hd(az(t),l)),iT(a)){l+=" ";let e=!0;for(let t of a)e?e=!1:l+=" ",l+=E(t,mv(o))}if(E(e,ny)>0){l+=" ";let t=!0;for(let[s,n]of e)t?t=!1:l+=" ",l+=hx(s)+"=",l=hd(eE(n),l)}return l})),hh=e=>`"${e.replace(/\\([\s\S])|(")/g,"\\$1$2")}"`,hf=/^[^\s"=]+$/,hd=(e,t)=>t+(e.match(hf)?e:hh(e)),hg=(({annotations:e,cause:t,date:s,fiberId:n,logLevel:i,message:r,spans:a})=>{let o=s.getTime(),l=`timestamp=${s.toISOString()} level=${i.label} fiber=${ic(n)}`;if(Array.isArray(r))for(let e=0;e<r.length;e++){let t=eE(r[e],0);t.length>0&&(l+=" message=",l=hv(t,l))}else{let e=eE(r,0);e.length>0&&(l+=" message=",l=hv(e,l))}if(null!=t&&"Empty"!==t._tag&&(l+=" cause=",l=hv(az(t),l)),iT(a)){l+=" ";let e=!0;for(let t of a)e?e=!1:l+=" ",l+=E(t,h_(o))}if(E(e,ny)>0){l+=" ";let t=!0;for(let[s,n]of e)t?t=!1:l+=" ",l+=hx(s)+"=",l=hv(eE(n,0),l)}return l},hu(({annotations:e,cause:t,date:s,fiberId:n,logLevel:i,message:r,spans:a})=>{let o=s.getTime(),l={},c={};if(ny(e)>0)for(let[t,s]of e)l[t]=hb(s);if(iT(a))for(let e of a)c[e.label]=o-e.startTime;return{message:hb(r),logLevel:i.label,timestamp:s.toISOString(),cause:ab(t)?void 0:az(t),annotations:l,spans:c,fiberId:ic(n)}})),hb=e=>{switch(typeof e){case"bigint":case"function":case"symbol":return String(e);default:return e}},hx=e=>e.replace(/[\s="]/g,"_"),hy=e=>JSON.stringify(e),hv=(e,t)=>t+(e.match(hf)?e:hy(e)),h_=e=>t=>{let s=hx(t.label);return`${s}=${e-t.startTime}ms`},hw=Symbol.for("effect/MetricKeyType"),hS="effect/MetricKeyType/Counter",hk=Symbol.for(hS),hO=Symbol.for("effect/MetricKeyType/Frequency"),hE=Symbol.for("effect/MetricKeyType/Gauge"),hT="effect/MetricKeyType/Histogram",hR=Symbol.for(hT),hI=Symbol.for("effect/MetricKeyType/Summary"),hN={_In:e=>e,_Out:e=>e};class hF{incremental;bigint;[hw]=hN;[hk]=hk;constructor(e,t){this.incremental=e,this.bigint=t,this._hash=eh(hS)}_hash;[ea](){return this._hash}[ex](e){return hM(e)}pipe(){return eR(this,arguments)}}class hA{boundaries;[hw]=hN;[hR]=hR;constructor(e){this.boundaries=e,this._hash=E(eh(hT),ec(eo(this.boundaries)))}_hash;[ea](){return this._hash}[ex](e){return hU(e)&&ey(this.boundaries,e.boundaries)}pipe(){return eR(this,arguments)}}let hj=e=>new hF(e?.incremental??!1,e?.bigint??!1),hM=e=>q(e,hk),hC=e=>q(e,hO),hL=e=>q(e,hE),hU=e=>q(e,hR),hP=e=>q(e,hI),h$=Symbol.for("effect/MetricKey"),hD={_Type:e=>e},hz=tg(ey);class hB{name;keyType;description;tags;[h$]=hD;constructor(e,t,s,n=[]){this.name=e,this.keyType=t,this.description=s,this.tags=n,this._hash=E(eh(this.name+this.description),ec(eo(this.keyType)),ec(eg(this.tags)))}_hash;[ea](){return this._hash}[ex](e){return hq(e)&&this.name===e.name&&ey(this.keyType,e.keyType)&&ey(this.description,e.description)&&hz(this.tags,e.tags)}pipe(){return eR(this,arguments)}}let hq=e=>q(e,h$),hK=(e,t)=>new hB(e,hj(t),tA(t?.description)),hJ=v(2,(e,t)=>0===t.length?e:new hB(e.name,e.keyType,e.description,sf(e.tags,t))),hV=Symbol.for("effect/MutableHashMap"),hG={[hV]:hV,[Symbol.iterator](){return new hH(this)},toString(){return eO(this.toJSON())},toJSON(){return{_id:"MutableHashMap",values:Array.from(this).map(ek)}},[eS](){return this.toJSON()},pipe(){return eR(this,arguments)}};class hH{self;referentialIterator;bucketIterator;constructor(e){this.self=e,this.referentialIterator=e.referential[Symbol.iterator]()}next(){if(void 0!==this.bucketIterator)return this.bucketIterator.next();let e=this.referentialIterator.next();return e.done?(this.bucketIterator=new hW(this.self.buckets.values()),this.next()):e}[Symbol.iterator](){return new hH(this.self)}}class hW{backing;constructor(e){this.backing=e}currentBucket;next(){if(void 0===this.currentBucket){let e=this.backing.next();if(e.done)return e;this.currentBucket=e.value[Symbol.iterator]()}let e=this.currentBucket.next();return e.done?(this.currentBucket=void 0,this.next()):e}}let hY=()=>{let e=Object.create(hG);return e.referential=new Map,e.buckets=new Map,e.bucketsSize=0,e},hQ=v(2,(e,t)=>{if(!1===e_(t))return e.referential.has(t)?e4(e.referential.get(t)):tT();let s=t[ea](),n=e.buckets.get(s);return void 0===n?tT():hX(e,n,t)}),hX=(e,t,s,n=!1)=>{for(let i=0,r=t.length;i<r;i++)if(s[ex](t[i][0])){let s=t[i][1];return n&&(t.splice(i,1),e.bucketsSize--),e4(s)}return tT()},hZ=v(2,(e,t)=>e3(hQ(e,t))),h0=v(3,(e,t,s)=>{if(!1===e_(t))return e.referential.set(t,s),e;let n=t[ea](),i=e.buckets.get(n);return void 0===i?e.buckets.set(n,[[t,s]]):(h1(e,i,t),i.push([t,s])),e.bucketsSize++,e}),h1=(e,t,s)=>{for(let n=0,i=t.length;n<i;n++)if(s[ex](t[n][0])){t.splice(n,1),e.bucketsSize--;return}},h2=v(2,(e,t)=>{if(!1===e_(t))return e.referential.delete(t),e;let s=t[ea](),n=e.buckets.get(s);return void 0===n||(h1(e,n,t),0===n.length&&e.buckets.delete(s)),e}),h3=e=>e.referential.size+e.bucketsSize,h5=Symbol.for("effect/MetricState"),h4="effect/MetricState/Counter",h6=Symbol.for(h4),h8="effect/MetricState/Frequency",h7=Symbol.for(h8),h9="effect/MetricState/Gauge",fe=Symbol.for(h9),ft="effect/MetricState/Histogram",fs=Symbol.for(ft),fn="effect/MetricState/Summary",fi=Symbol.for(fn),fr={_A:e=>e};class fa{count;[h5]=fr;[h6]=h6;constructor(e){this.count=e}[ea](){return E(eo(h4),ec(eo(this.count)),eb(this))}[ex](e){return fb(e)&&this.count===e.count}pipe(){return eR(this,arguments)}}let fo=tg(ey);class fl{occurrences;[h5]=fr;[h7]=h7;constructor(e){this.occurrences=e}_hash;[ea](){return E(eh(h8),ec(eg(tW(this.occurrences.entries()))),eb(this))}[ex](e){return fx(e)&&fo(tW(this.occurrences.entries()),tW(e.occurrences.entries()))}pipe(){return eR(this,arguments)}}class fc{value;[h5]=fr;[fe]=fe;constructor(e){this.value=e}[ea](){return E(eo(h9),ec(eo(this.value)),eb(this))}[ex](e){return fy(e)&&this.value===e.value}pipe(){return eR(this,arguments)}}class fu{buckets;count;min;max;sum;[h5]=fr;[fs]=fs;constructor(e,t,s,n,i){this.buckets=e,this.count=t,this.min=s,this.max=n,this.sum=i}[ea](){return E(eo(ft),ec(eo(this.buckets)),ec(eo(this.count)),ec(eo(this.min)),ec(eo(this.max)),ec(eo(this.sum)),eb(this))}[ex](e){return fv(e)&&ey(this.buckets,e.buckets)&&this.count===e.count&&this.min===e.min&&this.max===e.max&&this.sum===e.sum}pipe(){return eR(this,arguments)}}class fp{error;quantiles;count;min;max;sum;[h5]=fr;[fi]=fi;constructor(e,t,s,n,i,r){this.error=e,this.quantiles=t,this.count=s,this.min=n,this.max=i,this.sum=r}[ea](){return E(eo(fn),ec(eo(this.error)),ec(eo(this.quantiles)),ec(eo(this.count)),ec(eo(this.min)),ec(eo(this.max)),ec(eo(this.sum)),eb(this))}[ex](e){return f_(e)&&this.error===e.error&&ey(this.quantiles,e.quantiles)&&this.count===e.count&&this.min===e.min&&this.max===e.max&&this.sum===e.sum}pipe(){return eR(this,arguments)}}let fm=e=>new fa(e),fh=e=>new fl(e),ff=e=>new fc(e),fd=e=>new fu(e.buckets,e.count,e.min,e.max,e.sum),fg=e=>new fp(e.error,e.quantiles,e.count,e.min,e.max,e.sum),fb=e=>q(e,h6),fx=e=>q(e,h7),fy=e=>q(e,fe),fv=e=>q(e,fs),f_=e=>q(e,fi),fw=Symbol.for("effect/MetricHook"),fS={_In:e=>e,_Out:e=>e},fk=e=>({[fw]:fS,pipe(){return eR(this,arguments)},...e}),fO=BigInt(0),fE=e=>{let t=e.keyType.bigint?fO:0,s=e.keyType.incremental?e.keyType.bigint?e=>e>=fO:e=>e>=0:e=>!0;return fk({get:()=>fm(t),update:e=>{s(e)&&(t+=e)}})},fT=e=>{let t=new Map;for(let s of e.keyType.preregisteredWords)t.set(s,0);return fk({get:()=>fh(t),update:e=>{let s=t.get(e)??0;t.set(e,s+1)}})},fR=(e,t)=>{let s=t;return fk({get:()=>ff(s),update:e=>{s=e}})},fI=e=>{let t=e.keyType.boundaries.values,s=t.length,n=new Uint32Array(s+1),i=new Float32Array(s),r=0,a=0,o=Number.MAX_VALUE,l=Number.MIN_VALUE;E(t,sa(tK),sb((e,t)=>{i[t]=e}));let c=()=>{let e=tH(s),t=0;for(let r=0;r<s;r++){let s=i[r];t+=n[r],e[r]=[s,t]}return e};return fk({get:()=>fd({buckets:c(),count:r,min:o,max:l,sum:a}),update:e=>{let t=0,c=s;for(;t!==c;){let s=Math.floor(t+(c-t)/2);e<=i[s]?c=s:t=s,c===t+1&&(e<=i[t]?c=t:t=c)}n[t]=n[t]+1,r+=1,a+=e,e<o&&(o=e),e>l&&(l=e)}})},fN=e=>{let{error:t,maxAge:s,maxSize:n,quantiles:i}=e.keyType,r=E(i,sa(tK)),a=tH(n),o=0,l=0,c=0,u=Number.MAX_VALUE,p=Number.MIN_VALUE,m=e=>{let i=[],o=0;for(;o!==n-1;){let t=a[o];if(null!=t){let[n,r]=t,a=cQ(e-n);us(a,cH)&&a<=s&&i.push(r)}o+=1}return fF(t,r,sa(i,tK))},h=(e,t)=>{n>0&&(a[(o+=1)%n]=[t,e]),l+=1,c+=e,e<u&&(u=e),e>p&&(p=e)};return fk({get:()=>fg({error:t,quantiles:m(Date.now()),count:l,min:u,max:p,sum:c}),update:([e,t])=>h(e,t)})},fF=(e,t,s)=>{let n=s.length;if(!t2(t))return sd();let i=t[0],r=t.slice(1),a=fA(e,n,tT(),0,i,s),o=sg(a);return r.forEach(t=>{o.push(fA(e,n,a.value,a.consumed,t,a.rest))}),sb(o,e=>[e.quantile,e.value])},fA=(e,t,s,n,i,r)=>{let a=e,o=t,l=s,c=n,u=i,p=r,m=e,h=t,f=s,d=n,g=i,b=r;for(;;){if(!t2(p))return{quantile:u,value:tT(),consumed:c,rest:[]};if(1===u)return{quantile:u,value:e4(se(p)),consumed:c+p.length,rest:[]};let e=sn(p,e=>e<=p[0]),t=u*o,s=a/2*t,n=c+e[0].length,i=Math.abs(n-t);if(n<t-s){m=a,h=o,f=t8(p),d=n,g=u,b=e[1],a=m,o=h,l=f,c=d,u=g,p=b;continue}if(n>t+s)return{quantile:u,value:l,consumed:c,rest:p};switch(l._tag){case"None":m=a,h=o,f=t8(p),d=n,g=u,b=e[1],a=m,o=h,l=f,c=d,u=g,p=b;continue;case"Some":if(i<Math.abs(t-l.value)){m=a,h=o,f=t8(p),d=n,g=u,b=e[1],a=m,o=h,l=f,c=d,u=g,p=b;continue}return{quantile:u,value:e4(l.value),consumed:c,rest:p}}}throw Error("BUG: MetricHook.resolveQuantiles - please report an issue at https://github.com/Effect-TS/effect/issues")},fj=Symbol.for("effect/MetricPair"),fM={_Type:e=>e},fC=(e,t)=>({[fj]:fM,metricKey:e,metricState:t,pipe(){return eR(this,arguments)}}),fL=Symbol.for("effect/MetricRegistry");class fU{[fL]=fL;map=hY();snapshot(){let e=[];for(let[t,s]of this.map)e.push(fC(t,s.get()));return e}get(e){let t=E(this.map,hQ(e),tj);if(null!=t)return t;if(hM(e.keyType))return this.getCounter(e);if(hL(e.keyType))return this.getGauge(e);if(hC(e.keyType))return this.getFrequency(e);if(hU(e.keyType))return this.getHistogram(e);if(hP(e.keyType))return this.getSummary(e);throw Error("BUG: MetricRegistry.get - unknown MetricKeyType - please report an issue at https://github.com/Effect-TS/effect/issues")}getCounter(e){let t=E(this.map,hQ(e),tj);if(null==t){let s=fE(e);E(this.map,hZ(e))||E(this.map,h0(e,s)),t=s}return t}getFrequency(e){let t=E(this.map,hQ(e),tj);if(null==t){let s=fT(e);E(this.map,hZ(e))||E(this.map,h0(e,s)),t=s}return t}getGauge(e){let t=E(this.map,hQ(e),tj);if(null==t){let s=fR(e,e.keyType.bigint?BigInt(0):0);E(this.map,hZ(e))||E(this.map,h0(e,s)),t=s}return t}getHistogram(e){let t=E(this.map,hQ(e),tj);if(null==t){let s=fI(e);E(this.map,hZ(e))||E(this.map,h0(e,s)),t=s}return t}getSummary(e){let t=E(this.map,hQ(e),tj);if(null==t){let s=fN(e);E(this.map,hZ(e))||E(this.map,h0(e,s)),t=s}return t}}let fP=()=>new fU,f$=Symbol.for("effect/Metric"),fD={_Type:e=>e,_In:e=>e,_Out:e=>e},fz=N(Symbol.for("effect/Metric/globalMetricRegistry"),()=>fP()),fB=function(e,t,s){let n=Object.assign(e=>o1(e,e=>fG(n,e)),{[f$]:fD,keyType:e,unsafeUpdate:t,unsafeValue:s,register(){return this.unsafeValue([]),this},pipe(){return eR(this,arguments)}});return n},fq=(e,t)=>fK(hK(e,t)),fK=e=>{let t;let s=new WeakMap,n=n=>{if(0===n.length)return void 0!==t?t:t=fz.get(e);let i=s.get(n);return void 0!==i||(i=fz.get(hJ(e,n)),s.set(n,i)),i};return fB(e.keyType,(e,t)=>n(t).update(e),e=>n(e).get())},fJ=v(3,(e,t,s)=>fV(e,[mk(t,s)])),fV=v(2,(e,t)=>fB(e.keyType,(s,n)=>e.unsafeUpdate(s,sf(t,n)),s=>e.unsafeValue(sf(t,s)))),fG=v(2,(e,t)=>ld(l$,s=>o0(()=>e.unsafeUpdate(t,s)))),fH="effect/MetricBoundaries",fW=Symbol.for(fH);class fY{values;[fW]=fW;constructor(e){this.values=e,this._hash=E(eh(fH),ec(eg(this.values)))}_hash;[ea](){return this._hash}[ex](e){return fQ(e)&&ey(this.values,e.values)}pipe(){return eR(this,arguments)}}let fQ=e=>q(e,fW),fX=v(2,(e,t)=>ld(mg,s=>o0(()=>{if(s.has(e)){let n=s.get(e);n.state.completed||(n.state.completed=!0,cS(n.result,t))}})));class fZ{count=0;observers=new Set;interrupted=!1;addObserver(e){this.observers.add(e)}removeObserver(e){this.observers.delete(e)}increment(){this.count++,this.observers.forEach(e=>e(this.count))}decrement(){this.count--,this.observers.forEach(e=>e(this.count))}}let f0=Symbol.for("effect/Supervisor"),f1={_T:e=>e};class f2{underlying;value0;[f0]=f1;constructor(e,t){this.underlying=e,this.value0=t}get value(){return this.value0}onStart(e,t,s,n){this.underlying.onStart(e,t,s,n)}onEnd(e,t){this.underlying.onEnd(e,t)}onEffect(e,t){this.underlying.onEffect(e,t)}onSuspend(e){this.underlying.onSuspend(e)}onResume(e){this.underlying.onResume(e)}map(e){return new f2(this,E(this.value,oq(e)))}zip(e){return new f3(this,e)}}class f3{left;right;_tag="Zip";[f0]=f1;constructor(e,t){this.left=e,this.right=t}get value(){return ls(this.left.value,this.right.value)}onStart(e,t,s,n){this.left.onStart(e,t,s,n),this.right.onStart(e,t,s,n)}onEnd(e,t){this.left.onEnd(e,t),this.right.onEnd(e,t)}onEffect(e,t){this.left.onEffect(e,t),this.right.onEffect(e,t)}onSuspend(e){this.left.onSuspend(e),this.right.onSuspend(e)}onResume(e){this.left.onResume(e),this.right.onResume(e)}map(e){return new f2(this,E(this.value,oq(e)))}zip(e){return new f3(this,e)}}let f5=e=>q(e,f0)&&K(e,"Zip");class f4{[f0]=f1;fibers=new Set;get value(){return o0(()=>Array.from(this.fibers))}onStart(e,t,s,n){this.fibers.add(n)}onEnd(e,t){this.fibers.delete(t)}onEffect(e,t){}onSuspend(e){}onResume(e){}map(e){return new f2(this,E(this.value,oq(e)))}zip(e){return new f3(this,e)}onRun(e,t){return e()}}class f6{effect;[f0]=f1;constructor(e){this.effect=e}get value(){return this.effect}onStart(e,t,s,n){}onEnd(e,t){}onEffect(e,t){}onSuspend(e){}onResume(e){}map(e){return new f2(this,E(this.value,oq(e)))}zip(e){return new f3(this,e)}onRun(e,t){return e()}}let f8=o0(()=>new f4),f7=e=>new f6(e),f9=N("effect/Supervisor/none",()=>f7(o6)),de="Empty",dt="AddSupervisor",ds="RemoveSupervisor",dn="AndThen",di={_tag:de},dr=(e,t)=>({_tag:dn,first:e,second:t}),da=(e,t)=>{let s=e,n=t;for(;sH(n);){let e=sY(n);switch(e._tag){case de:n=sQ(n);break;case dt:s=s.zip(e.supervisor),n=sQ(n);break;case ds:s=dl(s,e.supervisor),n=sQ(n);break;case dn:n=sK(e.first)(sK(e.second)(sQ(n)))}}return s},dl=(e,t)=>ey(e,t)?f9:f5(e)?dl(e.left,t).zip(dl(e.right,t)):e,dc=e=>ey(e,f9)?nM():f5(e)?E(dc(e.left),nK(dc(e.right))):nH(e),du=rP({empty:di,patch:(e,t)=>da(t,sM(e)),combine:dr,diff:(e,t)=>{if(ey(e,t))return di;let s=dc(e),n=dc(t),i=E(n,nq(s),nV(di,(e,t)=>dr(e,{_tag:dt,supervisor:t}))),r=E(s,nq(n),nV(di,(e,t)=>dr(e,{_tag:ds,supervisor:t})));return dr(i,r)}}),dp=fq("effect_fiber_started",{incremental:!0}),dm=fq("effect_fiber_active"),dh=fq("effect_fiber_successes",{incremental:!0}),df=fq("effect_fiber_failures",{incremental:!0}),dd=fJ(fK(new hB("effect_fiber_lifetimes",new hA(E(((e,t)=>{let s=Math.max(1,Math.floor(e)),n=Array(s);for(let e=0;e<s;e++)n[e]=t(e);return n})((a={start:.5,factor:2,count:35}).count-1,e=>a.start*Math.pow(a.factor,e)),sD,e=>new fY(E(e,tZ(sM(Number.POSITIVE_INFINITY)),sS)))),tA(o))),"time_unit","milliseconds"),dg="Continue",db="Yield",dx={_E:e=>e,_A:e=>e},dy=e=>{throw Error(`BUG: FiberRuntime - ${eE(e)} - please report an issue at https://github.com/Effect-TS/effect/issues`)},dv=Symbol.for("effect/internal/fiberRuntime/YieldedOp"),d_=N("effect/internal/fiberRuntime/yieldedOpChannel",()=>({currentOp:null})),dw={[ej]:(e,t,s)=>ei(()=>t.effect_instruction_i1(s)),OnStep:(e,t,s)=>cp(cp(s)),[eM]:(e,t,s)=>ei(()=>t.effect_instruction_i2(s)),[ez]:(e,t,s)=>(e.patchRuntimeFlags(e._runtimeFlags,t.patch),rZ(e._runtimeFlags)&&e.isInterrupted())?cr(e.getInterruptedCause()):cp(s),[eP]:(e,t,s)=>(ei(()=>t.effect_instruction_i2(s)),ei(()=>t.effect_instruction_i0()))?(e.pushStack(t),ei(()=>t.effect_instruction_i1())):o6},dS={[mX]:(e,t,s,n)=>(e.processNewInterruptSignal(n.cause),rZ(t)?cr(n.cause):s),[m0]:(e,t,s,n)=>{throw Error("It is illegal to have multiple concurrent run loops in a single fiber")},[mZ]:(e,t,s,n)=>(n.onFiber(e,pj(t)),s),[m1]:(e,t,s,n)=>oF(lt(),()=>s)},dk=e=>o$(p4(e),e=>d$(md(e),([e,t])=>{let s=new Map,n=[];for(let e of t)for(let t of(n.push(sU(e)),e))s.set(t.request,t);let i=n.flat();return lw(gn(e.runAll(n),i,()=>i.forEach(e=>{e.listeners.interrupted=!0})),mg,s)},!1,!1));class dO{[ht]=hs;[hi]=dx;pipe(){return eR(this,arguments)}_fiberRefs;_fiberId;_runtimeFlags;_queue=[];_children=null;_observers=[];_running=!1;_stack=[];_asyncInterruptor=null;_asyncBlockingOn=null;_exitValue=null;_steps=[];_supervisor;_scheduler;_tracer;currentOpCount=0;isYielding=!1;constructor(e,t,s){if(this._runtimeFlags=s,this._fiberId=e,this._fiberRefs=t,this._supervisor=this.getFiberRef(d7),this._scheduler=this.getFiberRef(p2),r5(s)){let e=this.getFiberRef(l$);dp.unsafeUpdate(1,e),dm.unsafeUpdate(1,e)}this._tracer=to(this.getFiberRef(u1),a3)}id(){return this._fiberId}resume(e){this.tell(m5(e))}get status(){return this.ask((e,t)=>t)}get runtimeFlags(){return this.ask((e,t)=>pC(t)?e._runtimeFlags:t.runtimeFlags)}scope(){return m9(this)}get children(){return this.ask(e=>Array.from(e.getChildren()))}getChildren(){return null===this._children&&(this._children=new Set),this._children}getInterruptedCause(){return this.getFiberRef(lz)}fiberRefs(){return this.ask(e=>e.getFiberRefs())}ask(e){return oZ(()=>{let t=cd(this._fiberId);return this.tell(m3((s,n)=>{cS(t,o0(()=>e(s,n)))})),cx(t)})}tell(e){this._queue.push(e),this._running||(this._running=!0,this.drainQueueLaterOnExecutor())}get await(){return of(e=>{let t=t=>e(oX(t));return this.tell(m3((e,s)=>{null!==e._exitValue?t(this._exitValue):e.addObserver(t)})),o0(()=>this.tell(m3((e,s)=>{e.removeObserver(t)})))},this.id())}get inheritAll(){return oc((e,t)=>{let s=e.id(),n=e.getFiberRefs(),i=t.runtimeFlags,r=pr(n,s,this.getFiberRefs());return e.setFiberRefs(r),o8(E(r6(i,e.getFiberRef(d8)),rH(1),rH(16)))})}get poll(){return o0(()=>tA(this._exitValue))}unsafePoll(){return this._exitValue}interruptAsFork(e){return o0(()=>this.tell(m2(am(e))))}unsafeInterruptAsFork(e){this.tell(m2(am(e)))}addObserver(e){null!==this._exitValue?e(this._exitValue):this._observers.push(e)}removeObserver(e){this._observers=this._observers.filter(t=>t!==e)}getFiberRefs(){return this.setFiberRef(d8,this._runtimeFlags),this._fiberRefs}unsafeDeleteFiberRef(e){this._fiberRefs=pl(this._fiberRefs,e)}getFiberRef(e){return this._fiberRefs.locals.has(e)?this._fiberRefs.locals.get(e)[0][1]:e.initial}setFiberRef(e,t){this._fiberRefs=pp(this._fiberRefs,{fiberId:this._fiberId,fiberRef:e,value:t}),this.refreshRefCache()}refreshRefCache(){this._tracer=to(this.getFiberRef(u1),a3),this._supervisor=this.getFiberRef(d7),this._scheduler=this.getFiberRef(p2)}setFiberRefs(e){this._fiberRefs=e,this.refreshRefCache()}addChild(e){this.getChildren().add(e)}removeChild(e){this.getChildren().delete(e)}drainQueueOnCurrentThread(){let e=!0;for(;e;){let t=dg,s=globalThis[ho];globalThis[ho]=this;try{for(;t===dg;)t=0===this._queue.length?"Done":this.evaluateMessageWhileSuspended(this._queue.splice(0,1)[0])}finally{this._running=!1,globalThis[ho]=s}this._queue.length>0&&!this._running?(this._running=!0,t===db?(this.drainQueueLaterOnExecutor(),e=!1):e=!0):e=!1}}drainQueueLaterOnExecutor(){this._scheduler.scheduleTask(this.run,this.getFiberRef(lN))}drainQueueWhileRunning(e,t){let s=t;for(;this._queue.length>0;){let t=this._queue.splice(0,1)[0];s=dS[t._tag](this,e,s,t)}return s}isInterrupted(){return!ab(this.getFiberRef(lz))}addInterruptedCause(e){let t=this.getFiberRef(lz);this.setFiberRef(lz,af(t,e))}processNewInterruptSignal(e){this.addInterruptedCause(e),this.sendInterruptSignalToAllChildren()}sendInterruptSignalToAllChildren(){if(null===this._children||0===this._children.size)return!1;let e=!1;for(let t of this._children)t.tell(m2(am(this.id()))),e=!0;return e}interruptAllChildren(){if(this.sendInterruptSignalToAllChildren()){let e=this._children.values();this._children=null;let t=!1;return o9({while:()=>!t,body:()=>{let s=e.next();return s.done?o0(()=>{t=!0}):om(s.value.await)},step:()=>{}})}return null}reportExitValue(e){if(r5(this._runtimeFlags)){let t=this.getFiberRef(l$),s=this.id().startTimeMillis,n=Date.now();switch(dd.unsafeUpdate(n-s,t),dm.unsafeUpdate(-1,t),e._tag){case eC:dh.unsafeUpdate(1,t);break;case eF:df.unsafeUpdate(1,t)}}if("Failure"===e._tag){let t=this.getFiberRef(lP);ay(e.cause)||"Some"!==t._tag||this.log("Fiber terminated with an unhandled error",e.cause,t)}}setExitValue(e){this._exitValue=e,this.reportExitValue(e);for(let t=this._observers.length-1;t>=0;t--)this._observers[t](e)}getLoggers(){return this.getFiberRef(dN)}log(e,t,s){let n=e3(s)?s.value:this.getFiberRef(lj);if(pD(this.getFiberRef(dE),n))return;let i=this.getFiberRef(lM),r=this.getFiberRef(lA),a=this.getLoggers(),o=this.getFiberRefs();if(nW(a)>0){let s=new Date(to(this.getFiberRef(u1),ua).unsafeCurrentTimeMillis());for(let l of a)l.log({fiberId:this.id(),logLevel:n,message:e,cause:t,context:o,spans:i,annotations:r,date:s})}}evaluateMessageWhileSuspended(e){switch(e._tag){case m1:return db;case mX:return this.processNewInterruptSignal(e.cause),null!==this._asyncInterruptor&&(this._asyncInterruptor(cr(e.cause)),this._asyncInterruptor=null),dg;case m0:return this._asyncInterruptor=null,this._asyncBlockingOn=null,this.evaluateEffect(e.effect),dg;case mZ:return e.onFiber(this,null!==this._exitValue?pF:pM(this._runtimeFlags,this._asyncBlockingOn)),dg;default:return dy(e)}}evaluateEffect(e){this._supervisor.onResume(this);try{let t=rZ(this._runtimeFlags)&&this.isInterrupted()?cr(this.getInterruptedCause()):e;for(;null!==t;){let e=t,s=this.runLoop(e);if(s===dv){let e=d_.currentOp;d_.currentOp=null,e._op===eD?rQ(this._runtimeFlags)?(this.tell(m4()),this.tell(m5(cm)),t=null):t=cm:e._op===eI&&(t=null)}else{this._runtimeFlags=E(this._runtimeFlags,rX(16));let e=this.interruptAllChildren();null!==e?t=oF(e,()=>s):(0===this._queue.length?this.setExitValue(s):this.tell(m5(s)),t=null)}}}finally{this._supervisor.onSuspend(this)}}start(e){if(this._running)this.tell(m5(e));else{this._running=!0;let t=globalThis[ho];globalThis[ho]=this;try{this.evaluateEffect(e)}finally{this._running=!1,globalThis[ho]=t,this._queue.length>0&&this.drainQueueLaterOnExecutor()}}}startFork(e){this.tell(m5(e))}patchRuntimeFlags(e,t){let s=r8(e,t);return globalThis[ho]=this,this._runtimeFlags=s,s}initiateAsync(e,t){let s=!1,n=e=>{s||(s=!0,this.tell(m5(e)))};rZ(e)&&(this._asyncInterruptor=n);try{t(n)}catch(e){n(oT(ap(e)))}}pushStack(e){this._stack.push(e),"OnStep"===e._op&&this._steps.push({refs:this.getFiberRefs(),flags:this._runtimeFlags})}popStack(){let e=this._stack.pop();if(e)return"OnStep"===e._op&&this._steps.pop(),e}getNextSuccessCont(){let e=this.popStack();for(;e;){if(e._op!==eA)return e;e=this.popStack()}}getNextFailCont(){let e=this.popStack();for(;e;){if(e._op!==ej&&e._op!==eP)return e;e=this.popStack()}}Tag(e){return oq(lf(lI),t=>to(t,e))}Left(e){return oO(e.left)}None(e){return oO(new l4)}Right(e){return cp(e.right)}Some(e){return cp(e.value)}[eL](e){let t=ei(()=>e.effect_instruction_i0()),s=this.getNextSuccessCont();return void 0!==s?(s._op in dw||dy(s),dw[s._op](this,s,t)):(d_.currentOp=cp(t),dv)}[eC](e){let t=this.getNextSuccessCont();return void 0!==t?(t._op in dw||dy(t),dw[t._op](this,t,e.effect_instruction_i0)):(d_.currentOp=e,dv)}[eF](e){let t=e.effect_instruction_i0,s=this.getNextFailCont();if(void 0===s)return d_.currentOp=cr(t),dv;switch(s._op){case eA:case eM:if(!(rZ(this._runtimeFlags)&&this.isInterrupted()))return ei(()=>s.effect_instruction_i1(t));return cr(aT(t));case"OnStep":if(!(rZ(this._runtimeFlags)&&this.isInterrupted()))return cp(cr(t));return cr(aT(t));case ez:if(this.patchRuntimeFlags(this._runtimeFlags,s.patch),rZ(this._runtimeFlags)&&this.isInterrupted())return cr(af(t,this.getInterruptedCause()));return cr(t);default:dy(s)}}[e$](e){return ei(()=>e.effect_instruction_i0(this,pj(this._runtimeFlags)))}Blocked(e){let t=this.getFiberRefs(),s=this._runtimeFlags;if(this._steps.length>0){let n=[],i=this._steps[this._steps.length-1],r=this.popStack();for(;r&&"OnStep"!==r._op;)n.push(r),r=this.popStack();this.setFiberRefs(i.refs),this._runtimeFlags=i.flags;let a=py(i.refs,t),o=r6(i.flags,s);return cp(ot(e.effect_instruction_i0,oc(t=>{for(;n.length>0;)t.pushStack(n.pop());return t.setFiberRefs(p_(t.id(),t.getFiberRefs())(a)),t._runtimeFlags=r8(o)(t._runtimeFlags),e.effect_instruction_i1})))}return o4(t=>oF(dz(os(e.effect_instruction_i0)),()=>t(e.effect_instruction_i1)))}RunBlocked(e){return dk(e.effect_instruction_i0)}[eU](e){let t=e.effect_instruction_i0,s=this._runtimeFlags,n=r8(s,t);if(rZ(n)&&this.isInterrupted())return cr(this.getInterruptedCause());if(this.patchRuntimeFlags(this._runtimeFlags,t),!e.effect_instruction_i1)return cm;{let t=r6(n,s);return this.pushStack(new oi(t,e)),ei(()=>e.effect_instruction_i1(s))}}[ej](e){return this.pushStack(e),e.effect_instruction_i0}OnStep(e){return this.pushStack(e),e.effect_instruction_i0}[eA](e){return this.pushStack(e),e.effect_instruction_i0}[eM](e){return this.pushStack(e),e.effect_instruction_i0}[eI](e){return this._asyncBlockingOn=e.effect_instruction_i1,this.initiateAsync(this._runtimeFlags,e.effect_instruction_i0),d_.currentOp=e,dv}[eD](e){return this.isYielding=!1,d_.currentOp=e,dv}[eP](e){let t=e.effect_instruction_i0,s=e.effect_instruction_i1;return t()?(this.pushStack(e),s()):cm}[eN](e){return ei(()=>e.commit())}runLoop(e){let t=e;for(this.currentOpCount=0;;){if((2&this._runtimeFlags)!=0&&this._supervisor.onEffect(this,t),this._queue.length>0&&(t=this.drainQueueWhileRunning(this._runtimeFlags,t)),!this.isYielding){this.currentOpCount+=1;let e=this._scheduler.shouldYield(this);if(!1!==e){this.isYielding=!0,this.currentOpCount=0;let s=t;t=oF(lt({priority:e}),()=>s)}}try{if("_op"in t&&t._op in this||dy(t),(t=this._tracer.context(()=>T()!==t[eB]._V?ow(`Cannot execute an Effect versioned ${t[eB]._V} with a Runtime of version ${T()}`):this[t._op](t),this))===dv){let e=d_.currentOp;if(e._op===eD||e._op===eI)return dv;return d_.currentOp=null,e._op===eC||e._op===eF?e:cr(ap(e))}}catch(e){t=a9(e)?cr(e.cause):l3(e)?cr(af(ap(e),am(ip))):o_(e)}}}run=()=>{this.drainQueueOnCurrentThread()}}let dE=N("effect/FiberRef/currentMinimumLogLevel",()=>lk(pz("Info"))),dT=e=>hu(t=>{to(pu(t.context,u1),uG).unsafe.log(e.log(t))}),dR=N(Symbol.for("effect/Logger/defaultLogger"),()=>dT(hm)),dI=N(Symbol.for("effect/Logger/tracerLogger"),()=>hu(({annotations:e,cause:t,context:s,fiberId:n,logLevel:i,message:r})=>{let a=tU(pc(s,lI),tl(a5)),o=tL(pc(s,u1),e=>to(e,ua));if("None"===a._tag||"ExternalSpan"===a.value._tag||"None"===o._tag)return;let l=Object.fromEntries(nO(e,eE));l["effect.fiberId"]=ic(n),l["effect.logLevel"]=i.label,null!==t&&"Empty"!==t._tag&&(l["effect.cause"]=az(t)),a.value.event(String(r),o.value.unsafeCurrentTimeNanos(),l)})),dN=N(Symbol.for("effect/FiberRef/currentLoggers"),()=>lO(nH(dR,dI))),dF=v(e=>ol(e[0]),(e,t)=>o5(o1(e,e=>dA(s=>t(e,s))))),dA=e=>oc(t=>{let s=t.getFiberRefs(),n=t._runtimeFlags;return oF(dZ,t=>lW(t,t=>oc(i=>{let r=i.getFiberRefs(),a=i._runtimeFlags,o=py(r,s),l=r6(a,n),c=py(s,r);return i.setFiberRefs(p_(o,i.id(),s)),gs(le(e(t),l),o0(()=>{i.setFiberRefs(p_(c,i.id(),i.getFiberRefs()))}))})))}),dj=e=>{if(Array.isArray(e)||H(e))return[e,tT()];let t=Object.keys(e),s=t.length;return[t.map(t=>e[t]),e4(e=>{let n={};for(let i=0;i<s;i++)n[t[i]]=e[i];return n})]},dM=(e,t,s)=>{let n=[];for(let t of e)n.push(oS(t));return oF(dU(n,_,{concurrency:s?.concurrency,batching:s?.batching}),e=>{let n=tT(),i=e.length,r=Array(i),a=Array(i),o=!1;for(let t=0;t<i;t++){let s=e[t];"Left"===s._tag?(r[t]=e4(s.left),o=!0):(a[t]=s.right,r[t]=n)}return o?"Some"===t._tag?oO(t.value(r)):oO(r):s?.discard?o6:"Some"===t._tag?oX(t.value(a)):oX(a)})},dC=(e,t,s)=>{let n=[];for(let t of e)n.push(oS(t));return s?.discard?dU(n,_,{concurrency:s?.concurrency,batching:s?.batching,discard:!0}):oq(dU(n,_,{concurrency:s?.concurrency,batching:s?.batching}),e=>"Some"===t._tag?t.value(e):e)},dL=(e,t)=>{let[s,n]=dj(e);return t?.mode==="validate"?dM(s,n,t):t?.mode==="either"?dC(s,n,t):t?.discard!==!0&&"Some"===n._tag?oq(dU(s,_,t),n.value):dU(s,_,t)},dU=((e,t)=>Array.from({length:t},()=>e),v(e=>H(e[0]),(e,t,s)=>oc(n=>{let i=s?.batching===!0||s?.batching==="inherit"&&n.getFiberRef(lU);return s?.discard?mb(s.concurrency,()=>dH(u8)(s=>i?d$(e,(e,n)=>s(t(e,n)),!0,!1,1):o$(e,(e,n)=>s(t(e,n)))),()=>dH(pe)(s=>d$(e,(e,n)=>s(t(e,n)),i,!1)),s=>dH(pt(s))(n=>d$(e,(e,s)=>n(t(e,s)),i,!1,s))):mb(s?.concurrency,()=>dH(u8)(s=>i?dD(e,1,(e,n)=>s(t(e,n)),!0):oP(e,(e,n)=>s(t(e,n)))),()=>dH(pe)(s=>dP(e,(e,n)=>s(t(e,n)),i)),s=>dH(pt(s))(n=>dD(e,s,(e,s)=>n(t(e,s)),i)))}))),dP=(e,t,s)=>oZ(()=>{let n=tW(e),i=Array(n.length);return li(d$(n,(e,s)=>oF(t(e,s),e=>o0(()=>i[s]=e)),s,!1),oX(i))}),d$=(e,t,s,n,i)=>o4(r=>o2(a=>oc(o=>{let l=Array.from(e).reverse(),c=l.length;if(0===c)return o6;let u=0,p=!1,m=i?Math.min(l.length,i):l.length,h=new Set,f=[],d=()=>h.forEach(e=>{e._scheduler.scheduleTask(()=>{e.unsafeInterruptAsFork(o.id())},0)}),g=[],b=[],x=[],y=()=>{let e=f.filter(({exit:e})=>"Failure"===e._tag).sort((e,t)=>e.index<t.index?-1:e.index===t.index?0:1).map(({exit:e})=>e);return 0===e.length&&e.push(cm),e},v=(e,t=!1)=>{let s=o5(a(e)),n=dq(s,o,o._runtimeFlags,he);return o._scheduler.scheduleTask(()=>{t&&n.unsafeInterruptAsFork(o.id()),n.resume(s)},0),n},_=()=>{n||(c-=l.length,l=[]),p=!0,d()},w=s?oj:ok,S=v(of(e=>{let n=(e,t)=>{"Blocked"===e._op?x.push(e):(f.push({index:t,exit:e}),"Failure"!==e._op||p||_())},a=()=>{if(l.length>0){let m=l.pop(),d=u++,_=()=>{let e=l.pop();return d=u++,oF(lt(),()=>oF(w(r(t(e,d))),S))},S=e=>l.length>0&&(n(e,d),l.length>0)?_():oX(e),k=v(oF(w(r(t(m,d))),S));g.push(k),h.add(k),p&&k._scheduler.scheduleTask(()=>{k.unsafeInterruptAsFork(o.id())},0),k.addObserver(t=>{let r;r="Failure"===t._op?t:t.effect_instruction_i0,b.push(k),h.delete(k),n(r,d),f.length===c?e(oX(tI(cn(y(),{parallel:!0}),()=>cm))):x.length+f.length===c?e(oX(ot(x.map(e=>e.effect_instruction_i0).reduce(p3),d$([tI(cn(y(),{parallel:!0}),()=>cm),...x.map(e=>e.effect_instruction_i1)],e=>e,s,!0,i)))):a()})}};for(let e=0;e<m;e++)a()}));return om(oV(oM(r(hr(S))),cc({onFailure:()=>{_();let e=x.length+1,t=Math.min("number"==typeof i?i:x.length,x.length),s=Array.from(x);return of(n=>{let i=[],r=0,a=0,o=(t,a)=>o=>{i[t]=o,++r===e&&n(tC(cn(i,{parallel:!0}))),s.length>0&&a&&l()},l=()=>{v(s.pop(),!0).addObserver(o(a,!0)),a++};S.addObserver(o(a,!1)),a++;for(let e=0;e<t;e++)l()})},onSuccess:()=>oP(b,e=>e.inheritAll)})))}))),dD=(e,t,s,n)=>oZ(()=>{let i=tW(e),r=Array(i.length);return li(d$(i,(e,t)=>oq(s(e,t),e=>r[t]=e),n,!1,t),oX(r))}),dz=e=>dJ(e,he),dB=(e,t,s,n=null)=>{let i=dK(e,t,s,n);return i.resume(e),i},dq=(e,t,s,n=null)=>dK(e,t,s,n),dK=(e,t,s,n=null)=>{let i=id(),r=pa(t.getFiberRefs(),i),a=new dO(i,r,s),o=pu(r,lI),l=a._supervisor;return l.onStart(o,e,e4(t),a),a.addObserver(e=>l.onEnd(e,a)),(null!==n?n:E(t.getFiberRef(lD),tI(()=>t.scope()))).add(s,a),a},dJ=(e,t)=>oc((s,n)=>oX(dB(e,s,n.runtimeFlags,t))),dV=(e=>L(e[2]),e=>cT(t=>tR(tl(t,dX),{onNone:()=>e,onSome:t=>{switch(t.strategy._tag){case"Parallel":return e;case"Sequential":case"ParallelN":return oF(lQ(t,pe),t=>d5(e,t))}}}))),dG=e=>t=>cT(s=>tR(tl(s,dX),{onNone:()=>t,onSome:s=>"ParallelN"===s.strategy._tag&&s.strategy.parallelism===e?t:oF(lQ(s,pt(e)),e=>d5(t,e))})),dH=e=>t=>cT(s=>tR(tl(s,dX),{onNone:()=>t(_),onSome:s=>{let n="Parallel"===e._tag?dV:"Sequential"===e._tag?dY:dG(e.parallelism);switch(s.strategy._tag){case"Parallel":return n(t(dV));case"Sequential":return n(t(dY));case"ParallelN":return n(t(dG(s.strategy.parallelism)))}}})),dW=e=>oF(dX,e),dY=e=>cT(t=>tR(tl(t,dX),{onNone:()=>e,onSome:t=>{switch(t.strategy._tag){case"Sequential":return e;case"Parallel":case"ParallelN":return oF(lQ(t,u8),t=>d5(e,t))}}})),dQ=(e=>ol(e[1]),v(e=>ol(e[1]),(e,t,s,n)=>oq(dL([e,t],{concurrency:n?.concurrent?2:1,batching:n?.batching}),([e,t])=>s(e,t)))),dX=tu("effect/Scope"),dZ=dX,d0=(e,t)=>{"Open"===e.state._tag&&e.state.finalizers.add(t)},d1={[lV]:lV,[lG]:lG,pipe(){return eR(this,arguments)},fork(e){return o0(()=>{let t=d2(e);if("Closed"===this.state._tag)return t.state=this.state,t;let s=e=>t.close(e);return this.state.finalizers.add(s),d0(t,e=>o0(()=>{"Open"===this.state._tag&&this.state.finalizers.delete(s)})),t})},close(e){return oZ(()=>{if("Closed"===this.state._tag)return o6;let t=Array.from(this.state.finalizers.values()).reverse();return(this.state={_tag:"Closed",exit:e},0===t.length)?o6:u7(this.strategy)?E(oP(t,t=>ok(t(e))),oF(e=>E(cn(e),tL(cs),tI(()=>cm)))):u9(this.strategy)?E(dP(t,t=>ok(t(e)),!1),oF(e=>E(cn(e,{parallel:!0}),tL(cs),tI(()=>cm)))):E(dD(t,this.strategy.parallelism,t=>ok(t(e)),!1),oF(e=>E(cn(e,{parallel:!0}),tL(cs),tI(()=>cm))))})},addFinalizer(e){return oZ(()=>"Closed"===this.state._tag?e(this.state.exit):(this.state.finalizers.add(e),o6))}},d2=(e=u8)=>{let t=Object.create(d1);return t.strategy=e,t.state={_tag:"Open",finalizers:new Set},t},d3=(e=u8)=>o0(()=>d2(e)),d5=v(2,(e,t)=>cN(e,tc(tr(dX,t)))),d4=v(2,(e,t)=>om(dF(oF(lf(e),s=>op(lg(e,t),s)),t=>lg(e,t)))),d6=v(2,(e,t)=>ld(e,s=>d4(e,t(s)))),d8=lR(r3,{differ:r7,fork:r7.empty}),d7=lR(f9,{differ:du,fork:di}),d9=v(3,(e,t,s)=>ge(e,t,{onSelfWin:(e,t)=>oF(e.await,n=>{switch(n._tag){case eC:return oF(e.inheritAll,()=>s.onSelfDone(n,t));case eF:return s.onSelfDone(n,t)}}),onOtherWin:(e,t)=>oF(e.await,n=>{switch(n._tag){case eC:return oF(e.inheritAll,()=>s.onOtherDone(n,t));case eF:return s.onOtherDone(n,t)}})})),ge=((e,t)=>oN(s=>d9(e,t,{onSelfDone:(e,t)=>cu(e,{onFailure:e=>E(hr(t),mP(t=>ah(e,t))),onSuccess:e=>E(t,lo(s),op(e))}),onOtherDone:(e,t)=>cu(e,{onFailure:e=>E(hr(t),mP(t=>ah(t,e))),onSuccess:e=>E(t,lo(s),op(e))})})),v(3,(e,t,s)=>oc((n,i)=>{let r=i.runtimeFlags,a=nX(!0),o=dK(e,n,r,s.selfScope),l=dK(t,n,r,s.otherScope);return of(n=>{o.addObserver(()=>gt(o,l,s.onSelfWin,a,n)),l.addObserver(()=>gt(l,o,s.onOtherWin,a,n)),o.startFork(e),l.startFork(t)},ir(o.id(),l.id()))}))),gt=(e,t,s,n,i)=>{nZ(!0,!1)(n)&&i(s(e,t))},gs=v(2,(e,t)=>o4(s=>oL(s(e),{onFailure:e=>oL(t,{onFailure:t=>oT(af(e,t)),onSuccess:()=>oT(e)}),onSuccess:e=>op(t,e)}))),gn=(e,t,s)=>oN(n=>oF(oF(dz(oz(e)),e=>of(n=>{let i=t.map(e=>e.listeners.count),r=()=>{i.every(e=>0===e)&&t.every(e=>"Pending"===e.result.state.current._tag||!!("Done"===e.result.state.current._tag&&l7(e.result.state.current.effect)&&"Failure"===e.result.state.current.effect._tag&&ax(e.result.state.current.effect.cause)))&&(a.forEach(e=>e()),s?.(),n(la(e)))};e.addObserver(e=>{a.forEach(e=>e()),n(e)});let a=t.map((e,t)=>{let s=e=>{i[t]=e,r()};return e.listeners.addObserver(s),()=>e.listeners.removeObserver(s)});return r(),o0(()=>{a.forEach(e=>e())})})),()=>oZ(()=>o$(t.flatMap(e=>e.state.completed?[]:[e]),e=>fX(e.request,co(n))))));class gi{s;stripped;index;length;constructor(e,t=!1){this.s=e,this.stripped=t,this.index=0,this.length=e.length}next(){if(this.done)return{done:!0,value:void 0};let e=this.index;for(;!this.done&&!gr(this.s[this.index]);)this.index=this.index+1;let t=this.index;if(!this.done){let e=this.s[this.index];this.index=this.index+1,!this.done&&ga(e,this.s[this.index])&&(this.index=this.index+1),this.stripped||(t=this.index)}return{done:!1,value:this.s.substring(e,t)}}[Symbol.iterator](){return new gi(this.s,this.stripped)}get done(){return this.index>=this.length}}let gr=e=>{let t=e.charCodeAt(0);return 13===t||10===t},ga=(e,t)=>13===e.charCodeAt(0)&&10===t.charCodeAt(0),go=((e,t)=>gl(e.minutes,t.minutes)&&gl(e.hours,t.hours)&&gl(e.days,t.days)&&gl(e.months,t.months)&&gl(e.weekdays,t.weekdays),tg((e,t)=>e===t)),gl=(e,t)=>go(tW(e),tW(t)),gc=Symbol.for("effect/ScheduleInterval"),gu={[gc]:gc,startMillis:0,endMillis:0},gp=(e,t)=>e>t?gu:{[gc]:gc,startMillis:e,endMillis:t},gm=v(2,(e,t)=>gh(e,t)===e),gh=v(2,(e,t)=>e.endMillis<=t.startMillis?e:t.endMillis<=e.startMillis?t:e.startMillis<t.startMillis?e:t.startMillis<e.startMillis?t:e.endMillis<=t.endMillis?e:t),gf=v(2,(e,t)=>gp(Math.max(e.startMillis,t.startMillis),Math.min(e.endMillis,t.endMillis))),gd=e=>e.startMillis>=e.endMillis,gg=e=>cQ(e.endMillis-e.startMillis),gb=e=>gp(e,Number.POSITIVE_INFINITY),gx=Symbol.for("effect/ScheduleIntervals"),gy=e=>({[gx]:gx,intervals:e}),gv=v(2,(e,t)=>sH(t.intervals)?sH(e.intervals)?sY(e.intervals).startMillis<sY(t.intervals).startMillis?g_(sQ(e.intervals),t.intervals,sY(e.intervals),sA()):g_(e.intervals,sQ(t.intervals),sY(t.intervals),sA()):t:e),g_=(e,t,s,n)=>{let i=e,r=t,a=s,o=n;for(;sH(i)||sH(r);)if(!sH(i)&&sH(r))a.endMillis<sY(r).startMillis?(o=E(o,sK(a)),a=sY(r)):a=gp(a.startMillis,sY(r).endMillis),r=sQ(r),i=sA();else if(sH(i)&&sG(r))a.endMillis<sY(i).startMillis?(o=E(o,sK(a)),a=sY(i)):a=gp(a.startMillis,sY(i).endMillis),r=sA(),i=sQ(i);else if(sH(i)&&sH(r))sY(i).startMillis<sY(r).startMillis?(a.endMillis<sY(i).startMillis?(o=E(o,sK(a)),a=sY(i)):a=gp(a.startMillis,sY(i).endMillis),i=sQ(i)):(a.endMillis<sY(r).startMillis?(o=E(o,sK(a)),a=sY(r)):a=gp(a.startMillis,sY(r).endMillis),r=sQ(r));else throw Error(Q("Intervals.unionLoop"));return gy(E(o,sK(a),sP))},gw=v(2,(e,t)=>gS(e.intervals,t.intervals,sA())),gS=(e,t,s)=>{let n=e,i=t,r=s;for(;sH(n)&&sH(i);){let e=E(sY(n),gf(sY(i))),t=gd(e)?r:E(r,sK(e));E(sY(n),gm(sY(i)))?n=sQ(n):i=sQ(i),r=t}return gy(sP(r))},gk=e=>E(e.intervals,sW,tI(()=>gu)).startMillis,gO=v(2,(e,t)=>gk(e)<gk(t)),gE=v(2,(e,t)=>gO(e,t)?t:e),gT=e=>E(e.intervals,sW,tI(()=>gu)).endMillis,gR=e=>sH(e.intervals),gI="Continue",gN="Done",gF=e=>({_tag:gI,intervals:e}),gA=e=>({_tag:gI,intervals:gy(sM(e))}),gj={_tag:gN},gM=e=>e._tag===gI,gC=e=>e._tag===gN,gL=Symbol.for("effect/Schedule"),gU=e=>q(e,gL),gP=Symbol.for("effect/ScheduleDriver"),g$={_Out:e=>e,_In:e=>e,_R:e=>e},gD={_Out:e=>e,_In:e=>e,_R:e=>e};class gz{initial;step;[gL]=g$;constructor(e,t){this.initial=e,this.step=t}pipe(){return eR(this,arguments)}}class gB{schedule;ref;[gP]=gD;constructor(e,t){this.schedule=e,this.ref=t}get state(){return oq(pH(this.ref),e=>e[1])}get last(){return oF(pH(this.ref),([e,t])=>{switch(e._tag){case"None":return oE(()=>new l4);case"Some":return oX(e.value)}})}get reset(){return pW(this.ref,[tT(),this.schedule.initial])}next(e){return E(oq(pH(this.ref),e=>e[1]),oF(t=>E(u3,oF(s=>E(oZ(()=>this.schedule.step(s,e,t)),oF(([e,t,n])=>{let i=pW(this.ref,[e4(t),e]);if(gC(n))return li(i,oO(tT()));let r=gk(n.intervals)-s;return r<=0?op(i,t):E(i,li(my(cQ(r))),op(t))}))))))}}let gq=(e,t)=>new gz(e,t),gK=v(2,(e,t)=>gJ(e,e=>o0(()=>t(e)))),gJ=v(2,(e,t)=>g5(e,(e,s)=>oq(t(e),e=>ue(s,cB(e))))),gV=v(2,(e,t)=>gq([e.initial,t.initial,!0],(s,n,i)=>i[2]?oF(e.step(s,n,i[0]),([e,r,a])=>gC(a)?oq(t.step(s,n,i[1]),([t,s,n])=>[[e,t,!1],tE(s),n]):oX([[e,i[1],!0],tO(r),a])):oq(t.step(s,n,i[1]),([e,t,s])=>[[i[0],e,!1],tE(t),s]))),gG=v(2,(e,t)=>gH(e,(e,s)=>o0(()=>t(e,s)))),gH=v(2,(e,t)=>gq(e.initial,(s,n,i)=>oF(e.step(s,n,i),([e,s,i])=>gC(i)?oX([e,s,gj]):oq(t(n,s),t=>t?[e,s,i]:[e,s,gj])))),gW=v(2,(e,t)=>gq([e.initial,t.initial],(s,n,i)=>oF(e.step(s,n,i[0]),([e,n,r])=>oq(t.step(s,n,i[1]),([t,s,n])=>gC(r)?[[e,t],s,gj]:gC(n)?[[e,t],s,gj]:[[e,t],s,gF(E(r.intervals,gE(n.intervals)))])))),gY=((e,t)=>gY(e,e=>o0(()=>t(e))),v(2,(e,t)=>gq(e.initial,(s,n,i)=>oF(t(n),t=>e.step(s,t,i))))),gQ=((e,t)=>g5(e,(e,s)=>t(s)),e=>gK(e,e=>e)),gX=e=>E(pG([tT(),e.initial]),oq(t=>new gB(e,t))),gZ=v(2,(e,t)=>g0(e,t,gw)),g0=v(3,(e,t,s)=>gq([e.initial,t.initial],(n,i,r)=>E(lr(e.step(n,i,r[0]),t.step(n,i,r[1]),(e,t)=>[e,t]),oF(([[n,r,a],[o,l,c]])=>gM(a)&&gM(c)?g1(e,t,i,n,r,a.intervals,o,l,c.intervals,s):oX([[n,o],[r,l],gj]))))),g1=(e,t,s,n,i,r,a,o,l,c)=>{let u=c(r,l);return gR(u)?oX([[n,a],[i,o],gF(u)]):E(r,gO(l))?oF(e.step(gT(r),s,n),([n,i,r])=>gC(r)?oX([[n,a],[i,o],gj]):g1(e,t,s,n,i,r.intervals,a,o,l,c)):oF(t.step(gT(l),s,a),([a,o,l])=>gC(l)?oX([[n,a],[i,o],gj]):g1(e,t,s,n,i,r,a,o,l.intervals,c))},g2=v(2,(e,t)=>g3(e,e=>o0(()=>t(e)))),g3=v(2,(e,t)=>gq(e.initial,(s,n,i)=>oF(e.step(s,n,i),([e,s,n])=>oq(t(s),t=>[e,t,n])))),g5=v(2,(e,t)=>gq(e.initial,(s,n,i)=>oF(e.step(s,n,i),([e,n,i])=>{if(gC(i))return oX([e,n,i]);let r=i.intervals;return oq(t(n,gg(gp(s,gk(r)))),t=>{let i=cB(t),a=gk(r),o=s+c3(i),l=o-a;return[e,n,gA(gp(o,Math.max(0,gT(r)+l)))]})}))),g4=e=>g9(bf,t=>t<e),g6=((e,t,s)=>gq([e.initial,t],(t,n,[i,r])=>oF(e.step(t,n,i),([e,t,n])=>gC(n)?oX([[e,r],r,n]):oq(s(r,t),t=>[[e,t],r,n]))),v(3,(e,t,s)=>gq([e.initial,t.initial],(n,i,r)=>lr(e.step(n,i,r[0]),t.step(n,i,r[1]),([e,t,n],[i,r,a])=>{if(gC(n)&&gC(a))return[[e,i],[t,r],gj];if(gC(n)&&gM(a))return[[e,i],[t,r],gF(a.intervals)];if(gM(n)&&gC(a))return[[e,i],[t,r],gF(n.intervals)];if(gM(n)&&gM(a))return[[e,i],[t,r],gF(s(n.intervals,a.intervals))];throw Error("BUG: Schedule.unionWith - please report an issue at https://github.com/Effect-TS/effect/issues")})))),g8=v(2,(e,t)=>gH(e,(e,s)=>m$(t(e)))),g7=v(2,(e,t)=>gH(e,(e,s)=>t(e))),g9=v(2,(e,t)=>gG(e,(e,s)=>t(s))),be=((e,t)=>g2(gZ(e,t),e=>e[0]),Symbol.for("effect/Schedule/ScheduleDefect"));class bt{error;[be];constructor(e){this.error=e,this[be]=be}}let bs=e=>q(e,be),bn=e=>og(e,e=>o_(new bt(e))),bi=e=>od(e,e=>tR(aj(e,e=>ag(e)&&bs(e.defect)?e4(e.defect):tT()),{onNone:()=>oT(e),onSome:e=>oO(e.error)})),br=((e,t)=>br(e,t,(e,t)=>oO(e)),v(3,(e,t,s)=>oF(gX(t),t=>oU(e,{onFailure:e=>s(e,tT()),onSuccess:n=>ba(e,t,s,n)})))),ba=(e,t,s,n)=>oU(t.next(n),{onFailure:()=>oW(t.last),onSuccess:n=>oU(e,{onFailure:e=>s(e,e4(n)),onSuccess:n=>ba(e,t,s,n)})}),bo=v(2,(e,t)=>bc(e,t,(e,t)=>oO(e))),bl=v(2,(e,t)=>{if(gU(t))return bo(e,t);let s=t.schedule??bf,n=t.while?g7(s,e=>{let s=t.while(e);return"boolean"==typeof s?oX(s):bn(s)}):s,i=t.until?g8(n,e=>{let s=t.until(e);return"boolean"==typeof s?oX(s):bn(s)}):n;return bi(bo(e,t.times?gZ(i,g4(t.times)):i))}),bc=v(3,(e,t,s)=>oF(gX(t),t=>bu(e,t,s))),bu=(e,t,s)=>og(e,n=>oU(t.next(n),{onFailure:()=>E(t.last,oW,oF(e=>s(n,e))),onSuccess:()=>bu(e,t,s)})),bp=((e,t)=>bp(e,void 0,t),v(3,(e,t,s)=>oF(gX(s),s=>bm(e,t,s)))),bm=(e,t,s)=>oU(s.next(t),{onFailure:()=>oW(s.last),onSuccess:()=>oF(e,t=>bm(e,t,s))}),bh=gq(tT(),(e,t,s)=>{switch(s._tag){case"None":return oX([e4(e),cH,gA(gb(e))]);case"Some":return oX([e4(s.value),cQ(e-s.value),gA(gb(e))])}}),bf=(l=e=>e+1,gq(0,(e,t,s)=>o0(()=>[l(s),s,gA(gb(e))])));class bd{permits;waiters=new Set;taken=0;constructor(e){this.permits=e}get free(){return this.permits-this.taken}take=e=>of(t=>{if(this.free<e){let s=()=>{this.free<e||(this.waiters.delete(s),this.taken+=e,t(oX(e)))};return this.waiters.add(s),o0(()=>{this.waiters.delete(s)})}return this.taken+=e,t(oX(e))});updateTaken=e=>oc(t=>(this.taken=e(this.taken),this.waiters.size>0&&t.getFiberRef(p2).scheduleTask(()=>{let e=this.waiters.values(),t=e.next();for(;!1===t.done&&this.free>0;)t.value(),t=e.next()},t.getFiberRef(lN)),oX(this.free)));release=e=>this.updateTaken(t=>t-e);releaseAll=this.updateTaken(e=>0);withPermits=e=>t=>o4(s=>oF(s(this.take(e)),e=>gs(s(t),this.release(e))))}let bg=e=>new bd(e),bb=((e,t)=>{let s=cB(t);return oF(cE(),t=>oq(bO(tT()),n=>[cR(bx(e,s,n),t),by(n)]))},(e,t,s)=>{let n=c3(cB(t));return E(cg(),o1(t=>oB(e,t)),oq(e=>e4([s+n,e])))}),bx=(e,t,s)=>o4(n=>E(u2(e=>e.currentTimeMillis),oF(n=>bT(s,s=>{switch(s._tag){case"None":return e4(bb(e,t,n));case"Some":{let[i]=s.value;return i-n<=0?e4(bb(e,t,n)):tT()}}})),oF(e=>e2(e)?ow("BUG: Effect.cachedInvalidate - please report an issue at https://github.com/Effect-TS/effect/issues"):n(cx(e.value[1]))))),by=e=>pW(e,tT()),bv=((e,t)=>oF(f8,s=>E(bv(e,s),gs(oF(s.value,t)))),v(2,(e,t)=>lS(d7,e=>e.zip(t))(e))),b_=((e,{duration:t,onTimeout:s})=>oM(b_(e,{onTimeout:()=>oE(s),onSuccess:oX,duration:t})),v(2,(e,{duration:t,onSuccess:s,onTimeout:n})=>oN(i=>ge(e,oz(my(t)),{onSelfWin:(e,t)=>oF(e.await,n=>"Success"===n._tag?oF(e.inheritAll,()=>op(lo(t,i),s(n.value))):oF(lo(t,i),()=>cr(n.cause))),onOtherWin:(e,t)=>oF(e.await,s=>"Success"===s._tag?oF(e.inheritAll,()=>op(lo(t,i),n())):oF(lo(t,i),()=>cr(s.cause))),otherScope:he})))),bw=Symbol.for("effect/Ref/SynchronizedRef"),bS={_A:e=>e};class bk{ref;withLock;[bw]=bS;[pq]=pK;[pB];constructor(e,t){this.ref=e,this.withLock=t,this[pB]=pB,this.get=pH(this.ref)}get;modify(e){return this.modifyEffect(t=>oX(e(t)))}modifyEffect(e){return this.withLock(E(oF(pH(this.ref),e),oF(([e,t])=>op(pW(this.ref,t),e))))}pipe(){return eR(this,arguments)}}let bO=e=>o0(()=>bE(e)),bE=e=>new bk(pV(e),bg(1).withPermits(1)),bT=v(2,(e,t)=>e.modifyEffect(e=>{let s=t(e);switch(s._tag){case"None":return oX([e,e]);case"Some":return oq(s.value,e=>[e,e])}})),bR=((e,t,s)=>({[ht]:hs,id:()=>E(e.id(),ia(t.id())),await:E(e.await,oM,dQ(oM(t.await),s,{concurrent:!0}),ok),children:e.children,inheritAll:li(t.inheritAll,e.inheritAll),poll:lr(e.poll,t.poll,(e,t)=>E(e,tU(e=>E(t,tL(t=>ch(e,t,{onSuccess:s,onFailure:ah})))))),interruptAsFork:s=>li(e.interruptAsFork(s),t.interruptAsFork(s)),pipe(){return eR(this,arguments)}}),e=>(t,s)=>{let n=id(),i=[[lI,[[n,e.context]]]];s?.scheduler&&i.push([p2,[[n,s.scheduler]]]);let r=ph(e.fiberRefs,{entries:i,forkAs:n});s?.updateRefs&&(r=s.updateRefs(r,n));let a=new dO(n,r,e.runtimeFlags),o=t;s?.scope&&(o=oF(lQ(s.scope,u8),e=>li(lH(e,oN(e=>ey(e,a.id())?o6:lo(a,e))),oV(t,t=>lY(e,t)))));let l=a._supervisor;return l!==f9&&(l.onStart(e.context,o,tT(),a),a.addObserver(e=>l.onEnd(e,a))),he.add(e.runtimeFlags,a),s?.immediate===!1?a.resume(o):a.start(o),a});class bI extends Error{fiber;_tag="AsyncFiberException";constructor(e){super(`Fiber #${e.id().id} cannot be resolved synchronously. This is caused by using runSync on an effect that performs async work`),this.fiber=e,this.name=this._tag,this.stack=this.message}}let bN=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=0;let s=new bI(e);return Error.stackTraceLimit=t,s},bF=Symbol.for("effect/Runtime/FiberFailure"),bA=Symbol.for("effect/Runtime/FiberFailure/Cause");class bj extends Error{[bF];[bA];constructor(e){super(),this[bF]=bF,this[bA]=e;let t=aH(e);if(t.length>0){let e=t[0];this.name=e.name,this.message=e.message,this.stack=e.stack}this.name=`(FiberFailure) ${this.name}`,(void 0===this.message||0===this.message.length)&&(this.message="An error has occurred")}toJSON(){return{_id:"FiberFailure",cause:this[bA].toJSON()}}toString(){return"(FiberFailure) "+(this.stack??this.message)}[eS](){return this.toString()}}let bM=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=0;let s=new bj(e);return Error.stackTraceLimit=t,s},bC=e=>{switch(e._op){case"Failure":case"Success":return e;case"Left":return ci(e.left);case"Right":return cp(e.right);case"Some":return cp(e.value);case"None":return ci(l4())}},bL=e=>t=>{let s=bC(t);if(s)return s;let n=new p1,i=bR(e)(t,{scheduler:n});n.flush();let r=i.unsafePoll();if(r)return r;throw bN(i)},bU=e=>(t,s)=>new Promise(n=>{let i=bC(t);i&&n(i);let r=bR(e)(t);r.addObserver(e=>{n(e)}),s?.signal!==void 0&&(s.signal.aborted?r.unsafeInterruptAsFork(r.id()):s.signal.addEventListener("abort",()=>{r.unsafeInterruptAsFork(r.id())},{once:!0}))});class bP{context;runtimeFlags;fiberRefs;constructor(e,t,s){this.context=e,this.runtimeFlags=t,this.fiberRefs=s}pipe(){return eR(this,arguments)}}let b$=r2(1,32,4),bD=new bP((c={context:tm(),runtimeFlags:b$,fiberRefs:new pn(new Map)}).context,c.runtimeFlags,c.fiberRefs),bz=(e,t)=>bU(bD)(e,t).then(e=>{switch(e._tag){case eC:return e.effect_instruction_i0;case eF:throw bM(e.effect_instruction_i0)}}),bB=e=>{let t=bL(bD)(e);if("Failure"!==t._tag)return t.effect_instruction_i0;throw bM(t.effect_instruction_i0)},bq=v(2,(e,t)=>e.modifyEffect(t)),bK=Symbol.for("effect/Layer"),bJ={[bK]:{_RIn:e=>e,_E:e=>e,_ROut:e=>e},pipe(){return eR(this,arguments)}},bV=Symbol.for("effect/Layer/MemoMap"),bG=e=>q(e,bK),bH=e=>"Fresh"===e._tag;class bW{ref;[bV];constructor(e){this.ref=e,this[bV]=bV}getOrElseMemoize(e,t){return E(bq(this.ref,s=>{let n=s.get(e);if(void 0!==n){let[e,i]=n;return oX([E(e,oF(([e,t])=>E(mD(e),op(t))),oV(cc({onFailure:()=>o6,onSuccess:()=>lW(t,i)}))),s])}return E(pG(0),oF(n=>E(cg(),oF(i=>E(pG(()=>o6),oq(r=>{let a=o4(a=>E(d3(),oF(o=>E(a(oF(bX(e,o,!0),e=>mI(e(this)))),ok,oF(a=>{switch(a._tag){case eF:return E(c_(i,a.effect_instruction_i0),li(lY(o,a)),li(oT(a.effect_instruction_i0)));case eC:return E(pW(r,e=>E(lY(o,e),o7(pY(n,e=>[1===e,e-1])),om)),li(pQ(n,e=>e+1)),li(lW(t,t=>E(o0(()=>s.delete(e)),li(pH(r)),oF(e=>e(t))))),li(cw(i,a.effect_instruction_i0)),op(a.effect_instruction_i0[1]))}}))))),o=[E(cx(i),oV(cu({onFailure:()=>o6,onSuccess:()=>pQ(n,e=>e+1)}))),e=>E(pH(r),oF(t=>t(e)))];return[a,bH(e)?s:s.set(e,o)]}))))))}),oM)}}let bY=oZ(()=>oq(bO(new Map),e=>new bW(e))),bQ=v(2,(e,t)=>oF(bY,s=>oF(bX(e,t),e=>e(s)))),bX=(e,t,s=!1)=>{switch(e._tag){case"Locally":return o0(()=>s=>e.f(s.getOrElseMemoize(e.self,t)));case"ExtendScope":return o0(()=>t=>dW(s=>t.getOrElseMemoize(e.layer,s)));case"Fold":return o0(()=>s=>E(s.getOrElseMemoize(e.layer,t),oL({onFailure:n=>s.getOrElseMemoize(e.failureK(n),t),onSuccess:n=>s.getOrElseMemoize(e.successK(n),t)})));case"Fresh":return o0(()=>s=>E(e.layer,bQ(t)));case"FromEffect":return s?o0(()=>t=>e.effect):o0(()=>s=>s.getOrElseMemoize(e,t));case"Provide":return o0(()=>s=>E(s.getOrElseMemoize(e.first,t),oF(n=>E(s.getOrElseMemoize(e.second,t),cR(n)))));case"Scoped":return s?o0(()=>s=>d5(e.effect,t)):o0(()=>s=>s.getOrElseMemoize(e,t));case"Suspend":return o0(()=>s=>s.getOrElseMemoize(e.evaluate(),t));case"ProvideMerge":return o0(()=>s=>E(s.getOrElseMemoize(e.first,t),lr(s.getOrElseMemoize(e.second,t),e.zipK)));case"ZipWith":return o0(()=>s=>E(s.getOrElseMemoize(e.first,t),dQ(s.getOrElseMemoize(e.second,t),e.zipK,{concurrent:!0})))}},bZ=e=>b0(au(e)),b0=e=>b3(oT(e)),b1=v(2,(e,t)=>b4(e,{onFailure:bZ,onSuccess:t})),b2=v(2,(e,t)=>{let s=tp(e),n=s?e:t;return b3(oq(s?t:e,e=>tr(n,e)))});function b3(e){let t=Object.create(bJ);return t._tag="FromEffect",t.effect=e,t}let b5=v(2,(e,{onFailure:t,onSuccess:s})=>{let n=Object.create(bJ);return n._tag="Fold",n.layer=e,n.failureK=t,n.successK=s,n}),b4=v(2,(e,{onFailure:t,onSuccess:s})=>b5(e,{onFailure:e=>{let s=ak(e);switch(s._tag){case"Left":return t(s.left);case"Right":return b0(s.right)}},onSuccess:s})),b6=v(2,(e,t)=>{let s=tp(e),n=s?e:t;return b7(oq(s?t:e,e=>tr(n,e)))}),b8=e=>b7(E(e,op(tm()))),b7=e=>{let t=Object.create(bJ);return t._tag="Scoped",t.effect=e,t},b9=v(2,(e,t)=>ou(d3(),s=>oF(bQ(t,s),t=>cI(e,t)),(e,t)=>lY(e,t))),xe=v(2,(e,t)=>{let s=py(bD.fiberRefs,t.fiberRefs),n=r6(bD.runtimeFlags,t.runtimeFlags);return o4(i=>oc(r=>{let a=r.getFiberRef(lI),o=r.getFiberRefs(),l=p_(r.id(),o)(s),c=r._runtimeFlags,u=r8(n)(c),p=py(l,o),m=r6(u,c);return r.setFiberRefs(l),r._runtimeFlags=u,gs(cI(i(e),tc(a,t.context)),oc(e=>(e.setFiberRefs(p_(e.id(),e.getFiberRefs())(p)),e._runtimeFlags=r8(m)(e._runtimeFlags),o6)))}))}),xt=v(2,(e,t)=>bG(t)?b9(e,t):tn(t)?cI(e,t):xe(e,t)),xs=Symbol.for("effect/MutableList"),xn={[xs]:xs,[Symbol.iterator](){let e=!1,t=this.head;return{next(){if(e)return this.return();if(null==t)return e=!0,this.return();let s=t.value;return t=t.next,{done:e,value:s}},return:t=>(e||(e=!0),{done:!0,value:t})}},toString(){return eO(this.toJSON())},toJSON(){return{_id:"MutableList",values:Array.from(this).map(ek)}},[eS](){return this.toJSON()},pipe(){return eR(this,arguments)}},xi=e=>({value:e,removed:!1,prev:void 0,next:void 0}),xr=()=>{let e=Object.create(xn);return e.head=void 0,e.tail=void 0,e._length=0,e},xa=e=>0===xo(e),xo=e=>e._length,xl=v(2,(e,t)=>{let s=xi(t);return void 0===e.head&&(e.head=s),void 0===e.tail||(e.tail.next=s,s.prev=e.tail),e.tail=s,e._length+=1,e}),xc=e=>{let t=e.head;if(void 0!==t)return xu(e,t),t.value},xu=(e,t)=>{!t.removed&&(t.removed=!0,void 0!==t.prev&&void 0!==t.next?(t.prev.next=t.next,t.next.prev=t.prev):void 0!==t.prev?(e.tail=t.prev,t.prev.next=void 0):void 0!==t.next?(e.head=t.next,t.next.prev=void 0):(e.tail=void 0,e.head=void 0),e._length>0&&(e._length-=1))},xp=Symbol.for("effect/MutableQueue"),xm=Symbol.for("effect/mutable/MutableQueue/Empty"),xh={[xp]:xp,[Symbol.iterator](){return Array.from(this.queue)[Symbol.iterator]()},toString(){return eO(this.toJSON())},toJSON(){return{_id:"MutableQueue",values:Array.from(this).map(ek)}},[eS](){return this.toJSON()},pipe(){return eR(this,arguments)}},xf=e=>{let t=Object.create(xh);return t.queue=xr(),t.capacity=e,t},xd=()=>xf(void 0),xg=v(2,(e,t)=>{let s=xo(e.queue);return(void 0===e.capacity||s!==e.capacity)&&(xl(t)(e.queue),!0)}),xb=v(2,(e,t)=>xa(e.queue)?t:xc(e.queue)),xx=(e,t,s,n)=>iD({_tag:"Complete",key:e,exit:t,entryStats:s,timeToLiveMillis:n}),xy=(e,t)=>iD({_tag:"Pending",key:e,deferred:t}),xv=(e,t)=>iD({_tag:"Refreshing",deferred:e,complete:t}),x_=Symbol.for("effect/Cache/MapKey");class xw{current;[x_]=x_;previous=void 0;next=void 0;constructor(e){this.current=e}[ea](){return E(eo(this.current),ec(eo(this.previous)),ec(eo(this.next)),eb(this))}[ex](e){return this===e||xk(e)&&ey(this.current,e.current)&&ey(this.previous,e.previous)&&ey(this.next,e.next)}}let xS=e=>new xw(e),xk=e=>q(e,x_);class xO{head=void 0;tail=void 0;add(e){if(e!==this.tail){if(void 0===this.tail)this.head=e,this.tail=e;else{let t=e.previous,s=e.next;void 0!==s&&(e.next=void 0,void 0!==t?(t.next=s,s.previous=t):(this.head=s,this.head.previous=void 0)),this.tail.next=e,e.previous=this.tail,this.tail=e}}}remove(){let e=this.head;if(void 0!==e){let t=e.next;void 0!==t?(e.next=void 0,this.head=t,this.head.previous=void 0):(this.head=void 0,this.tail=void 0)}return e}}let xE=()=>new xO,xT=(e,t,s,n,i,r)=>({map:e,keys:t,accesses:s,updating:n,hits:i,misses:r}),xR=()=>xT(hY(),xE(),xd(),nX(!1),0,0),xI=Symbol.for("effect/Cache"),xN={_Key:e=>e,_Error:e=>e,_Value:e=>e},xF=e=>e,xA=e=>({loadedMillis:e});class xj{capacity;context;fiberId;lookup;timeToLive;[xI]=xN;cacheState;constructor(e,t,s,n,i){this.capacity=e,this.context=t,this.fiberId=s,this.lookup=n,this.timeToLive=i,this.cacheState=xR()}get(e){return oq(this.getEither(e),sX)}get cacheStats(){return o0(()=>xF({hits:this.cacheState.hits,misses:this.cacheState.misses,size:h3(this.cacheState.map)}))}getOption(e){return oZ(()=>tR(hQ(this.cacheState.map,e),{onNone:()=>{let t=xS(e);return this.trackAccess(t),this.trackMiss(),oX(tT())},onSome:e=>this.resolveMapValue(e)}))}getOptionComplete(e){return oZ(()=>tR(hQ(this.cacheState.map,e),{onNone:()=>{let t=xS(e);return this.trackAccess(t),this.trackMiss(),oX(tT())},onSome:e=>this.resolveMapValue(e,!0)}))}contains(e){return o0(()=>hZ(this.cacheState.map,e))}entryStats(e){return o0(()=>{let t=hQ(this.cacheState.map,e);if(e3(t))switch(t.value._tag){case"Complete":return e4(xA(t.value.entryStats.loadedMillis));case"Pending":break;case"Refreshing":return e4(xA(t.value.complete.entryStats.loadedMillis))}return tT()})}getEither(e){return oZ(()=>{let t,s;let n=tj(hQ(this.cacheState.map,e));return(void 0===n&&(s=cd(this.fiberId),t=xS(e),hZ(this.cacheState.map,e)?n=tj(hQ(this.cacheState.map,e)):h0(this.cacheState.map,e,xy(t,s))),void 0===n)?(this.trackAccess(t),this.trackMiss(),oq(this.lookupValueOf(e,s),tE)):oF(this.resolveMapValue(n),tR({onNone:()=>this.getEither(e),onSome:e=>oX(tO(e))}))})}invalidate(e){return o0(()=>{h2(this.cacheState.map,e)})}invalidateWhen(e,t){return o0(()=>{let s=hQ(this.cacheState.map,e);e3(s)&&"Complete"===s.value._tag&&"Success"===s.value.exit._tag&&t(s.value.exit.value)&&h2(this.cacheState.map,e)})}get invalidateAll(){return o0(()=>{this.cacheState.map=hY()})}refresh(e){return u2(t=>oZ(()=>{let s=cd(this.fiberId),n=tj(hQ(this.cacheState.map,e));if(void 0===n&&(hZ(this.cacheState.map,e)?n=tj(hQ(this.cacheState.map,e)):h0(this.cacheState.map,e,xy(xS(e),s))),void 0===n)return om(this.lookupValueOf(e,s));switch(n._tag){case"Complete":if(this.hasExpired(t,n.timeToLiveMillis))return ey(tj(hQ(this.cacheState.map,e)),n)&&h2(this.cacheState.map,e),om(this.get(e));return E(this.lookupValueOf(e,s),mG(()=>{if(ey(tj(hQ(this.cacheState.map,e)),n)){let t=xv(s,n);return h0(this.cacheState.map,e,t),!0}return!1}),om);case"Pending":case"Refreshing":return cx(n.deferred)}}))}set(e,t){return u2(s=>o0(()=>{let n=s.unsafeCurrentTimeMillis(),i=cp(t),r=xx(xS(e),i,xA(n),n+c3(cB(this.timeToLive(i))));h0(this.cacheState.map,e,r)}))}get size(){return o0(()=>h3(this.cacheState.map))}get values(){return o0(()=>{let e=[];for(let t of this.cacheState.map)"Complete"===t[1]._tag&&"Success"===t[1].exit._tag&&e.push(t[1].exit.value);return e})}get entries(){return o0(()=>{let e=[];for(let t of this.cacheState.map)"Complete"===t[1]._tag&&"Success"===t[1].exit._tag&&e.push([t[0],t[1].exit.value]);return e})}get keys(){return o0(()=>{let e=[];for(let t of this.cacheState.map)"Complete"===t[1]._tag&&"Success"===t[1].exit._tag&&e.push(t[0]);return e})}resolveMapValue(e,t=!1){return u2(s=>{switch(e._tag){case"Complete":if(this.trackAccess(e.key),this.hasExpired(s,e.timeToLiveMillis))return h2(this.cacheState.map,e.key.current),oX(tT());return this.trackHit(),oq(e.exit,e4);case"Pending":if(this.trackAccess(e.key),this.trackHit(),t)return oX(tT());return oq(cx(e.deferred),e4);case"Refreshing":if(this.trackAccess(e.complete.key),this.trackHit(),this.hasExpired(s,e.complete.timeToLiveMillis)){if(t)return oX(tT());return oq(cx(e.deferred),e4)}return oq(e.complete.exit,e4)}})}trackHit(){this.cacheState.hits=this.cacheState.hits+1}trackMiss(){this.cacheState.misses=this.cacheState.misses+1}trackAccess(e){if(xg(this.cacheState.accesses,e),nZ(this.cacheState.updating,!1,!0)){let e=!0;for(;e;){let t=xb(this.cacheState.accesses,xm);t===xm?e=!1:this.cacheState.keys.add(t)}let t=h3(this.cacheState.map);for(e=t>this.capacity;e;){let s=this.cacheState.keys.remove();void 0!==s?hZ(this.cacheState.map,s.current)&&(h2(this.cacheState.map,s.current),t-=1,e=t>this.capacity):e=!1}n1(this.cacheState.updating,!1)}}hasExpired(e,t){return e.unsafeCurrentTimeMillis()>t}lookupValueOf(e,t){return u2(s=>oZ(()=>E(this.lookup(e),cR(this.context),ok,oF(n=>{let i=s.unsafeCurrentTimeMillis(),r=xA(i),a=xx(xS(e),n,r,i+c3(cB(this.timeToLive(n))));return h0(this.cacheState.map,e,a),li(cv(t,n),n)}),oG(()=>li(u5(t),o0(()=>{h2(this.cacheState.map,e)}))))))}}let xM=(e,t,s)=>new xj(e,tm(),it,t,e=>cB(s(e))),xC=(()=>lk(xM(65536,()=>oq(cg(),e=>({listeners:new fZ,handle:e})),()=>cX(60))),function(){let e;return e=1==arguments.length?arguments[0]:arguments[1].bind(arguments[0]),oZ(()=>{let t=e(E),s=ei(()=>t.next()),n=e=>e.done?oX(e.value):oF(function(e){if("object"==typeof e&&null!==e&&et in e)return e[et]();throw Error(Q("yieldWrapGet"))}(e.value),e=>n(ei(()=>t.next(e))));return n(s)})}),xL=function(){let e="string"!=typeof arguments[0],t=e?arguments[1]:arguments[0],s=a8(e?arguments[2]:arguments[1]);if(e){let e=arguments[0];return mY(t,s,t=>mQ(e,t))}return e=>mY(t,s,t=>mQ(e,t))},xU=Object.create(null),xP=e=>globalThis.process?.env||globalThis.Deno?.env.toObject()||globalThis.__env__||(e?xU:globalThis),x$=new Proxy(xU,{get:(e,t)=>xP()[t]??xU[t],has:(e,t)=>t in xP()||t in xU,set:(e,t,s)=>(xP(!0)[t]=s,!0),deleteProperty(e,t){if(!t)return!1;let s=xP(!0);return delete s[t],!0},ownKeys:()=>Object.keys(xP(!0))}),xD="u">typeof process&&process.env&&"production"||"",xz=[["APPVEYOR"],["AWS_AMPLIFY","AWS_APP_ID",{ci:!0}],["AZURE_PIPELINES","SYSTEM_TEAMFOUNDATIONCOLLECTIONURI"],["AZURE_STATIC","INPUT_AZURE_STATIC_WEB_APPS_API_TOKEN"],["APPCIRCLE","AC_APPCIRCLE"],["BAMBOO","bamboo_planKey"],["BITBUCKET","BITBUCKET_COMMIT"],["BITRISE","BITRISE_IO"],["BUDDY","BUDDY_WORKSPACE_ID"],["BUILDKITE"],["CIRCLE","CIRCLECI"],["CIRRUS","CIRRUS_CI"],["CLOUDFLARE_PAGES","CF_PAGES",{ci:!0}],["CODEBUILD","CODEBUILD_BUILD_ARN"],["CODEFRESH","CF_BUILD_ID"],["DRONE"],["DRONE","DRONE_BUILD_EVENT"],["DSARI"],["GITHUB_ACTIONS"],["GITLAB","GITLAB_CI"],["GITLAB","CI_MERGE_REQUEST_ID"],["GOCD","GO_PIPELINE_LABEL"],["LAYERCI"],["HUDSON","HUDSON_URL"],["JENKINS","JENKINS_URL"],["MAGNUM"],["NETLIFY"],["NETLIFY","NETLIFY_LOCAL",{ci:!1}],["NEVERCODE"],["RENDER"],["SAIL","SAILCI"],["SEMAPHORE"],["SCREWDRIVER"],["SHIPPABLE"],["SOLANO","TDDIUM"],["STRIDER"],["TEAMCITY","TEAMCITY_VERSION"],["TRAVIS"],["VERCEL","NOW_BUILDER"],["VERCEL","VERCEL",{ci:!1}],["VERCEL","VERCEL_ENV",{ci:!1}],["APPCENTER","APPCENTER_BUILD_ID"],["CODESANDBOX","CODESANDBOX_SSE",{ci:!1}],["STACKBLITZ"],["STORMKIT"],["CLEAVR"],["ZEABUR"],["CODESPHERE","CODESPHERE_APP_ID",{ci:!0}],["RAILWAY","RAILWAY_PROJECT_ID"],["RAILWAY","RAILWAY_SERVICE_ID"]],xB=function(){if(globalThis.process?.env)for(let e of xz){let t=e[1]||e[0];if(globalThis.process?.env[t])return{name:e[0].toLowerCase(),...e[2]}}return globalThis.process?.env?.SHELL==="/bin/jsh"&&globalThis.process?.versions?.webcontainer?{name:"stackblitz",ci:!1}:{name:"",ci:!1}}();function xq(e){return!!e&&"false"!==e}xB.name;let xK=globalThis.process?.platform||"",xJ=(xq(x$.CI)||xB.ci,xq(globalThis.process?.stdout&&globalThis.process?.stdout.isTTY)),xV=(xq(x$.DEBUG),"test"===xD||xq(x$.TEST),"dev"===xD||"development"===xD),xG=(xq(x$.MINIMAL),/^win/i.test(xK)),xH=(/^linux/i.test(xK),/^darwin/i.test(xK),!xq(x$.NO_COLOR)&&(xq(x$.FORCE_COLOR)||(xJ||xG)&&x$.TERM),(globalThis.process?.versions?.node||"").replace(/^v/,"")||null),xW=(xH?.split(".")[0],globalThis.process||Object.create(null)),xY={versions:{}},xQ=new Proxy(xW,{get:(e,t)=>"env"===t?x$:t in e?e[t]:t in xY?xY[t]:void 0}),xX=globalThis.process?.release?.name==="node",xZ=!!globalThis.Bun||!!globalThis.process?.versions?.bun,x0=!!globalThis.Deno,x1=!!globalThis.fastly,x2=[[!!globalThis.Netlify,"netlify"],[!!globalThis.EdgeRuntime,"edge-light"],[globalThis.navigator?.userAgent==="Cloudflare-Workers","workerd"],[x1,"fastly"],[x0,"deno"],[xZ,"bun"],[xX,"node"],[!!globalThis.__lagon__,"lagon"]],x3=function(){let e=x2.find(e=>e[0]);if(e)return{name:e[1]}}();x3?.name;let x5={"application/andrew-inset":{source:"iana",extensions:["ez"],compressible:null},"application/applixware":{source:"apache",extensions:["aw"],compressible:null},"application/atom+xml":{source:"iana",compressible:!0,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:!0,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:!0,extensions:["atomdeleted"]},"application/atomsvc+xml":{source:"iana",compressible:!0,extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",compressible:!0,extensions:["dwd"]},"application/atsc-held+xml":{source:"iana",compressible:!0,extensions:["held"]},"application/atsc-rsat+xml":{source:"iana",compressible:!0,extensions:["rsat"]},"application/calendar+xml":{source:"iana",compressible:!0,extensions:["xcs"]},"application/ccxml+xml":{source:"iana",compressible:!0,extensions:["ccxml"]},"application/cdfx+xml":{source:"iana",compressible:!0,extensions:["cdfx"]},"application/cdmi-capability":{source:"iana",extensions:["cdmia"],compressible:null},"application/cdmi-container":{source:"iana",extensions:["cdmic"],compressible:null},"application/cdmi-domain":{source:"iana",extensions:["cdmid"],compressible:null},"application/cdmi-object":{source:"iana",extensions:["cdmio"],compressible:null},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"],compressible:null},"application/cpl+xml":{source:"iana",compressible:!0,extensions:["cpl"]},"application/cu-seeme":{source:"apache",extensions:["cu"],compressible:null},"application/dash+xml":{source:"iana",compressible:!0,extensions:["mpd"]},"application/dash-patch+xml":{source:"iana",compressible:!0,extensions:["mpp"]},"application/davmount+xml":{source:"iana",compressible:!0,extensions:["davmount"]},"application/dicom":{source:"iana",compressible:!1,extensions:["dcm"]},"application/docbook+xml":{source:"apache",compressible:!0,extensions:["dbk"]},"application/dssc+der":{source:"iana",extensions:["dssc"],compressible:null},"application/dssc+xml":{source:"iana",compressible:!0,extensions:["xdssc"]},"application/ecmascript":{source:"iana",compressible:!0,extensions:["es","ecma"]},"application/emma+xml":{source:"iana",compressible:!0,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:!0,extensions:["emotionml"]},"application/epub+zip":{source:"iana",compressible:!1,extensions:["epub"]},"application/exi":{source:"iana",extensions:["exi"],compressible:null},"application/express":{source:"iana",extensions:["exp"],compressible:null},"application/fdt+xml":{source:"iana",compressible:!0,extensions:["fdt"]},"application/font-tdpfr":{source:"iana",extensions:["pfr"],compressible:null},"application/geo+json":{source:"iana",compressible:!0,extensions:["geojson"]},"application/gml+xml":{source:"iana",compressible:!0,extensions:["gml"]},"application/gpx+xml":{source:"apache",compressible:!0,extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"],compressible:null},"application/gzip":{source:"iana",compressible:!1,extensions:["gz"]},"application/hyperstudio":{source:"iana",extensions:["stk"],compressible:null},"application/inkml+xml":{source:"iana",compressible:!0,extensions:["ink","inkml"]},"application/ipfix":{source:"iana",extensions:["ipfix"],compressible:null},"application/its+xml":{source:"iana",compressible:!0,extensions:["its"]},"application/java-archive":{source:"apache",compressible:!1,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:!1,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:!1,extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js","mjs"]},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/jsonml+json":{source:"apache",compressible:!0,extensions:["jsonml"]},"application/ld+json":{source:"iana",compressible:!0,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:!0,extensions:["lgr"]},"application/lost+xml":{source:"iana",compressible:!0,extensions:["lostxml"]},"application/mac-binhex40":{source:"iana",extensions:["hqx"],compressible:null},"application/mac-compactpro":{source:"apache",extensions:["cpt"],compressible:null},"application/mads+xml":{source:"iana",compressible:!0,extensions:["mads"]},"application/manifest+json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"],compressible:null},"application/marcxml+xml":{source:"iana",compressible:!0,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"],compressible:null},"application/mathml+xml":{source:"iana",compressible:!0,extensions:["mathml"]},"application/mbox":{source:"iana",extensions:["mbox"],compressible:null},"application/media-policy-dataset+xml":{source:"iana",compressible:!0,extensions:["mpf"]},"application/mediaservercontrol+xml":{source:"iana",compressible:!0,extensions:["mscml"]},"application/metalink+xml":{source:"apache",compressible:!0,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:!0,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:!0,extensions:["mets"]},"application/mmt-aei+xml":{source:"iana",compressible:!0,extensions:["maei"]},"application/mmt-usd+xml":{source:"iana",compressible:!0,extensions:["musd"]},"application/mods+xml":{source:"iana",compressible:!0,extensions:["mods"]},"application/mp21":{source:"iana",extensions:["m21","mp21"],compressible:null},"application/mp4":{source:"iana",extensions:["mp4s","m4p"],compressible:null},"application/msword":{source:"iana",compressible:!1,extensions:["doc","dot"]},"application/mxf":{source:"iana",extensions:["mxf"],compressible:null},"application/n-quads":{source:"iana",extensions:["nq"],compressible:null},"application/n-triples":{source:"iana",extensions:["nt"],compressible:null},"application/node":{source:"iana",extensions:["cjs"],compressible:null},"application/octet-stream":{source:"iana",compressible:!1,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"],compressible:null},"application/oebps-package+xml":{source:"iana",compressible:!0,extensions:["opf"]},"application/ogg":{source:"iana",compressible:!1,extensions:["ogx"]},"application/omdoc+xml":{source:"apache",compressible:!0,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"],compressible:null},"application/oxps":{source:"iana",extensions:["oxps"],compressible:null},"application/p2p-overlay+xml":{source:"iana",compressible:!0,extensions:["relo"]},"application/patch-ops-error+xml":{source:"iana",compressible:!0,extensions:["xer"]},"application/pdf":{source:"iana",compressible:!1,extensions:["pdf"]},"application/pgp-encrypted":{source:"iana",compressible:!1,extensions:["pgp"]},"application/pgp-keys":{source:"iana",extensions:["asc"],compressible:null},"application/pgp-signature":{source:"iana",extensions:["asc","sig"],compressible:null},"application/pics-rules":{source:"apache",extensions:["prf"],compressible:null},"application/pkcs10":{source:"iana",extensions:["p10"],compressible:null},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"],compressible:null},"application/pkcs7-signature":{source:"iana",extensions:["p7s"],compressible:null},"application/pkcs8":{source:"iana",extensions:["p8"],compressible:null},"application/pkix-attr-cert":{source:"iana",extensions:["ac"],compressible:null},"application/pkix-cert":{source:"iana",extensions:["cer"],compressible:null},"application/pkix-crl":{source:"iana",extensions:["crl"],compressible:null},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"],compressible:null},"application/pkixcmp":{source:"iana",extensions:["pki"],compressible:null},"application/pls+xml":{source:"iana",compressible:!0,extensions:["pls"]},"application/postscript":{source:"iana",compressible:!0,extensions:["ai","eps","ps"]},"application/provenance+xml":{source:"iana",compressible:!0,extensions:["provx"]},"application/prs.cww":{source:"iana",extensions:["cww"],compressible:null},"application/pskc+xml":{source:"iana",compressible:!0,extensions:["pskcxml"]},"application/rdf+xml":{source:"iana",compressible:!0,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:!0,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"],compressible:null},"application/resource-lists+xml":{source:"iana",compressible:!0,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:!0,extensions:["rld"]},"application/rls-services+xml":{source:"iana",compressible:!0,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:!0,extensions:["rapd"]},"application/route-s-tsid+xml":{source:"iana",compressible:!0,extensions:["sls"]},"application/route-usd+xml":{source:"iana",compressible:!0,extensions:["rusd"]},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"],compressible:null},"application/rpki-manifest":{source:"iana",extensions:["mft"],compressible:null},"application/rpki-roa":{source:"iana",extensions:["roa"],compressible:null},"application/rsd+xml":{source:"apache",compressible:!0,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:!0,extensions:["rss"]},"application/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"application/sbml+xml":{source:"iana",compressible:!0,extensions:["sbml"]},"application/scvp-cv-request":{source:"iana",extensions:["scq"],compressible:null},"application/scvp-cv-response":{source:"iana",extensions:["scs"],compressible:null},"application/scvp-vp-request":{source:"iana",extensions:["spq"],compressible:null},"application/scvp-vp-response":{source:"iana",extensions:["spp"],compressible:null},"application/sdp":{source:"iana",extensions:["sdp"],compressible:null},"application/senml+xml":{source:"iana",compressible:!0,extensions:["senmlx"]},"application/sensml+xml":{source:"iana",compressible:!0,extensions:["sensmlx"]},"application/set-payment-initiation":{source:"iana",extensions:["setpay"],compressible:null},"application/set-registration-initiation":{source:"iana",extensions:["setreg"],compressible:null},"application/shf+xml":{source:"iana",compressible:!0,extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"],compressible:null},"application/smil+xml":{source:"iana",compressible:!0,extensions:["smi","smil"]},"application/sparql-query":{source:"iana",extensions:["rq"],compressible:null},"application/sparql-results+xml":{source:"iana",compressible:!0,extensions:["srx"]},"application/srgs":{source:"iana",extensions:["gram"],compressible:null},"application/srgs+xml":{source:"iana",compressible:!0,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:!0,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:!0,extensions:["ssdl"]},"application/ssml+xml":{source:"iana",compressible:!0,extensions:["ssml"]},"application/swid+xml":{source:"iana",compressible:!0,extensions:["swidtag"]},"application/tei+xml":{source:"iana",compressible:!0,extensions:["tei","teicorpus"]},"application/thraud+xml":{source:"iana",compressible:!0,extensions:["tfi"]},"application/timestamped-data":{source:"iana",extensions:["tsd"],compressible:null},"application/trig":{source:"iana",extensions:["trig"],compressible:null},"application/ttml+xml":{source:"iana",compressible:!0,extensions:["ttml"]},"application/urc-ressheet+xml":{source:"iana",compressible:!0,extensions:["rsheet"]},"application/urc-targetdesc+xml":{source:"iana",compressible:!0,extensions:["td"]},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:!0,extensions:["1km"]},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"],compressible:null},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"],compressible:null},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"],compressible:null},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"],compressible:null},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"],compressible:null},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"],compressible:null},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"],compressible:null},"application/vnd.acucobol":{source:"iana",extensions:["acu"],compressible:null},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"],compressible:null},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:!1,extensions:["air"]},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"],compressible:null},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"],compressible:null},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:!0,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"],compressible:null},"application/vnd.age":{source:"iana",extensions:["age"],compressible:null},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"],compressible:null},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"],compressible:null},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"],compressible:null},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"],compressible:null},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"],compressible:null},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"],compressible:null},"application/vnd.android.package-archive":{source:"apache",compressible:!1,extensions:["apk"]},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"],compressible:null},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"],compressible:null},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"],compressible:null},"application/vnd.apple.installer+xml":{source:"iana",compressible:!0,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["key"],compressible:null},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"],compressible:null},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"],compressible:null},"application/vnd.apple.pages":{source:"iana",extensions:["pages"],compressible:null},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"],compressible:null},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"],compressible:null},"application/vnd.audiograph":{source:"iana",extensions:["aep"],compressible:null},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:!0,extensions:["bmml"]},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"],compressible:null},"application/vnd.bmi":{source:"iana",extensions:["bmi"],compressible:null},"application/vnd.businessobjects":{source:"iana",extensions:["rep"],compressible:null},"application/vnd.chemdraw+xml":{source:"iana",compressible:!0,extensions:["cdxml"]},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"],compressible:null},"application/vnd.cinderella":{source:"iana",extensions:["cdy"],compressible:null},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:!0,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"],compressible:null},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"],compressible:null},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"],compressible:null},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"],compressible:null},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"],compressible:null},"application/vnd.commonspace":{source:"iana",extensions:["csp"],compressible:null},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"],compressible:null},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"],compressible:null},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"],compressible:null},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"],compressible:null},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"],compressible:null},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"],compressible:null},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"],compressible:null},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:!0,extensions:["wbs"]},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"],compressible:null},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"],compressible:null},"application/vnd.curl.car":{source:"apache",extensions:["car"],compressible:null},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"],compressible:null},"application/vnd.dart":{source:"iana",compressible:!0,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"],compressible:null},"application/vnd.dbf":{source:"iana",extensions:["dbf"],compressible:null},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"],compressible:null},"application/vnd.dece.ttml+xml":{source:"iana",compressible:!0,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"],compressible:null},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"],compressible:null},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"],compressible:null},"application/vnd.dna":{source:"iana",extensions:["dna"],compressible:null},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"],compressible:null},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"],compressible:null},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"],compressible:null},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"],compressible:null},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"],compressible:null},"application/vnd.dvb.service":{source:"iana",extensions:["svc"],compressible:null},"application/vnd.dynageo":{source:"iana",extensions:["geo"],compressible:null},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"],compressible:null},"application/vnd.enliven":{source:"iana",extensions:["nml"],compressible:null},"application/vnd.epson.esf":{source:"iana",extensions:["esf"],compressible:null},"application/vnd.epson.msf":{source:"iana",extensions:["msf"],compressible:null},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"],compressible:null},"application/vnd.epson.salt":{source:"iana",extensions:["slt"],compressible:null},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"],compressible:null},"application/vnd.eszigno3+xml":{source:"iana",compressible:!0,extensions:["es3","et3"]},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"],compressible:null},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"],compressible:null},"application/vnd.fdf":{source:"iana",extensions:["fdf"],compressible:null},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"],compressible:null},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"],compressible:null},"application/vnd.flographit":{source:"iana",extensions:["gph"],compressible:null},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"],compressible:null},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"],compressible:null},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"],compressible:null},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"],compressible:null},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"],compressible:null},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"],compressible:null},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"],compressible:null},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"],compressible:null},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"],compressible:null},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"],compressible:null},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"],compressible:null},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"],compressible:null},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"],compressible:null},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"],compressible:null},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"],compressible:null},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"],compressible:null},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"],compressible:null},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"],compressible:null},"application/vnd.geonext":{source:"iana",extensions:["gxt"],compressible:null},"application/vnd.geoplan":{source:"iana",extensions:["g2w"],compressible:null},"application/vnd.geospace":{source:"iana",extensions:["g3w"],compressible:null},"application/vnd.gmx":{source:"iana",extensions:["gmx"],compressible:null},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:!0,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:!1,extensions:["kmz"]},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"],compressible:null},"application/vnd.groove-account":{source:"iana",extensions:["gac"],compressible:null},"application/vnd.groove-help":{source:"iana",extensions:["ghf"],compressible:null},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"],compressible:null},"application/vnd.groove-injector":{source:"iana",extensions:["grv"],compressible:null},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"],compressible:null},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"],compressible:null},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"],compressible:null},"application/vnd.hal+xml":{source:"iana",compressible:!0,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:!0,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"],compressible:null},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"],compressible:null},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"],compressible:null},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"],compressible:null},"application/vnd.hp-hps":{source:"iana",extensions:["hps"],compressible:null},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"],compressible:null},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"],compressible:null},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"],compressible:null},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"],compressible:null},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"],compressible:null},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"],compressible:null},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"],compressible:null},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"],compressible:null},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"],compressible:null},"application/vnd.igloader":{source:"iana",extensions:["igl"],compressible:null},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"],compressible:null},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"],compressible:null},"application/vnd.insors.igm":{source:"iana",extensions:["igm"],compressible:null},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"],compressible:null},"application/vnd.intergeo":{source:"iana",extensions:["i2g"],compressible:null},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"],compressible:null},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"],compressible:null},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"],compressible:null},"application/vnd.irepository.package+xml":{source:"iana",compressible:!0,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"],compressible:null},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"],compressible:null},"application/vnd.jam":{source:"iana",extensions:["jam"],compressible:null},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"],compressible:null},"application/vnd.jisp":{source:"iana",extensions:["jisp"],compressible:null},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"],compressible:null},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"],compressible:null},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"],compressible:null},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"],compressible:null},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"],compressible:null},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"],compressible:null},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"],compressible:null},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"],compressible:null},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"],compressible:null},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"],compressible:null},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"],compressible:null},"application/vnd.kidspiration":{source:"iana",extensions:["kia"],compressible:null},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"],compressible:null},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"],compressible:null},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"],compressible:null},"application/vnd.las.las+xml":{source:"iana",compressible:!0,extensions:["lasxml"]},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"],compressible:null},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:!0,extensions:["lbe"]},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"],compressible:null},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"],compressible:null},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"],compressible:null},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"],compressible:null},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"],compressible:null},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"],compressible:null},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"],compressible:null},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"],compressible:null},"application/vnd.mapbox-vector-tile":{source:"iana",extensions:["mvt"],compressible:null},"application/vnd.mcd":{source:"iana",extensions:["mcd"],compressible:null},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"],compressible:null},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"],compressible:null},"application/vnd.mfer":{source:"iana",extensions:["mwf"],compressible:null},"application/vnd.mfmp":{source:"iana",extensions:["mfm"],compressible:null},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"],compressible:null},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"],compressible:null},"application/vnd.mif":{source:"iana",extensions:["mif"],compressible:null},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"],compressible:null},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"],compressible:null},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"],compressible:null},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"],compressible:null},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"],compressible:null},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"],compressible:null},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"],compressible:null},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"],compressible:null},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"],compressible:null},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:!0,extensions:["xul"]},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"],compressible:null},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"],compressible:null},"application/vnd.ms-excel":{source:"iana",compressible:!1,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"],compressible:null},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"],compressible:null},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"],compressible:null},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"],compressible:null},"application/vnd.ms-fontobject":{source:"iana",compressible:!0,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"],compressible:null},"application/vnd.ms-ims":{source:"iana",extensions:["ims"],compressible:null},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"],compressible:null},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"],compressible:null},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"],compressible:null},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"],compressible:null},"application/vnd.ms-powerpoint":{source:"iana",compressible:!1,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"],compressible:null},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"],compressible:null},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"],compressible:null},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"],compressible:null},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"],compressible:null},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"],compressible:null},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"],compressible:null},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"],compressible:null},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"],compressible:null},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"],compressible:null},"application/vnd.ms-xpsdocument":{source:"iana",compressible:!1,extensions:["xps"]},"application/vnd.mseq":{source:"iana",extensions:["mseq"],compressible:null},"application/vnd.musician":{source:"iana",extensions:["mus"],compressible:null},"application/vnd.muvee.style":{source:"iana",extensions:["msty"],compressible:null},"application/vnd.mynfc":{source:"iana",extensions:["taglet"],compressible:null},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"],compressible:null},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"],compressible:null},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"],compressible:null},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"],compressible:null},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"],compressible:null},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:!0,extensions:["ac"]},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"],compressible:null},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"],compressible:null},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"],compressible:null},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"],compressible:null},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"],compressible:null},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"],compressible:null},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"],compressible:null},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"],compressible:null},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"],compressible:null},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"],compressible:null},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"],compressible:null},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"],compressible:null},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:!1,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"],compressible:null},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"],compressible:null},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"],compressible:null},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:!1,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"],compressible:null},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:!1,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"],compressible:null},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:!1,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"],compressible:null},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"],compressible:null},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"],compressible:null},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"],compressible:null},"application/vnd.oma.dd2+xml":{source:"iana",compressible:!0,extensions:["dd2"]},"application/vnd.openblox.game+xml":{source:"iana",compressible:!0,extensions:["obgx"]},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"],compressible:null},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:!0,extensions:["osm"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:!1,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"],compressible:null},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"],compressible:null},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"],compressible:null},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:!1,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"],compressible:null},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:!1,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"],compressible:null},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"],compressible:null},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"],compressible:null},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"],compressible:null},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"],compressible:null},"application/vnd.pawaafile":{source:"iana",extensions:["paw"],compressible:null},"application/vnd.pg.format":{source:"iana",extensions:["str"],compressible:null},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"],compressible:null},"application/vnd.picsel":{source:"iana",extensions:["efif"],compressible:null},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"],compressible:null},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"],compressible:null},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"],compressible:null},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"],compressible:null},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"],compressible:null},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"],compressible:null},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"],compressible:null},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"],compressible:null},"application/vnd.rar":{source:"iana",extensions:["rar"],compressible:null},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"],compressible:null},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"],compressible:null},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:!0,extensions:["musicxml"]},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"],compressible:null},"application/vnd.rim.cod":{source:"apache",extensions:["cod"],compressible:null},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"],compressible:null},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"],compressible:null},"application/vnd.route66.link66+xml":{source:"iana",compressible:!0,extensions:["link66"]},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"],compressible:null},"application/vnd.seemail":{source:"iana",extensions:["see"],compressible:null},"application/vnd.sema":{source:"iana",extensions:["sema"],compressible:null},"application/vnd.semd":{source:"iana",extensions:["semd"],compressible:null},"application/vnd.semf":{source:"iana",extensions:["semf"],compressible:null},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"],compressible:null},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"],compressible:null},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"],compressible:null},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"],compressible:null},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"],compressible:null},"application/vnd.smaf":{source:"iana",extensions:["mmf"],compressible:null},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"],compressible:null},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:!0,extensions:["fo"]},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:!0,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"],compressible:null},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"],compressible:null},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"],compressible:null},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"],compressible:null},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"],compressible:null},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"],compressible:null},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"],compressible:null},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"],compressible:null},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"],compressible:null},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"],compressible:null},"application/vnd.sun.wadl+xml":{source:"iana",compressible:!0,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"],compressible:null},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"],compressible:null},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"],compressible:null},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"],compressible:null},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"],compressible:null},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"],compressible:null},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"],compressible:null},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"],compressible:null},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"],compressible:null},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"],compressible:null},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"],compressible:null},"application/vnd.svd":{source:"iana",extensions:["svd"],compressible:null},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"],compressible:null},"application/vnd.syncml+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",charset:"UTF-8",extensions:["bdm"],compressible:null},"application/vnd.syncml.dm+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xdm"]},"application/vnd.syncml.dmddf+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["ddf"]},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"],compressible:null},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"],compressible:null},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"],compressible:null},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"],compressible:null},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"],compressible:null},"application/vnd.trueapp":{source:"iana",extensions:["tra"],compressible:null},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"],compressible:null},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"],compressible:null},"application/vnd.umajin":{source:"iana",extensions:["umj"],compressible:null},"application/vnd.unity":{source:"iana",extensions:["unityweb"],compressible:null},"application/vnd.uoml+xml":{source:"iana",compressible:!0,extensions:["uoml"]},"application/vnd.vcx":{source:"iana",extensions:["vcx"],compressible:null},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"],compressible:null},"application/vnd.visionary":{source:"iana",extensions:["vis"],compressible:null},"application/vnd.vsf":{source:"iana",extensions:["vsf"],compressible:null},"application/vnd.wap.wbxml":{source:"iana",charset:"UTF-8",extensions:["wbxml"],compressible:null},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"],compressible:null},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"],compressible:null},"application/vnd.webturbo":{source:"iana",extensions:["wtb"],compressible:null},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"],compressible:null},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"],compressible:null},"application/vnd.wqd":{source:"iana",extensions:["wqd"],compressible:null},"application/vnd.wt.stf":{source:"iana",extensions:["stf"],compressible:null},"application/vnd.xara":{source:"iana",extensions:["xar"],compressible:null},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"],compressible:null},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"],compressible:null},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"],compressible:null},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"],compressible:null},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"],compressible:null},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:!0,extensions:["osfpvg"]},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"],compressible:null},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"],compressible:null},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"],compressible:null},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"],compressible:null},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:!0,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:!0,extensions:["vxml"]},"application/wasm":{source:"iana",compressible:!0,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:!0,extensions:["wif"]},"application/widget":{source:"iana",extensions:["wgt"],compressible:null},"application/winhlp":{source:"apache",extensions:["hlp"],compressible:null},"application/wsdl+xml":{source:"iana",compressible:!0,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:!0,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:!1,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"],compressible:null},"application/x-ace-compressed":{source:"apache",extensions:["ace"],compressible:null},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"],compressible:null},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"],compressible:null},"application/x-authorware-map":{source:"apache",extensions:["aam"],compressible:null},"application/x-authorware-seg":{source:"apache",extensions:["aas"],compressible:null},"application/x-bcpio":{source:"apache",extensions:["bcpio"],compressible:null},"application/x-bittorrent":{source:"apache",extensions:["torrent"],compressible:null},"application/x-blorb":{source:"apache",extensions:["blb","blorb"],compressible:null},"application/x-bzip":{source:"apache",compressible:!1,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:!1,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"],compressible:null},"application/x-cdlink":{source:"apache",extensions:["vcd"],compressible:null},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"],compressible:null},"application/x-chat":{source:"apache",extensions:["chat"],compressible:null},"application/x-chess-pgn":{source:"apache",extensions:["pgn"],compressible:null},"application/x-cocoa":{source:"nginx",extensions:["cco"],compressible:null},"application/x-conference":{source:"apache",extensions:["nsc"],compressible:null},"application/x-cpio":{source:"apache",extensions:["cpio"],compressible:null},"application/x-csh":{source:"apache",extensions:["csh"],compressible:null},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"],compressible:null},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"],compressible:null},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],compressible:null},"application/x-doom":{source:"apache",extensions:["wad"],compressible:null},"application/x-dtbncx+xml":{source:"apache",compressible:!0,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:!0,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:!0,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:!1,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"],compressible:null},"application/x-eva":{source:"apache",extensions:["eva"],compressible:null},"application/x-font-bdf":{source:"apache",extensions:["bdf"],compressible:null},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"],compressible:null},"application/x-font-linux-psf":{source:"apache",extensions:["psf"],compressible:null},"application/x-font-pcf":{source:"apache",extensions:["pcf"],compressible:null},"application/x-font-snf":{source:"apache",extensions:["snf"],compressible:null},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"],compressible:null},"application/x-freearc":{source:"apache",extensions:["arc"],compressible:null},"application/x-futuresplash":{source:"apache",extensions:["spl"],compressible:null},"application/x-gca-compressed":{source:"apache",extensions:["gca"],compressible:null},"application/x-glulx":{source:"apache",extensions:["ulx"],compressible:null},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"],compressible:null},"application/x-gramps-xml":{source:"apache",extensions:["gramps"],compressible:null},"application/x-gtar":{source:"apache",extensions:["gtar"],compressible:null},"application/x-hdf":{source:"apache",extensions:["hdf"],compressible:null},"application/x-install-instructions":{source:"apache",extensions:["install"],compressible:null},"application/x-iso9660-image":{source:"apache",extensions:["iso"],compressible:null},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"],compressible:null},"application/x-java-jnlp-file":{source:"apache",compressible:!1,extensions:["jnlp"]},"application/x-latex":{source:"apache",compressible:!1,extensions:["latex"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"],compressible:null},"application/x-makeself":{source:"nginx",extensions:["run"],compressible:null},"application/x-mie":{source:"apache",extensions:["mie"],compressible:null},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"],compressible:null},"application/x-ms-application":{source:"apache",extensions:["application"],compressible:null},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"],compressible:null},"application/x-ms-wmd":{source:"apache",extensions:["wmd"],compressible:null},"application/x-ms-wmz":{source:"apache",extensions:["wmz"],compressible:null},"application/x-ms-xbap":{source:"apache",extensions:["xbap"],compressible:null},"application/x-msaccess":{source:"apache",extensions:["mdb"],compressible:null},"application/x-msbinder":{source:"apache",extensions:["obd"],compressible:null},"application/x-mscardfile":{source:"apache",extensions:["crd"],compressible:null},"application/x-msclip":{source:"apache",extensions:["clp"],compressible:null},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"],compressible:null},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"],compressible:null},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"],compressible:null},"application/x-msmoney":{source:"apache",extensions:["mny"],compressible:null},"application/x-mspublisher":{source:"apache",extensions:["pub"],compressible:null},"application/x-msschedule":{source:"apache",extensions:["scd"],compressible:null},"application/x-msterminal":{source:"apache",extensions:["trm"],compressible:null},"application/x-mswrite":{source:"apache",extensions:["wri"],compressible:null},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"],compressible:null},"application/x-nzb":{source:"apache",extensions:["nzb"],compressible:null},"application/x-perl":{source:"nginx",extensions:["pl","pm"],compressible:null},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"],compressible:null},"application/x-pkcs12":{source:"apache",compressible:!1,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"],compressible:null},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"],compressible:null},"application/x-rar-compressed":{source:"apache",compressible:!1,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"],compressible:null},"application/x-research-info-systems":{source:"apache",extensions:["ris"],compressible:null},"application/x-sea":{source:"nginx",extensions:["sea"],compressible:null},"application/x-sh":{source:"apache",compressible:!0,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"],compressible:null},"application/x-shockwave-flash":{source:"apache",compressible:!1,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"],compressible:null},"application/x-sql":{source:"apache",extensions:["sql"],compressible:null},"application/x-stuffit":{source:"apache",compressible:!1,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"],compressible:null},"application/x-subrip":{source:"apache",extensions:["srt"],compressible:null},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"],compressible:null},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"],compressible:null},"application/x-t3vm-image":{source:"apache",extensions:["t3"],compressible:null},"application/x-tads":{source:"apache",extensions:["gam"],compressible:null},"application/x-tar":{source:"apache",compressible:!0,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"],compressible:null},"application/x-tex":{source:"apache",extensions:["tex"],compressible:null},"application/x-tex-tfm":{source:"apache",extensions:["tfm"],compressible:null},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"],compressible:null},"application/x-tgif":{source:"apache",extensions:["obj"],compressible:null},"application/x-ustar":{source:"apache",extensions:["ustar"],compressible:null},"application/x-wais-source":{source:"apache",extensions:["src"],compressible:null},"application/x-x509-ca-cert":{source:"iana",extensions:["der","crt","pem"],compressible:null},"application/x-xfig":{source:"apache",extensions:["fig"],compressible:null},"application/x-xliff+xml":{source:"apache",compressible:!0,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:!1,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"],compressible:null},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"],compressible:null},"application/xaml+xml":{source:"apache",compressible:!0,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:!0,extensions:["xav"]},"application/xcap-caps+xml":{source:"iana",compressible:!0,extensions:["xca"]},"application/xcap-diff+xml":{source:"iana",compressible:!0,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:!0,extensions:["xel"]},"application/xcap-ns+xml":{source:"iana",compressible:!0,extensions:["xns"]},"application/xenc+xml":{source:"iana",compressible:!0,extensions:["xenc"]},"application/xhtml+xml":{source:"iana",compressible:!0,extensions:["xhtml","xht"]},"application/xliff+xml":{source:"iana",compressible:!0,extensions:["xlf"]},"application/xml":{source:"iana",compressible:!0,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:!0,extensions:["dtd"]},"application/xop+xml":{source:"iana",compressible:!0,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:!0,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:!0,extensions:["xsl","xslt"]},"application/xspf+xml":{source:"apache",compressible:!0,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:!0,extensions:["mxml","xhvml","xvml","xvm"]},"application/yang":{source:"iana",extensions:["yang"],compressible:null},"application/yin+xml":{source:"iana",compressible:!0,extensions:["yin"]},"application/zip":{source:"iana",compressible:!1,extensions:["zip"]},"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/adpcm":{source:"apache",extensions:["adp"],compressible:null},"audio/amr":{source:"iana",extensions:["amr"],compressible:null},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"],compressible:null},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"],compressible:null},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a"]},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx","opus"]},"audio/s3m":{source:"apache",extensions:["s3m"],compressible:null},"audio/silk":{source:"apache",extensions:["sil"],compressible:null},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"],compressible:null},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"],compressible:null},"audio/vnd.dra":{source:"iana",extensions:["dra"],compressible:null},"audio/vnd.dts":{source:"iana",extensions:["dts"],compressible:null},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"],compressible:null},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"],compressible:null},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"],compressible:null},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"],compressible:null},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"],compressible:null},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"],compressible:null},"audio/vnd.rip":{source:"iana",extensions:["rip"],compressible:null},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"],compressible:null},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"],compressible:null},"audio/x-m4a":{source:"nginx",extensions:["m4a"],compressible:null},"audio/x-matroska":{source:"apache",extensions:["mka"],compressible:null},"audio/x-mpegurl":{source:"apache",extensions:["m3u"],compressible:null},"audio/x-ms-wax":{source:"apache",extensions:["wax"],compressible:null},"audio/x-ms-wma":{source:"apache",extensions:["wma"],compressible:null},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"],compressible:null},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"],compressible:null},"audio/x-realaudio":{source:"nginx",extensions:["ra"],compressible:null},"audio/x-wav":{source:"apache",extensions:["wav"],compressible:null},"audio/x-gsm":{source:"apache",extensions:["gsm"],compressible:null},"audio/xm":{source:"apache",extensions:["xm"],compressible:null},"chemical/x-cdx":{source:"apache",extensions:["cdx"],compressible:null},"chemical/x-cif":{source:"apache",extensions:["cif"],compressible:null},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"],compressible:null},"chemical/x-cml":{source:"apache",extensions:["cml"],compressible:null},"chemical/x-csml":{source:"apache",extensions:["csml"],compressible:null},"chemical/x-xyz":{source:"apache",extensions:["xyz"],compressible:null},"font/collection":{source:"iana",extensions:["ttc"],compressible:null},"font/otf":{source:"iana",compressible:!0,extensions:["otf"]},"font/ttf":{source:"iana",compressible:!0,extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"],compressible:null},"font/woff2":{source:"iana",extensions:["woff2"],compressible:null},"image/aces":{source:"iana",extensions:["exr"],compressible:null},"image/avci":{source:"iana",extensions:["avci"],compressible:null},"image/avcs":{source:"iana",extensions:["avcs"],compressible:null},"image/avif":{source:"iana",compressible:!1,extensions:["avif"]},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"],compressible:null},"image/dicom-rle":{source:"iana",extensions:["drle"],compressible:null},"image/emf":{source:"iana",extensions:["emf"],compressible:null},"image/fits":{source:"iana",extensions:["fits"],compressible:null},"image/g3fax":{source:"iana",extensions:["g3"],compressible:null},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"],compressible:null},"image/heic-sequence":{source:"iana",extensions:["heics"],compressible:null},"image/heif":{source:"iana",extensions:["heif"],compressible:null},"image/heif-sequence":{source:"iana",extensions:["heifs"],compressible:null},"image/hej2k":{source:"iana",extensions:["hej2"],compressible:null},"image/hsj2":{source:"iana",extensions:["hsj2"],compressible:null},"image/ief":{source:"iana",extensions:["ief"],compressible:null},"image/jls":{source:"iana",extensions:["jls"],compressible:null},"image/jp2":{source:"iana",compressible:!1,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpeg","jpg","jpe","jfif","pjpeg","pjp"]},"image/jph":{source:"iana",extensions:["jph"],compressible:null},"image/jphc":{source:"iana",extensions:["jhc"],compressible:null},"image/jpm":{source:"iana",compressible:!1,extensions:["jpm"]},"image/jpx":{source:"iana",compressible:!1,extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"],compressible:null},"image/jxra":{source:"iana",extensions:["jxra"],compressible:null},"image/jxrs":{source:"iana",extensions:["jxrs"],compressible:null},"image/jxs":{source:"iana",extensions:["jxs"],compressible:null},"image/jxsc":{source:"iana",extensions:["jxsc"],compressible:null},"image/jxsi":{source:"iana",extensions:["jxsi"],compressible:null},"image/jxss":{source:"iana",extensions:["jxss"],compressible:null},"image/ktx":{source:"iana",extensions:["ktx"],compressible:null},"image/ktx2":{source:"iana",extensions:["ktx2"],compressible:null},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"],compressible:null},"image/prs.pti":{source:"iana",extensions:["pti"],compressible:null},"image/sgi":{source:"apache",extensions:["sgi"],compressible:null},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"],compressible:null},"image/tiff":{source:"iana",compressible:!1,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"],compressible:null},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"],compressible:null},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"],compressible:null},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"],compressible:null},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"],compressible:null},"image/vnd.dwg":{source:"iana",extensions:["dwg"],compressible:null},"image/vnd.dxf":{source:"iana",extensions:["dxf"],compressible:null},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"],compressible:null},"image/vnd.fpx":{source:"iana",extensions:["fpx"],compressible:null},"image/vnd.fst":{source:"iana",extensions:["fst"],compressible:null},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"],compressible:null},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"],compressible:null},"image/vnd.microsoft.icon":{source:"iana",compressible:!0,extensions:["ico"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"],compressible:null},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"],compressible:null},"image/vnd.net-fpx":{source:"iana",extensions:["npx"],compressible:null},"image/vnd.pco.b16":{source:"iana",extensions:["b16"],compressible:null},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"],compressible:null},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"],compressible:null},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"],compressible:null},"image/vnd.xiff":{source:"iana",extensions:["xif"],compressible:null},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"],compressible:null},"image/webp":{source:"apache",extensions:["webp"],compressible:null},"image/wmf":{source:"iana",extensions:["wmf"],compressible:null},"image/x-3ds":{source:"apache",extensions:["3ds"],compressible:null},"image/x-cmu-raster":{source:"apache",extensions:["ras"],compressible:null},"image/x-cmx":{source:"apache",extensions:["cmx"],compressible:null},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"],compressible:null},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"],compressible:null},"image/x-mrsid-image":{source:"apache",extensions:["sid"],compressible:null},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"],compressible:null},"image/x-pict":{source:"apache",extensions:["pic","pct"],compressible:null},"image/x-portable-anymap":{source:"apache",extensions:["pnm"],compressible:null},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"],compressible:null},"image/x-portable-graymap":{source:"apache",extensions:["pgm"],compressible:null},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"],compressible:null},"image/x-rgb":{source:"apache",extensions:["rgb"],compressible:null},"image/x-tga":{source:"apache",extensions:["tga"],compressible:null},"image/x-xbitmap":{source:"apache",extensions:["xbm"],compressible:null},"image/x-xpixmap":{source:"apache",extensions:["xpm"],compressible:null},"image/x-xwindowdump":{source:"apache",extensions:["xwd"],compressible:null},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"],compressible:null},"message/global":{source:"iana",extensions:["u8msg"],compressible:null},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"],compressible:null},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"],compressible:null},"message/global-headers":{source:"iana",extensions:["u8hdr"],compressible:null},"message/rfc822":{source:"iana",compressible:!0,extensions:["eml","mime"]},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"],compressible:null},"model/3mf":{source:"iana",extensions:["3mf"],compressible:null},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:!0,extensions:["glb"]},"model/iges":{source:"iana",compressible:!1,extensions:["igs","iges"]},"model/mesh":{source:"iana",compressible:!1,extensions:["msh","mesh","silo"]},"model/mtl":{source:"iana",extensions:["mtl"],compressible:null},"model/obj":{source:"iana",extensions:["obj"],compressible:null},"model/step":{source:"iana",compressible:!1,extensions:[".p21",".stp",".step",".stpnc",".210"]},"model/step+xml":{source:"iana",compressible:!0,extensions:["stpx"]},"model/step+zip":{source:"iana",compressible:!1,extensions:["stpz"]},"model/step-xml+zip":{source:"iana",compressible:!1,extensions:["stpxz"]},"model/stl":{source:"iana",extensions:["stl"],compressible:null},"model/vnd.collada+xml":{source:"iana",compressible:!0,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"],compressible:null},"model/vnd.gdl":{source:"iana",extensions:["gdl"],compressible:null},"model/vnd.gtw":{source:"iana",extensions:["gtw"],compressible:null},"model/vnd.mts":{source:"iana",extensions:["mts"],compressible:null},"model/vnd.opengex":{source:"iana",extensions:["ogex"],compressible:null},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"],compressible:null},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"],compressible:null},"model/vnd.sap.vds":{source:"iana",extensions:["vds"],compressible:null},"model/vnd.usdz+zip":{source:"iana",compressible:!1,extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"],compressible:null},"model/vnd.vtu":{source:"iana",extensions:["vtu"],compressible:null},"model/vrml":{source:"iana",compressible:!1,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:!1,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"],compressible:null},"model/x3d+vrml":{source:"apache",compressible:!1,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:!0,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"],compressible:null},"text/cache-manifest":{source:"iana",compressible:!0,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"],compressible:null},"text/css":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["css"]},"text/csv":{source:"iana",compressible:!0,extensions:["csv"]},"text/html":{source:"iana",compressible:!0,extensions:["html","htm","shtml"]},"text/markdown":{source:"iana",compressible:!0,extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"],compressible:null},"text/n3":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["n3"]},"text/plain":{source:"iana",compressible:!0,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/prs.lines.tag":{source:"iana",extensions:["dsc"],compressible:null},"text/richtext":{source:"iana",compressible:!0,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"text/sgml":{source:"iana",extensions:["sgml","sgm"],compressible:null},"text/shex":{source:"iana",extensions:["shex"],compressible:null},"text/spdx":{source:"iana",extensions:["spdx"],compressible:null},"text/tab-separated-values":{source:"iana",compressible:!0,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"],compressible:null},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"],compressible:null},"text/uri-list":{source:"iana",compressible:!0,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:!0,extensions:["vcard"]},"text/vnd.curl":{source:"iana",extensions:["curl"],compressible:null},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"],compressible:null},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"],compressible:null},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"],compressible:null},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"],compressible:null},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"],compressible:null},"text/vnd.fly":{source:"iana",extensions:["fly"],compressible:null},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"],compressible:null},"text/vnd.graphviz":{source:"iana",extensions:["gv"],compressible:null},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"],compressible:null},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"],compressible:null},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"],compressible:null},"text/vnd.wap.wml":{source:"iana",extensions:["wml"],compressible:null},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"],compressible:null},"text/vtt":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"],compressible:null},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"],compressible:null},"text/x-component":{source:"nginx",extensions:["htc"],compressible:null},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"],compressible:null},"text/x-java-source":{source:"apache",extensions:["java"],compressible:null},"text/x-nfo":{source:"apache",extensions:["nfo"],compressible:null},"text/x-opml":{source:"apache",extensions:["opml"],compressible:null},"text/x-pascal":{source:"apache",extensions:["p","pas"],compressible:null},"text/x-setext":{source:"apache",extensions:["etx"],compressible:null},"text/x-sfv":{source:"apache",extensions:["sfv"],compressible:null},"text/x-uuencode":{source:"apache",extensions:["uu"],compressible:null},"text/x-vcalendar":{source:"apache",extensions:["vcs"],compressible:null},"text/x-vcard":{source:"apache",extensions:["vcf"],compressible:null},"text/xml":{source:"iana",compressible:!0,extensions:["xml"]},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"],compressible:null},"video/3gpp2":{source:"iana",extensions:["3g2"],compressible:null},"video/h261":{source:"iana",extensions:["h261"],compressible:null},"video/h263":{source:"iana",extensions:["h263"],compressible:null},"video/h264":{source:"iana",extensions:["h264"],compressible:null},"video/iso.segment":{source:"iana",extensions:["m4s"],compressible:null},"video/jpeg":{source:"iana",extensions:["jpgv"],compressible:null},"video/jpm":{source:"apache",extensions:["jpm","jpgm"],compressible:null},"video/mj2":{source:"iana",extensions:["mj2","mjp2"],compressible:null},"video/mp2t":{source:"iana",extensions:["ts"],compressible:null},"video/mp4":{source:"iana",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mpeg":{source:"iana",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/ogg":{source:"iana",compressible:!1,extensions:["ogv"]},"video/quicktime":{source:"iana",compressible:!1,extensions:["qt","mov"]},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"],compressible:null},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"],compressible:null},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"],compressible:null},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"],compressible:null},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"],compressible:null},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"],compressible:null},"video/vnd.fvt":{source:"iana",extensions:["fvt"],compressible:null},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"],compressible:null},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"],compressible:null},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"],compressible:null},"video/vnd.vivo":{source:"iana",extensions:["viv"],compressible:null},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"],compressible:null},"video/x-fli":{source:"apache",extensions:["fli"],compressible:null},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"],compressible:null},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"],compressible:null},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"],compressible:null},"video/x-ms-vob":{source:"apache",extensions:["vob"],compressible:null},"video/x-ms-wm":{source:"apache",extensions:["wm"],compressible:null},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"],compressible:null},"video/x-ms-wvx":{source:"apache",extensions:["wvx"],compressible:null},"video/x-msvideo":{source:"apache",extensions:["avi"],compressible:null},"video/x-sgi-movie":{source:"apache",extensions:["movie"],compressible:null},"video/x-smv":{source:"apache",extensions:["smv"],compressible:null},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"],compressible:null}},x4={},x6={},x8=!1,x7=class extends lX{constructor(e){super(),e&&Object.assign(this,e)}},x9=e=>{class t extends x7{_tag=e}return t.prototype.name=e,t},ye=(e,t=2)=>{let s=cB(e);return gQ(g2(bf,e=>c9(s,Math.pow(t,e))))},yt=e=>gK(bf,()=>e);class ys extends x7{constructor(e,t){super({reason:t?`Expected route config to have a ${t} for key ${e} but none was found.`:`Encountered an invalid route config during backfilling. ${e} was not found.`}),this._tag="InvalidRouteConfig",this.name="InvalidRouteConfigError"}}class yn extends x7{constructor(e){super({reason:`Could not determine type for ${e}`}),this._tag="UnknownFileType",this.name="UnknownFileTypeError"}}class yi extends x7{constructor(e,t){super({reason:`File type ${e} not allowed for ${t}`}),this._tag="InvalidFileType",this.name="InvalidFileTypeError"}}class yr extends x7{constructor(e){super({reason:`Invalid file size: ${e}`}),this._tag="InvalidFileSize",this.name="InvalidFileSizeError"}}class ya extends x7{constructor(e){super({reason:`Failed to parse '${e}' as a URL.`}),this._tag="InvalidURL",this.name="InvalidURLError"}}class yo extends x7{constructor(...e){super(...e),this._tag="RetryError",this.name="RetryError"}}class yl extends x7{constructor(...e){super(...e),this._tag="FetchError",this.name="FetchError"}}class yc extends x7{constructor(...e){super(...e),this._tag="InvalidJsonError",this.name="InvalidJsonError"}}class yu extends x7{getMessage(){return W(this.json)&&"string"==typeof this.json.message?this.json.message:this.message}constructor(...e){super(...e),this._tag="BadRequestError",this.name="BadRequestError"}}function yp(e){return"image"===e?"4MB":"video"===e?"16MB":"audio"===e||"blob"===e?"8MB":"pdf"===e?"4MB":"text"===e?"64KB":"4MB"}let ym=e=>{if(Array.isArray(e))return oX(e.reduce((e,t)=>(e[t]={maxFileSize:yp(t),maxFileCount:1,minFileCount:1,contentDisposition:"inline"},e),{}));let t={};for(let s of yx(e)){let n=e[s];if(!n)return oO(new ys(s));let i={maxFileSize:yp(s),maxFileCount:1,minFileCount:1,contentDisposition:"inline"};t[s]={...i,...n}}return oX(t)},yh=(e,t)=>{let s=function(e){if(!e||"string"!=typeof e)return!1;let t=(function(e){let t=e.lastIndexOf(".");return t<0?"":e.substring(t)})("x."+e).toLowerCase().substring(1);return!!t&&((function(e,t){if(x8)return;x8=!0;let s=["nginx","apache",void 0,"iana"];Object.keys(x5).forEach(n=>{let i=x5[n],r=i.extensions;if(r?.length)for(let a of(e[n]=r,r)){if(t[a]){let e=s.indexOf(x5[t[a]].source),n=s.indexOf(i.source);if("application/octet-stream"!==t[a]&&(e>n||e===n&&t[a].startsWith("application/")))continue}t[a]=n}})}(x4,x6),x6)[t]||!1)}(e);if(!s)return t.includes("blob")?oX("blob"):oO(new yn(e));if(t.some(e=>e.includes("/"))&&t.includes(s))return oX(s);let n="application/pdf"===s.toLowerCase()?"pdf":s.split("/")[0];return t.includes(n)?oX(n):t.includes("blob")?oX("blob"):oO(new yi(n,e))};function yf(e){let t="https://uploadthing.com";return xQ.env.CUSTOM_INFRA_URL&&(t=xQ.env.CUSTOM_INFRA_URL),`${t}${e}`}let yd=["B","KB","MB","GB"],yg=e=>{let t=RegExp(`^(\\d+)(\\.\\d+)?\\s*(${yd.join("|")})$`,"i"),s=e.match(t);if(!s)return oO(new yr(e));let n=parseFloat(s[1]),i=s[3].toUpperCase();return oX(Math.floor(n*Math.pow(1024,yd.indexOf(i))))},yb=e=>{if(0===e||-1===e)return"0B";let t=Math.floor(Math.log(e)/Math.log(1e3));return`${(e/Math.pow(1e3,t)).toFixed(2)}${yd[t]}`};function yx(e){return Object.keys(e)}function yy(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}let yv=e=>xC(function*(){let t="undefined"!=typeof window?window.location.origin:xQ.env?.VERCEL_URL?`https://${xQ.env.VERCEL_URL}`:"http://localhost:3000",s=yield*mE({try:()=>new URL(e??"/api/uploadthing",t),catch:()=>new ya(e??"/api/uploadthing")});return"/"===s.pathname&&(s.pathname="/api/uploadthing"),s}),y_={BAD_REQUEST:400,NOT_FOUND:404,FORBIDDEN:403,INTERNAL_SERVER_ERROR:500,INTERNAL_CLIENT_ERROR:500,TOO_LARGE:413,TOO_SMALL:400,TOO_MANY_FILES:400,KEY_TOO_LONG:400,URL_GENERATION_FAILED:500,UPLOAD_FAILED:500,MISSING_ENV:500,FILE_LIMIT_EXCEEDED:500};class yw extends x7{constructor(e){let t="string"==typeof e?{code:"INTERNAL_SERVER_ERROR",message:e}:e;super({message:t.message??function(e,t){return"string"==typeof e?e:e instanceof Error||e&&"object"==typeof e&&"message"in e&&"string"==typeof e.message?e.message:t??"An unknown error occurred"}(t.cause,t.code)}),this._tag="UploadThingError",this.name="UploadThingError",this.code=t.code,this.data=t.data,t.cause instanceof Error?this.cause=t.cause:yy(t.cause)&&"number"==typeof t.cause.status&&"string"==typeof t.cause.statusText?this.cause=Error(`Response ${t.cause.status} ${t.cause.statusText}`):"string"==typeof t.cause?this.cause=Error(t.cause):this.cause=t.cause}static toObject(e){return{code:e.code,message:e.message,data:e.data}}static serialize(e){return JSON.stringify(yw.toObject(e))}}class yS extends th("uploadthing/FetchContext")(){}let yk=(e,t)=>oF(yS,({fetch:s,baseHeaders:n})=>{let i=new Headers(t?.headers??[]);for(let[e,t]of Object.entries(n))"string"==typeof t&&i.set(e,t);let r={url:e.toString(),method:t?.method,body:t?.body,headers:Object.fromEntries(i)};return mJ({try:()=>s(e,{...t,headers:i}),catch:e=>new yl({error:e instanceof Error?{...e,name:e.name,message:e.message,stack:e.stack}:e,input:r})}).pipe(oq(e=>Object.assign(e,{requestUrl:r.url})),xL("fetch",{attributes:{reqInfo:r}}))}),yO=e=>mJ({try:async()=>({json:await e.json(),ok:e.ok,status:e.status}),catch:t=>new yc({error:t,input:e.requestUrl})}).pipe(mF(({ok:e})=>e,({json:t,status:s})=>new yu({status:s,message:`Request to ${e.requestUrl} failed with status ${s}`,json:t})),oq(({json:e})=>e),xL("parseJson")),yE=e=>mJ({try:()=>e.json(),catch:t=>new yc({error:t,input:e.url})}).pipe(xL("parseRequestJson")),yT=()=>E(ye(cQ(10),4),gV(yt(cX(1))),gW(bh),g9(ut(cZ(1)))),yR="hmac-sha256=",yI={name:"HMAC",hash:"SHA-256"},yN=async(e,t)=>{let s=new TextEncoder,n=await crypto.subtle.importKey("raw",s.encode(t),yI,!1,["sign"]),i=await crypto.subtle.sign(yI,n,s.encode(e)).then(e=>Buffer.from(e).toString("hex"));return`${yR}${i}`},yF=async(e,t,s)=>{let n=t?.slice(yR.length);if(!n)return!1;let i=new TextEncoder,r=await crypto.subtle.importKey("raw",i.encode(s),yI,!1,["verify"]);return await crypto.subtle.verify(yI,r,Uint8Array.from(Buffer.from(n,"hex")),i.encode(e))},yA=Symbol.for("effect/BigDecimal"),yj={[yA]:yA,[ea](){let e=yD(this);return E(eo(e.value),ec(em(e.scale)),eb(this))},[ex](e){return yM(e)&&yq(this,e)},toString(){return`BigDecimal(${yK(this)})`},toJSON(){return{_id:"BigDecimal",value:String(this.value),scale:this.scale}},[eS](){return this.toJSON()},pipe(){return eR(this,arguments)}},yM=e=>q(e,yA),yC=(e,t)=>{let s=Object.create(yj);return s.value=e,s.scale=t,s},yL=(e,t)=>{if(e!==yU&&e%yP===yU)throw RangeError("Value must be normalized");let s=yC(e,t);return s.normalized=s,s},yU=BigInt(0),yP=BigInt(10),y$=yL(yU,0),yD=e=>{if(void 0===e.normalized){if(e.value===yU)e.normalized=y$;else{let t=`${e.value}`,s=0;for(let e=t.length-1;e>=0;e--)if("0"===t[e])s++;else break;0===s&&(e.normalized=e);let n=BigInt(t.substring(0,t.length-s)),i=e.scale-s;e.normalized=yL(n,i)}}return e.normalized},yz=(e,t)=>t>e.scale?yC(e.value*yP**BigInt(t-e.scale),t):t<e.scale?yC(e.value/yP**BigInt(e.scale-t),t):e,yB=tf((e,t)=>e.scale>t.scale?yz(t,e.scale).value===e.value:e.scale<t.scale?yz(e,t.scale).value===t.value:e.value===t.value),yq=v(2,(e,t)=>yB(e,t)),yK=e=>{let t,s;let n=e.value<yU,i=n?`${e.value}`.substring(1):`${e.value}`;if(e.scale>=i.length)t="0",s="0".repeat(e.scale-i.length)+i;else{let n=i.length-e.scale;if(n>i.length){let e=n-i.length;t=`${i}${"0".repeat(e)}`,s=""}else s=i.slice(n),t=i.slice(0,n)}let r=""===s?t:`${t}.${s}`;return n?`-${r}`:r},yJ=Symbol.for("effect/Encoding/errors/Decode"),yV=(e,t)=>{let s={_tag:"DecodeException",[yJ]:yJ,input:e};return F(t)&&(s.message=t),s};function yG(e){if(e>=yW.length)throw TypeError(`Invalid character ${String.fromCharCode(e)}`);let t=yW[e];if(255===t)throw TypeError(`Invalid character ${String.fromCharCode(e)}`);return t}let yH=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],yW=[255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,62,255,255,255,63,52,53,54,55,56,57,58,59,60,61,255,255,255,0,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],yY="effect/Redacted",yQ=N("effect/Redacted/redactedRegistry",()=>new WeakMap),yX=Symbol.for(yY),yZ={[yX]:{_A:e=>e},pipe(){return eR(this,arguments)},toString:()=>"<redacted>",toJSON:()=>"<redacted>",[ea](){return E(eo(yY),ec(eo(yQ.get(this))),eb(this))},[ex](e){return y0(e)&&ey(yQ.get(this),yQ.get(e))}},y0=e=>q(e,yX),y1=Symbol.for("effect/Secret"),y2=Symbol.for("@effect/schema/ArbitraryHookId"),y3=(e,t,s,n)=>(n.isSuspend?e.oneof({depthSize:1},e.constant([]),e.array(e.tuple(t,s),{minLength:1,maxLength:2})):e.array(e.tuple(t,s))).map(e=>{let t={};for(let[s,n]of e)t[s]=n;return t}),y5=(e,t)=>{let s=vs(t.constraints,vt(e));return y4(e.from,s?{...t,constraints:s}:t)},y4=(e,t)=>{let s=(null)(e);if(Option.isSome(s))switch(e._tag){case"Declaration":return s.value(...e.typeParameters.map(e=>y4(e,t)));case"Refinement":return s.value(y5(e,t));default:return s.value()}switch(e._tag){case"Declaration":throw Error(errors_.getArbitraryErrorMessage(`a declaration without annotations (${e})`));case"Literal":return t=>t.constant(e.literal);case"UniqueSymbol":return t=>t.constant(e.symbol);case"UndefinedKeyword":case"VoidKeyword":return e=>e.constant(void 0);case"NeverKeyword":return()=>{throw Error(errors_.getArbitraryErrorMessage("`never`"))};case"UnknownKeyword":case"AnyKeyword":return e=>e.anything();case"StringKeyword":return e=>t.constraints&&"StringConstraints"===t.constraints._tag?e.string(t.constraints.constraints):e.string();case"NumberKeyword":return e=>{if(t.constraints)switch(t.constraints._tag){case"NumberConstraints":return e.float(t.constraints.constraints);case"IntegerConstraints":return e.integer(t.constraints.constraints)}return e.float()};case"BooleanKeyword":return e=>e.boolean();case"BigIntKeyword":return e=>t.constraints&&"BigIntConstraints"===t.constraints._tag?e.bigInt(t.constraints.constraints):e.bigInt();case"SymbolKeyword":return e=>e.string().map(e=>Symbol.for(e));case"ObjectKeyword":return e=>e.oneof(e.object(),e.array(e.anything()));case"TemplateLiteral":return t=>{let s=t.string({maxLength:5}),n=t.float({noDefaultInfinity:!0}).filter(e=>!Number.isNaN(e)),i=[t.constant(e.head)];for(let r of e.spans)AST.isStringKeyword(r.type)?i.push(s):i.push(n),i.push(t.constant(r.literal));return t.tuple(...i).map(e=>e.join(""))};case"TupleType":{let s=[],n=!1;for(let i of e.elements)s.push(y4(i.type,t)),i.isOptional&&(n=!0);let i=e.rest.map(e=>y4(e,t));return r=>{let a=r.tuple(...s.map(e=>e(r)));if(n){let t=r.tuple(...e.elements.map(e=>e.isOptional?r.boolean():r.constant(!0)));a=a.chain(e=>t.map(t=>{for(let[s,n]of t.reverse().entries())n||e.splice(t.length-s,1);return e}))}if(Arr.isNonEmptyReadonlyArray(i)){let[e,...s]=i,n=e(r),o=t.constraints;a=a.chain(e=>{let s=r.array(n);return t.isSuspend?s=r.oneof({depthSize:1},r.constant([]),r.array(n,{minLength:1,maxLength:2})):o&&"ArrayConstraints"===o._tag&&(s=r.array(n,o.constraints)),s.map(t=>[...e,...t])});for(let e=0;e<s.length;e++)a=a.chain(t=>s[e](r).map(e=>[...t,e]))}return a}}case"TypeLiteral":{let s=e.propertySignatures.map(e=>y4(e.type,t)),n=e.indexSignatures.map(e=>[y4(e.parameter,t),y4(e.type,t)]);return i=>{let r={},a=[];for(let t=0;t<s.length;t++){let n=e.propertySignatures[t],o=n.name;n.isOptional||a.push(o),r[o]=s[t](i)}let o=i.record(r,{requiredKeys:a});for(let e=0;e<n.length;e++){let s=n[e][0](i),r=n[e][1](i);o=o.chain(e=>y3(i,s,r,t).map(t=>({...t,...e})))}return o}}case"Union":{let s=e.types.map(e=>y4(e,t));return e=>e.oneof({depthSize:1},...s.map(t=>t(e)))}case"Enums":if(0===e.enums.length)throw Error(errors_.getArbitraryErrorMessage("an empty enum"));return t=>t.oneof(...e.enums.map(([e,s])=>t.constant(s)));case"Refinement":{let s=y5(e,t);return t=>s(t).filter(t=>Option.isNone(e.filter(t,AST.defaultParseOption,e)))}case"Suspend":{let s=util_.memoizeThunk(()=>y4(e.f(),{...t,isSuspend:!0}));return e=>e.constant(null).chain(()=>s()(e))}case"Transformation":return y4(e.to,t)}};class y6{_tag="NumberConstraints";constraints;constructor(e){this.constraints={},Predicate.isNumber(e.min)&&(this.constraints.min=Math.fround(e.min)),Predicate.isNumber(e.max)&&(this.constraints.max=Math.fround(e.max)),Predicate.isBoolean(e.noNaN)&&(this.constraints.noNaN=e.noNaN),Predicate.isBoolean(e.noDefaultInfinity)&&(this.constraints.noDefaultInfinity=e.noDefaultInfinity)}}class y8{_tag="StringConstraints";constraints;constructor(e){this.constraints={},Predicate.isNumber(e.minLength)&&(this.constraints.minLength=e.minLength),Predicate.isNumber(e.maxLength)&&(this.constraints.maxLength=e.maxLength)}}class y7{_tag="IntegerConstraints";constraints;constructor(e){this.constraints={},Predicate.isNumber(e.min)&&(this.constraints.min=e.min),Predicate.isNumber(e.max)&&(this.constraints.max=e.max)}}class y9{_tag="ArrayConstraints";constraints;constructor(e){this.constraints={},Predicate.isNumber(e.minLength)&&(this.constraints.minLength=e.minLength),Predicate.isNumber(e.maxLength)&&(this.constraints.maxLength=e.maxLength)}}class ve{_tag="BigIntConstraints";constraints;constructor(e){this.constraints={},Predicate.isBigInt(e.min)&&(this.constraints.min=e.min),Predicate.isBigInt(e.max)&&(this.constraints.max=e.max)}}let vt=e=>{let t=e.annotations[AST.TypeAnnotationId],s=e.annotations[AST.JSONSchemaAnnotationId];switch(t){case filters_.IntTypeId:return new y7({});case filters_.GreaterThanTypeId:case filters_.GreaterThanOrEqualToTypeId:case filters_.LessThanTypeId:case filters_.LessThanOrEqualToTypeId:case filters_.BetweenTypeId:return new y6({min:s.exclusiveMinimum??s.minimum,max:s.exclusiveMaximum??s.maximum});case filters_.GreaterThanBigintTypeId:case filters_.GreaterThanOrEqualToBigIntTypeId:case filters_.LessThanBigIntTypeId:case filters_.LessThanOrEqualToBigIntTypeId:case filters_.BetweenBigintTypeId:return new ve(e.annotations[t]);case filters_.MinLengthTypeId:case filters_.MaxLengthTypeId:case filters_.LengthTypeId:return new y8(s);case filters_.MinItemsTypeId:case filters_.MaxItemsTypeId:case filters_.ItemsCountTypeId:return new y9({minLength:s.minItems,maxLength:s.maxItems})}},vs=(e,t)=>{if(void 0===e)return t;if(void 0===t)return e;switch(e._tag){case"ArrayConstraints":if("ArrayConstraints"===t._tag)return new y9({minLength:vi(e.constraints.minLength,t.constraints.minLength),maxLength:vr(e.constraints.maxLength,t.constraints.maxLength)});break;case"NumberConstraints":switch(t._tag){case"NumberConstraints":return new y6({min:vi(e.constraints.min,t.constraints.min),max:vr(e.constraints.max,t.constraints.max),noNaN:vn(e.constraints.noNaN,t.constraints.noNaN),noDefaultInfinity:vn(e.constraints.noDefaultInfinity,t.constraints.noDefaultInfinity)});case"IntegerConstraints":return new y7({min:vi(e.constraints.min,t.constraints.min),max:vr(e.constraints.max,t.constraints.max)})}break;case"BigIntConstraints":if("BigIntConstraints"===t._tag)return new ve({min:vi(e.constraints.min,t.constraints.min),max:vr(e.constraints.max,t.constraints.max)});break;case"StringConstraints":if("StringConstraints"===t._tag)return new y8({minLength:vi(e.constraints.minLength,t.constraints.minLength),maxLength:vr(e.constraints.maxLength,t.constraints.maxLength)});break;case"IntegerConstraints":switch(t._tag){case"NumberConstraints":case"IntegerConstraints":return new y7({min:vi(e.constraints.min,t.constraints.min),max:vr(e.constraints.max,t.constraints.max)})}}},vn=(e,t)=>void 0===e?t:void 0===t?e:e||t;function vi(e,t){return void 0===e?t:void 0===t?e:e<=t?t:e}function vr(e,t){return void 0===e?t:void 0===t?e:e<=t?e:t}let va=(e,t)=>{switch(t._tag){case"StringKeyword":case"TemplateLiteral":return Object.keys(e);case"SymbolKeyword":return Object.getOwnPropertySymbols(e);case"Refinement":return va(e,t.from)}},vo=e=>Object.keys(e).concat(Object.getOwnPropertySymbols(e)),vl=e=>{let t,s=!1;return()=>(s||(t=e(),s=!0),t)},vc=e=>{if(F(e))return JSON.stringify(e);if(A(e)||null==e||j(e)||C(e)||G(e))return String(e);if(M(e))return String(e)+"n";if(!Array.isArray(e)&&q(e,"toString")&&L(e.toString)&&e.toString!==Object.prototype.toString)return e.toString();try{if(JSON.stringify(e),Array.isArray(e))return`[${e.map(vc).join(",")}]`;return`{${vo(e).map(t=>`${F(t)?JSON.stringify(t):String(t)}:${vc(e[t])}`).join(",")}}`}catch(t){return String(e)}},vu=e=>"string"==typeof e?JSON.stringify(e):String(e),vp=e=>`Duplicate property signature ${vc(e)}`,vm=e=>`Duplicate index signature for type \`${e}\``,vh=e=>`Duplicate property signature transformation ${vc(e)}`,vf=(e,t)=>`${e}: ${t}`,vd=Symbol.for("@effect/schema/annotation/Type"),vg=Symbol.for("@effect/schema/annotation/Message"),vb=Symbol.for("@effect/schema/annotation/Identifier"),vx=Symbol.for("@effect/schema/annotation/Title"),vy=Symbol.for("@effect/schema/annotation/Description"),vv=Symbol.for("@effect/schema/annotation/Examples"),v_=Symbol.for("@effect/schema/annotation/Default"),vw=Symbol.for("@effect/schema/annotation/JSONSchema"),vS=Symbol.for("@effect/schema/annotation/Documentation"),vk=Symbol.for("@effect/schema/annotation/Concurrency"),vO=Symbol.for("@effect/schema/annotation/Batching"),vE=Symbol.for("@effect/schema/annotation/Surrogate"),vT=Symbol.for("@effect/schema/annotation/ParseIssueTitle"),vR=v(2,(e,t)=>Object.prototype.hasOwnProperty.call(e.annotations,t)?e4(e.annotations[t]):tT()),vI=vR(vg),vN=vR(vx),vF=vR(vb),vA=vR(vy),vj=vR(vk),vM=vR(vO),vC=vR(vT),vL=vR(vE),vU=Symbol.for("@effect/schema/annotation/JSONIdentifier"),vP=vR(vU);class v${typeParameters;decodeUnknown;encodeUnknown;annotations;_tag="Declaration";constructor(e,t,s,n={}){this.typeParameters=e,this.decodeUnknown=t,this.encodeUnknown=s,this.annotations=n}toString(e=!1){return tI(_K(this,e),()=>"<declaration schema>")}toJSON(){return{_tag:this._tag,typeParameters:this.typeParameters.map(e=>e.toJSON()),annotations:_L(this.annotations)}}}let vD=e=>t=>t._tag===e;class vz{literal;annotations;_tag="Literal";constructor(e,t={}){this.literal=e,this.annotations=t}toString(e=!1){return tI(_K(this,e),()=>vc(this.literal))}toJSON(){return{_tag:this._tag,literal:M(this.literal)?String(this.literal):this.literal,annotations:_L(this.annotations)}}}let vB=vD("Literal"),vq=new vz(null,{[vb]:"null"});class vK{symbol;annotations;_tag="UniqueSymbol";constructor(e,t={}){this.symbol=e,this.annotations=t}toString(e=!1){return tI(_K(this,e),()=>vc(this.symbol))}toJSON(){return{_tag:this._tag,symbol:String(this.symbol),annotations:_L(this.annotations)}}}class vJ{annotations;_tag="UndefinedKeyword";constructor(e={}){this.annotations=e}toString(e=!1){return _q(this,e)}toJSON(){return{_tag:this._tag,annotations:_L(this.annotations)}}}let vV=new vJ({[vx]:"undefined"});class vG{annotations;_tag="NeverKeyword";constructor(e={}){this.annotations=e}toString(e=!1){return _q(this,e)}toJSON(){return{_tag:this._tag,annotations:_L(this.annotations)}}}let vH=new vG({[vx]:"never"});class vW{annotations;_tag="UnknownKeyword";constructor(e={}){this.annotations=e}toString(e=!1){return _q(this,e)}toJSON(){return{_tag:this._tag,annotations:_L(this.annotations)}}}let vY=new vW({[vx]:"unknown"});class vQ{annotations;_tag="AnyKeyword";constructor(e={}){this.annotations=e}toString(e=!1){return _q(this,e)}toJSON(){return{_tag:this._tag,annotations:_L(this.annotations)}}}let vX=new vQ({[vx]:"any"});class vZ{annotations;_tag="StringKeyword";constructor(e={}){this.annotations=e}toString(e=!1){return _q(this,e)}toJSON(){return{_tag:this._tag,annotations:_L(this.annotations)}}}let v0=new vZ({[vx]:"string",[vy]:"a string"}),v1=vD("StringKeyword");class v2{annotations;_tag="NumberKeyword";constructor(e={}){this.annotations=e}toString(e=!1){return _q(this,e)}toJSON(){return{_tag:this._tag,annotations:_L(this.annotations)}}}let v3=new v2({[vx]:"number",[vy]:"a number"}),v5=vD("NumberKeyword");class v4{annotations;_tag="BooleanKeyword";constructor(e={}){this.annotations=e}toString(e=!1){return _q(this,e)}toJSON(){return{_tag:this._tag,annotations:_L(this.annotations)}}}let v6=new v4({[vx]:"boolean",[vy]:"a boolean"});class v8{annotations;_tag="BigIntKeyword";constructor(e={}){this.annotations=e}toString(e=!1){return _q(this,e)}toJSON(){return{_tag:this._tag,annotations:_L(this.annotations)}}}let v7=vD("SymbolKeyword");class v9{type;isOptional;constructor(e,t){this.type=e,this.isOptional=t}toJSON(){return{type:this.type.toJSON(),isOptional:this.isOptional}}toString(){return String(this.type)+(this.isOptional?"?":"")}}class _e{elements;rest;isReadonly;annotations;_tag="TupleType";constructor(e,t,s,n={}){this.elements=e,this.rest=t,this.isReadonly=s,this.annotations=n;let i=!1,r=!1;for(let t of e)if(t.isOptional)i=!0;else if(i){r=!0;break}if(r||i&&t.length>1)throw Error("A required element cannot follow an optional element. ts(1257)")}toString(e=!1){return tI(_K(this,e),()=>_t(this))}toJSON(){return{_tag:this._tag,elements:this.elements.map(e=>e.toJSON()),rest:this.rest.map(e=>e.toJSON()),isReadonly:this.isReadonly,annotations:_L(this.annotations)}}}let _t=e=>{let t=e.elements.map(String).join(", ");return tY(e.rest,{onEmpty:()=>`readonly [${t}]`,onNonEmpty:(s,n)=>{let i=String(s),r=i.includes(" | ")?`(${i})`:i;if(n.length>0){let s=n.map(String).join(", ");return e.elements.length>0?`readonly [${t}, ...${r}[], ${s}]`:`readonly [...${r}[], ${s}]`}return e.elements.length>0?`readonly [${t}, ...${r}[]]`:`ReadonlyArray<${i}>`}})};class _s{name;type;isOptional;isReadonly;annotations;constructor(e,t,s,n,i={}){this.name=e,this.type=t,this.isOptional=s,this.isReadonly=n,this.annotations=i}toJSON(){return{name:String(this.name),type:this.type.toJSON(),isOptional:this.isOptional,isReadonly:this.isReadonly,annotations:_L(this.annotations)}}}let _n=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return!0;case"Refinement":return _n(e.from)}return!1};class _i{type;isReadonly;parameter;constructor(e,t,s){if(this.type=t,this.isReadonly=s,_n(e))this.parameter=e;else throw Error("An index signature parameter type must be `string`, `symbol`, a template literal type or a refinement of the previous types")}toJSON(){return{parameter:this.parameter.toJSON(),type:this.type.toJSON(),isReadonly:this.isReadonly}}}class _r{annotations;_tag="TypeLiteral";propertySignatures;indexSignatures;constructor(e,t,s={}){this.annotations=s;let n={};for(let t=0;t<e.length;t++){let s=e[t].name;if(Object.prototype.hasOwnProperty.call(n,s))throw Error(vp(s));n[s]=null}let i={string:!1,symbol:!1};for(let e=0;e<t.length;e++){let s=_B(t[e].parameter);if(v1(s)){if(i.string)throw Error(vm("string"));i.string=!0}else if(v7(s)){if(i.symbol)throw Error(vm("symbol"));i.symbol=!0}}this.propertySignatures=_P(e),this.indexSignatures=_$(t)}toString(e=!1){return tI(_K(this,e),()=>_a(this))}toJSON(){return{_tag:this._tag,propertySignatures:this.propertySignatures.map(e=>e.toJSON()),indexSignatures:this.indexSignatures.map(e=>e.toJSON()),annotations:_L(this.annotations)}}}let _a=e=>{let t=e.propertySignatures.map(e=>String(e.name)+(e.isOptional?"?":"")+": "+e.type).join("; ");if(e.indexSignatures.length>0){let s=e.indexSignatures.map(e=>`[x: ${_B(e.parameter)}]: ${e.type}`).join("; ");return e.propertySignatures.length>0?`{ ${t}; ${s} }`:`{ ${s} }`}return e.propertySignatures.length>0?`{ ${t} }`:"{}"},_o=e=>e.filter(e=>e!==vH),_l=sa(tJ(tK,e=>{switch(e._tag){case"AnyKeyword":return 0;case"UnknownKeyword":return 1;case"ObjectKeyword":return 2;case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":return 3}return 4})),_c={string:"StringKeyword",number:"NumberKeyword",boolean:"BooleanKeyword",bigint:"BigIntKeyword"},_u=e=>sx(e,e=>_d(e)?_u(e.types):[e]),_p=e=>{let t=_l(e),s=[],n={},i=[];for(let e of t)switch(e._tag){case"NeverKeyword":break;case"AnyKeyword":return[vX];case"UnknownKeyword":return[vY];case"ObjectKeyword":case"UndefinedKeyword":case"VoidKeyword":case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":n[e._tag]||(n[e._tag]=e,s.push(e));break;case"Literal":{let t=typeof e.literal;switch(t){case"string":case"number":case"bigint":case"boolean":n[_c[t]]||i.includes(e.literal)||(i.push(e.literal),s.push(e));break;case"object":i.includes(e.literal)||(i.push(e.literal),s.push(e))}break}case"UniqueSymbol":n.SymbolKeyword||i.includes(e.symbol)||(i.push(e.symbol),s.push(e));break;case"TupleType":n.ObjectKeyword||s.push(e);break;case"TypeLiteral":0===e.propertySignatures.length&&0===e.indexSignatures.length?n["{}"]||(n["{}"]=e,s.push(e)):n.ObjectKeyword||s.push(e);break;default:s.push(e)}return s};class _m{types;annotations;static make=(e,t)=>{let s=[],n=new Set;for(let t=0;t<e.length;t++){let i=e[t];i===vH||n.has(i)||(n.add(i),s.push(i))}return _m.union(s,t)};static members=(e,t)=>_m.union(_o(e),t);static unify=(e,t)=>_m.union(_p(_u(e)),t);static union=(e,t)=>_f(e)?new _m(e,t):1===e.length?e[0]:vH;_tag="Union";constructor(e,t={}){this.types=e,this.annotations=t}toString(e=!1){return tI(_K(this,e),()=>this.types.map(String).join(" | "))}toJSON(){return{_tag:this._tag,types:this.types.map(e=>e.toJSON()),annotations:_L(this.annotations)}}}let _h=(e,t)=>e.map(t),_f=e=>e.length>1,_d=vD("Union"),_g=N(Symbol.for("@effect/schema/AST/toJSONMemoMap"),()=>new WeakMap);class _b{f;annotations;_tag="Suspend";constructor(e,t={}){this.f=e,this.annotations=t,this.f=vl(e)}toString(e=!1){return _K(this,e).pipe(tN(()=>tU(tM(this.f)(),t=>_K(t,e))),tI(()=>"<suspended schema>"))}toJSON(){let e=this.f(),t=_g.get(e);return t||(_g.set(e,{_tag:this._tag}),t={_tag:this._tag,ast:e.toJSON(),annotations:_L(this.annotations)},_g.set(e,t)),t}}class _x{from;filter;annotations;_tag="Refinement";constructor(e,t,s={}){this.from=e,this.filter=t,this.annotations=s}toString(e=!1){return tI(_K(this,e),()=>"<refinement schema>")}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),annotations:_L(this.annotations)}}}let _y=vD("Refinement"),_v={};class __{from;to;transformation;annotations;_tag="Transformation";constructor(e,t,s,n={}){this.from=e,this.to=t,this.transformation=s,this.annotations=n}toString(e=!1){return tI(_K(this,e),()=>`(${String(this.from)} <-> ${String(this.to)})`)}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),to:this.to.toJSON(),annotations:_L(this.annotations)}}}class _w{decode;encode;_tag="FinalTransformation";constructor(e,t){this.decode=e,this.encode=t}}class _S{_tag="ComposeTransformation"}class _k{from;to;decode;encode;constructor(e,t,s,n){this.from=e,this.to=t,this.decode=s,this.encode=n}}class _O{propertySignatureTransformations;_tag="TypeLiteralTransformation";constructor(e){this.propertySignatureTransformations=e;let t={},s={};for(let n of e){let e=n.from;if(t[e])throw Error(vh(e));t[e]=!0;let i=n.to;if(s[i])throw Error(vh(i));s[i]=!0}}}let _E=(e,t)=>{let s=Object.getOwnPropertyDescriptors(e);return s.annotations.value={...e.annotations,...t},Object.create(Object.getPrototypeOf(e),s)},_T=e=>{let t=`^${um(e.head)}`;for(let s of e.spans)v1(s.type)?t+=".*":v5(s.type)&&(t+="[+-]?\\d*\\.?\\d+(?:[Ee][+-]?\\d+)?"),t+=um(s.literal);return new RegExp(t+="$")},_R=e=>{switch(e._tag){case"TupleType":{let t=!1,s=[];for(let n of e.elements)n.isOptional&&(t=!0),s.push(n.type);return t&&s.push(vV),s=s.concat(e.rest),_m.make(s)}case"Refinement":return _R(e.from);case"Union":return _m.make(e.types.map(_R));case"Suspend":return _R(e.f())}throw Error(errors_.getAPIErrorMessage("NumberIndexedAccess",`unsupported schema (${e})`))},_I=(e,t)=>{let s=[],n=[],i=e=>{switch(e._tag){case"NeverKeyword":break;case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":case"Refinement":n.push(new _i(e,t,!0));break;case"Literal":if(F(e.literal)||A(e.literal))s.push(new _s(e.literal,t,!1,!0));else throw Error(vf("Record",`unsupported literal (${vc(e.literal)})`));break;case"UniqueSymbol":s.push(new _s(e.symbol,t,!1,!0));break;case"Union":e.types.forEach(i);break;default:throw Error(vf("Record",`unsupported key schema (${e})`))}};return i(e),{propertySignatures:s,indexSignatures:n}},_N=e=>{switch(e._tag){case"TupleType":return!1===e.isReadonly?e:new _e(e.elements,e.rest,!1,e.annotations);case"TypeLiteral":{let t=_M(e.propertySignatures,e=>!1===e.isReadonly?e:new _s(e.name,e.type,e.isOptional,!1,e.annotations)),s=_M(e.indexSignatures,e=>!1===e.isReadonly?e:new _i(e.parameter,e.type,!1));return t===e.propertySignatures&&s===e.indexSignatures?e:new _r(t,s,e.annotations)}case"Union":{let t=_M(e.types,_N);return t===e.types?e:_m.make(t,e.annotations)}case"Suspend":return new _b(()=>_N(e.f()),e.annotations);case"Refinement":{let t=_N(e.from);return t===e.from?e:new _x(t,e.filter,e.annotations)}case"Transformation":{let t=_N(e.from),s=_N(e.to);return t===e.from&&s===e.to?e:new __(t,s,e.transformation,e.annotations)}}return e},_F=e=>{switch(e._tag){case"Declaration":{let t=_M(e.typeParameters,_F);return t===e.typeParameters?e:new v$(t,e.decodeUnknown,e.encodeUnknown,e.annotations)}case"TupleType":{let t=_M(e.elements,e=>{let t=_F(e.type);return t===e.type?e:new v9(t,e.isOptional)}),s=_M(e.rest,_F);return t===e.elements&&s===e.rest?e:new _e(t,s,e.isReadonly,e.annotations)}case"TypeLiteral":{let t=_M(e.propertySignatures,e=>{let t=_F(e.type);return t===e.type?e:new _s(e.name,t,e.isOptional,e.isReadonly)}),s=_M(e.indexSignatures,e=>{let t=_F(e.type);return t===e.type?e:new _i(e.parameter,t,e.isReadonly)});return t===e.propertySignatures&&s===e.indexSignatures?e:new _r(t,s,e.annotations)}case"Union":{let t=_M(e.types,_F);return t===e.types?e:_m.make(t,e.annotations)}case"Suspend":return new _b(()=>_F(e.f()),e.annotations);case"Refinement":{let t=_F(e.from);return t===e.from?e:new _x(t,e.filter,e.annotations)}case"Transformation":return _F(e.to)}return e},_A=e=>tN(vP(e),()=>vF(e)),_j=e=>tR(_A(e),{onNone:()=>void 0,onSome:e=>({[vU]:e})});function _M(e,t){let s=!1,n=tH(e.length);for(let i=0;i<e.length;i++){let r=e[i],a=t(r);a!==r&&(s=!0),n[i]=a}return s?n:e}let _C=e=>{switch(e._tag){case"Declaration":{let t=_M(e.typeParameters,_C);return t===e.typeParameters?e:new v$(t,e.decodeUnknown,e.encodeUnknown,e.annotations)}case"TupleType":{let t=_M(e.elements,e=>{let t=_C(e.type);return t===e.type?e:new v9(t,e.isOptional)}),s=_M(e.rest,_C);return t===e.elements&&s===e.rest?e:new _e(t,s,e.isReadonly,_j(e))}case"TypeLiteral":{let t=_M(e.propertySignatures,e=>{let t=_C(e.type);return t===e.type?e:new _s(e.name,t,e.isOptional,e.isReadonly)}),s=_M(e.indexSignatures,e=>{let t=_C(e.type);return t===e.type?e:new _i(e.parameter,t,e.isReadonly)});return t===e.propertySignatures&&s===e.indexSignatures?e:new _r(t,s,_j(e))}case"Union":{let t=_M(e.types,_C);return t===e.types?e:_m.make(t,_j(e))}case"Suspend":return new _b(()=>_C(e.f()),_j(e));case"Refinement":case"Transformation":return _C(e.from)}return e},_L=e=>{let t={};for(let s of Object.getOwnPropertySymbols(e))t[String(s)]=e[s];return t},_U=e=>{switch(e._tag){case"NeverKeyword":return 0;case"Literal":case"UndefinedKeyword":case"VoidKeyword":case"UniqueSymbol":return 1;case"BooleanKeyword":return 2;case"StringKeyword":case"NumberKeyword":case"BigIntKeyword":case"SymbolKeyword":return 3;case"ObjectKeyword":return 5;case"UnknownKeyword":case"AnyKeyword":return 6;default:return 4}},_P=sa(tJ(tK,e=>_U(e.type))),_$=sa(tJ(tK,e=>{switch(_B(e.parameter)._tag){case"StringKeyword":return 2;case"SymbolKeyword":return 3;case"TemplateLiteral":return 1}})),_D=e=>e.reduce(null,null),_z=e=>{switch(e._tag){case"TupleType":return[2,e.elements.length,e.rest.length];case"TypeLiteral":{let t=e.propertySignatures.length,s=e.indexSignatures.length;return t+s===0?[-4,0,0]:[4,t,s]}case"Declaration":{let t=vL(e);if(Option.isSome(t)){let[e,s,n]=_z(t.value);return[6,s,n]}return[6,0,0]}case"Suspend":return[8,0,0];case"Union":return _D(e.types.map(_z));case"Refinement":{let[t,s,n]=_z(e.from);return[t+1,s,n]}case"Transformation":return _z(e.from);case"ObjectKeyword":return[-2,0,0];case"UnknownKeyword":case"AnyKeyword":return[-4,0,0];default:return null}},_B=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return e;case"Refinement":return _B(e.from)}},_q=(e,t=!1)=>tI(_K(e,t),()=>e._tag),_K=(e,t)=>{if(!t)return vF(e).pipe(tN(()=>vN(e)),tN(()=>vA(e)));{let t=vA(e).pipe(tN(()=>vN(e)));return tR(vF(e),{onNone:()=>t,onSome:e=>tR(t,{onNone:()=>e4(e),onSome:t=>e4(`${e} (${t})`)})})}},_J=Symbol.for("@effect/schema/EquivalenceHookId"),_V=e=>{let t=(null)(e);if(Option.isSome(t))switch(e._tag){case"Declaration":return t.value(...e.typeParameters.map(_V));case"Refinement":return t.value(_V(e.from));default:return t.value()}switch(e._tag){case"NeverKeyword":throw Error(errors_.getEquivalenceErrorMessage("`never`"));case"Transformation":return _V(e.to);case"Declaration":case"Literal":case"StringKeyword":case"TemplateLiteral":case"UniqueSymbol":case"SymbolKeyword":case"UnknownKeyword":case"AnyKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"UndefinedKeyword":case"VoidKeyword":case"Enums":case"ObjectKeyword":return Equal.equals;case"Refinement":return _V(e.from);case"Suspend":{let t=util_.memoizeThunk(()=>_V(e.f()));return(e,s)=>t()(e,s)}case"TupleType":{let t=e.elements.map(e=>_V(e.type)),s=e.rest.map(_V);return Equivalence.make((n,i)=>{let r=n.length;if(r!==i.length)return!1;let a=0;for(;a<Math.min(r,e.elements.length);a++)if(!t[a](n[a],i[a]))return!1;if(Arr.isNonEmptyReadonlyArray(s)){let[e,...t]=s;for(;a<r-t.length;a++)if(!e(n[a],i[a]))return!1;for(let e=0;e<t.length;e++)if(a+=e,!t[e](n[a],i[a]))return!1}return!0})}case"TypeLiteral":{if(0===e.propertySignatures.length&&0===e.indexSignatures.length)return Equal.equals;let t=e.propertySignatures.map(e=>_V(e.type)),s=e.indexSignatures.map(e=>_V(e.type));return Equivalence.make((n,i)=>{let r,a;let o=Object.keys(n),l=Object.getOwnPropertySymbols(n);for(let s=0;s<t.length;s++){let r=e.propertySignatures[s],a=r.name,o=Object.prototype.hasOwnProperty.call(n,a),l=Object.prototype.hasOwnProperty.call(i,a);if(r.isOptional&&o!==l||o&&l&&!t[s](n[a],i[a]))return!1}for(let t=0;t<s.length;t++){let c=e.indexSignatures[t],u=AST.getParameterBase(c.parameter),p=AST.isSymbolKeyword(u);if(p){if(r=r||Object.getOwnPropertySymbols(i),l.length!==r.length)return!1}else if(a=a||Object.keys(i),o.length!==a.length)return!1;let m=p?l:o;for(let e=0;e<m.length;e++){let r=m[e];if(!Object.prototype.hasOwnProperty.call(i,r)||!s[t](n[r],i[r]))return!1}}return!0})}case"Union":{let t=ParseResult.getSearchTree(e.types,!0),s=util_.ownKeys(t.keys),n=s.length;return Equivalence.make((e,i)=>{let r=[];if(n>0&&Predicate.isRecord(e))for(let i=0;i<n;i++){let n=s[i],a=t.keys[n].buckets;if(Object.prototype.hasOwnProperty.call(e,n)){let t=String(e[n]);Object.prototype.hasOwnProperty.call(a,t)&&(r=r.concat(a[t]))}}t.otherwise.length>0&&(r=r.concat(t.otherwise));let a=r.map(e=>[_V(e),ParseResult.is({ast:e})]);for(let t=0;t<a.length;t++){let[s,n]=a[t];if(n(e)&&n(i)&&s(e,i))return!0}return!1})}}},_G=Symbol.for("@effect/schema/TypeId/GreaterThanOrEqualTo"),_H=Symbol.for("@effect/schema/TypeId/Int"),_W=(e,t=[])=>({value:e,forest:t}),_Y=e=>oq(we(e),e=>_X(e)),_Q=e=>bB(_Y(e)),_X=e=>e.value+_Z("\n",e.forest),_Z=(e,t)=>{let s,n="",i=t.length;for(let r=0;r<i;r++){s=t[r];let a=r===i-1;n+=e+(a?"└":"├")+"─ "+s.value+_Z(e+(i>1&&!a?"│  ":"   "),s.forest)}return n},_0=e=>{switch(e){case"Encoded":return"Encoded side transformation failure";case"Transformation":return"Transformation process failure";case"Type":return"Type side transformation failure"}},_1=e=>{switch(e){case"From":return"From side refinement failure";case"Predicate":return"Predicate refinement failure"}},_2=e=>{switch(e._tag){case"Refinement":if("From"===e.kind)return _5(e.error);break;case"Transformation":return _5(e.error)}return tT()},_3=e=>vI(e.ast).pipe(oF(t=>{let s=t(e);return F(s)?oX(s):s})),_5=e=>og(_2(e),()=>_3(e)),_4=e=>tP(vC(e.ast),t=>tA(t(e))),_6=e=>_5(e).pipe(oH(()=>_4(e)),oH(()=>e.message),og(()=>oX(`Expected ${e.ast.toString(!0)}, actual ${vc(e.actual)}`))),_8=e=>tI(_4(e),()=>String(e.ast)),_7=e=>tI(e.message,()=>"is forbidden"),_9=(e,t)=>oU(_5(e),{onFailure:t,onSuccess:e=>oX(_W(e))}),we=e=>{switch(e._tag){case"Type":return oq(_6(e),_W);case"Forbidden":return oX(_W(_8(e),[_W(_7(e))]));case"Unexpected":return oX(_W(`is unexpected, expected ${e.ast.toString(!0)}`));case"Missing":return oX(_W("is missing"));case"Union":return _9(e,()=>oq(dU(e.errors,e=>"Member"===e._tag?oq(we(e.error),e=>_W("Union member",[e])):we(e)),t=>_W(_8(e),t)));case"TupleType":return _9(e,()=>oq(dU(e.errors,e=>oq(we(e.error),t=>_W(`[${e.index}]`,[t]))),t=>_W(_8(e),t)));case"TypeLiteral":return _9(e,()=>oq(dU(e.errors,e=>oq(we(e.error),t=>_W(`[${vc(e.key)}]`,[t]))),t=>_W(_8(e),t)));case"Transformation":return _9(e,()=>oq(we(e.error),t=>_W(_8(e),[_W(_0(e.kind),[t])])));case"Refinement":return _9(e,()=>oq(we(e.error),t=>_W(_8(e),[_W(_1(e.kind),[t])])));case"Declaration":return _9(e,()=>{let t=e.error;return"Type"===t._tag&&t.ast===e.ast?we(t):oq(we(t),t=>_W(_8(e),[t]))})}};class wt{ast;actual;error;_tag="Declaration";constructor(e,t,s){this.ast=e,this.actual=t,this.error=s}}class ws{ast;actual;kind;error;_tag="Refinement";constructor(e,t,s,n){this.ast=e,this.actual=t,this.kind=s,this.error=n}}class wn{ast;actual;errors;output;_tag="TupleType";constructor(e,t,s,n=[]){this.ast=e,this.actual=t,this.errors=s,this.output=n}}class wi{index;error;_tag="Index";constructor(e,t){this.index=e,this.error=t}}class wr{ast;actual;errors;output;_tag="TypeLiteral";constructor(e,t,s,n={}){this.ast=e,this.actual=t,this.errors=s,this.output=n}}class wa{key;error;_tag="Key";constructor(e,t){this.key=e,this.error=t}}class wo{ast;_tag="Unexpected";constructor(e){this.ast=e}}class wl{ast;actual;kind;error;_tag="Transformation";constructor(e,t,s,n){this.ast=e,this.actual=t,this.kind=s,this.error=n}}class wc{ast;actual;_tag="Type";message;constructor(e,t,s){this.ast=e,this.actual=t,this.message=tA(s)}}class wu{ast;actual;_tag="Forbidden";message;constructor(e,t,s){this.ast=e,this.actual=t,this.message=tA(s)}}class wp{_tag="Missing"}let wm=new wp;class wh{ast;error;_tag="Member";constructor(e,t){this.ast=e,this.error=t}}class wf{ast;actual;errors;_tag="Union";constructor(e,t,s){this.ast=e,this.actual=t,this.errors=s}}class wd extends x9("ParseError"){get message(){return this.toString()}toString(){return _Q(this.error)}toJSON(){return{_id:"ParseError",message:this.toString()}}[eS](){return this.toJSON()}}let wg=e=>new wd({error:e}),wb=v(2,(e,t)=>"Left"===e._tag?e:"Right"===e._tag?t(e.right):oF(e,t)),wx=v(2,(e,t)=>"Left"===e._tag?e:"Right"===e._tag?tE(t(e.right)):oq(e,t)),wy=v(2,(e,t)=>"Left"===e._tag?tO(t(e.left)):"Right"===e._tag?e:oJ(e,t)),wv=e=>{if("Left"===e._tag||"Right"===e._tag)return e},w_=(e,t)=>{if(void 0===e)return t;if(void 0===t)return e;let s={};return s.errors=t.errors??e.errors,s.onExcessProperty=t.onExcessProperty??e.onExcessProperty,s},ww=(e,t,s)=>{let n=wF(e,t);return(e,t)=>n(e,w_(s,t))},wS=(e,t,s)=>{let n=ww(e,t,s);return(e,t)=>sZ(n(e,t),e=>Error(_Q(e)))},wk=(e,t,s)=>{let n=wF(e,t);return(e,t)=>n(e,{...w_(s,t),isEffectAllowed:!0})},wO=(e,t)=>wk(e.ast,!0,t),wE=(e,t)=>wk(e.ast,!1,t),wT=(e,t)=>wS(_F(e.ast),!0,t),wR=(e,t)=>{let s=wF(_F(e.ast),!0);return(e,n)=>tk(s(e,{...w_(t,n),isExact:!0}))},wI=N(Symbol.for("@effect/schema/Parser/decodeMemoMap"),()=>new WeakMap),wN=N(Symbol.for("@effect/schema/Parser/encodeMemoMap"),()=>new WeakMap),wF=(e,t)=>{let s=t?wI:wN,n=s.get(e);if(n)return n;let i=wM(e,t);return s.set(e,i),i},wA=e=>tj(vj(e)),wj=e=>tj(vM(e)),wM=(e,t)=>{switch(e._tag){case"Refinement":if(t){let t=wF(e.from,!0);return(s,n)=>w$(wb(wy(t(s,n),t=>new ws(e,s,"From",t)),t=>tR(e.filter(t,n??_v,e),{onNone:()=>tE(t),onSome:t=>tO(new ws(e,s,"Predicate",t))})),e,s,n)}{let t=wF(_F(e),!0),s=wF(wP(e.from),!1);return(n,i)=>w$(wb(t(n,i),e=>s(e,i)),e,n,i)}case"Transformation":{let s=wz(e.transformation,t),n=t?wF(e.from,!0):wF(e.to,!1),i=t?wF(e.to,!0):wF(e.from,!1);return(r,a)=>w$(wb(wy(n(r,a),s=>new wl(e,r,t?"Encoded":"Type",s)),n=>wb(wy(s(n,a??_v,e),t=>new wl(e,r,"Transformation",t)),s=>wy(i(s,a),s=>new wl(e,r,t?"Type":"Encoded",s)))),e,r,a)}case"Declaration":{let s=t?e.decodeUnknown(...e.typeParameters):e.encodeUnknown(...e.typeParameters);return(t,n)=>w$(wy(s(t,n??_v,e),s=>new wt(e,t,s)),e,t,n)}case"Literal":return wC(e,t=>t===e.literal);case"UniqueSymbol":return wC(e,t=>t===e.symbol);case"UndefinedKeyword":case"VoidKeyword":return wC(e,U);case"NeverKeyword":return wC(e,D);case"UnknownKeyword":case"AnyKeyword":return tE;case"StringKeyword":return wC(e,F);case"NumberKeyword":return wC(e,A);case"BooleanKeyword":return wC(e,j);case"BigIntKeyword":return wC(e,M);case"SymbolKeyword":return wC(e,C);case"ObjectKeyword":return wC(e,B);case"Enums":return wC(e,t=>e.enums.some(([e,s])=>s===t));case"TemplateLiteral":{let t=_T(e);return wC(e,e=>F(e)&&t.test(e))}case"TupleType":{let s=e.elements.map(e=>wF(e.type,t)),n=e.rest.map(e=>wF(e,t)),i=e.elements.filter(e=>!e.isOptional).length;e.rest.length>0&&(i+=e.rest.length-1);let r=_m.make(e.elements.map((e,t)=>new vz(t))),a=wA(e),o=wj(e);return(t,l)=>{let c;if(!t0(t))return tO(new wc(e,t));let u=l?.errors==="all",p=[],m=0,h=t.length;for(let s=h;s<=i-1;s++){let n=new wi(s,wm);if(!u)return tO(new wn(e,t,[n]));p.push([m++,n])}if(0===e.rest.length)for(let s=e.elements.length;s<=h-1;s++){let n=new wi(s,new wo(r));if(!u)return tO(new wn(e,t,[n]));p.push([m++,n])}let f=[],d=0;for(;d<s.length;d++)if(h<d+1){if(e.elements[d].isOptional)continue}else{let n=(0,s[d])(t[d],l),i=wv(n);if(i){if(tS(i)){let s=new wi(d,i.left);if(!u)return tO(new wn(e,t,[s],wD(f)));p.push([m++,s]);continue}f.push([m++,i.right])}else{let s=m++,i=d;c||(c=[]),c.push(({es:r,output:a})=>oF(oS(n),n=>{if(tS(n)){let o=new wi(i,n.left);return u?(r.push([s,o]),o6):tO(new wn(e,t,[o],wD(a)))}return a.push([s,n.right]),o6}))}}if(t2(n)){let[s,...i]=n;for(;d<h-i.length;d++){let n=s(t[d],l),i=wv(n);if(i){if(tS(i)){let s=new wi(d,i.left);if(!u)return tO(new wn(e,t,[s],wD(f)));p.push([m++,s]);continue}f.push([m++,i.right])}else{let s=m++,i=d;c||(c=[]),c.push(({es:r,output:a})=>oF(oS(n),n=>{if(!tS(n))return a.push([s,n.right]),o6;{let o=new wi(i,n.left);return u?(r.push([s,o]),o6):tO(new wn(e,t,[o],wD(a)))}}))}}for(let s=0;s<i.length;s++)if(!(h<(d+=s)+1)){let n=i[s](t[d],l),r=wv(n);if(r){if(tS(r)){let s=new wi(d,r.left);if(!u)return tO(new wn(e,t,[s],wD(f)));p.push([m++,s]);continue}f.push([m++,r.right])}else{let s=m++,i=d;c||(c=[]),c.push(({es:r,output:a})=>oF(oS(n),n=>{if(tS(n)){let o=new wi(i,n.left);return u?(r.push([s,o]),o6):tO(new wn(e,t,[o],wD(a)))}return a.push([s,n.right]),o6}))}}}let g=({es:s,output:n})=>tb(s)?tO(new wn(e,t,wD(s),wD(n))):tE(wD(n));if(c&&c.length>0){let e=c;return oZ(()=>{let t={es:sm(p),output:sm(f)};return oF(dU(e,e=>e(t),{concurrency:a,batching:o,discard:!0}),()=>g(t))})}return g({output:f,es:p})}}case"TypeLiteral":{if(0===e.propertySignatures.length&&0===e.indexSignatures.length)return wC(e,V);let s=[],n={};for(let i of e.propertySignatures)s.push([wF(i.type,t),i]),n[i.name]=null;let i=e.indexSignatures.map(e=>[wF(e.parameter,t),wF(e.type,t),e.parameter]),r=_m.make(e.indexSignatures.map(e=>e.parameter).concat(vo(n).map(e=>C(e)?new vK(e):new vz(e)))),a=wF(r,t),o=wA(e),l=wj(e);return(t,c)=>{let u;if(!W(t))return tO(new wc(e,t));let p=c?.errors==="all",m=[],h=0,f=c?.onExcessProperty==="error",d=c?.onExcessProperty==="preserve",g={};if(f||d){for(let s of vo(t))if(tS(wv(a(s,c)))){if(f){let n=new wa(s,new wo(r));if(!p)return tO(new wr(e,t,[n],g));m.push([h++,n]);continue}g[s]=t[s]}}let b=c?.isExact===!0;for(let n=0;n<s.length;n++){let i=s[n][1],r=i.name,a=Object.prototype.hasOwnProperty.call(t,r);if(!a){if(i.isOptional)continue;if(b){let s=new wa(r,wm);if(!p)return tO(new wr(e,t,[s],g));m.push([h++,s]);continue}}let o=(0,s[n][0])(t[r],c),l=wv(o);if(l){if(tS(l)){let s=new wa(r,a?l.left:wm);if(!p)return tO(new wr(e,t,[s],g));m.push([h++,s]);continue}g[r]=l.right}else{let s=h++;u||(u=[]),u.push(({es:n,output:i})=>oF(oS(o),o=>{if(tS(o)){let l=new wa(r,a?o.left:wm);return p?(n.push([s,l]),o6):tO(new wr(e,t,[l],i))}return i[r]=o.right,o6}))}}for(let s=0;s<i.length;s++){let r=i[s],a=r[0],o=r[1];for(let s of va(t,r[2])){let i=wv(a(s,c));if(i&&tk(i)){let i=o(t[s],c),r=wv(i);if(r){if(tS(r)){let n=new wa(s,r.left);if(!p)return tO(new wr(e,t,[n],g));m.push([h++,n]);continue}Object.prototype.hasOwnProperty.call(n,s)||(g[s]=r.right)}else{let r=h++,a=s;u||(u=[]),u.push(({es:o,output:l})=>oF(oS(i),i=>{if(!tS(i))return Object.prototype.hasOwnProperty.call(n,s)||(l[s]=i.right),o6;{let s=new wa(a,i.left);return p?(o.push([r,s]),o6):tO(new wr(e,t,[s],l))}}))}}}}let x=({es:s,output:n})=>tb(s)?tO(new wr(e,t,wD(s),n)):tE(n);if(u&&u.length>0){let e=u;return oZ(()=>{let t={es:sm(m),output:Object.assign({},g)};return oF(dU(e,e=>e(t),{concurrency:o,batching:l,discard:!0}),()=>x(t))})}return x({es:m,output:g})}}case"Union":{let s=wU(e.types,t),n=vo(s.keys),i=n.length,r=new Map;for(let s=0;s<e.types.length;s++)r.set(e.types[s],wF(e.types[s],t));let a=wA(e)??1,o=wj(e);return(t,l)=>{let c;let u=[],p=0,m=[];if(i>0){if(W(t))for(let e=0;e<i;e++){let i=n[e],r=s.keys[i].buckets;if(Object.prototype.hasOwnProperty.call(t,i)){let e=String(t[i]);if(Object.prototype.hasOwnProperty.call(r,e))m=m.concat(r[e]);else{let e=_m.make(s.keys[i].literals);u.push([p++,new wr(new _r([new _s(i,e,!1,!0)],[]),t,[new wa(i,new wc(e,t[i]))])])}}else{let e=_m.make(s.keys[i].literals);u.push([p++,new wr(new _r([new _s(i,e,!1,!0)],[]),t,[new wa(i,wm)])])}}else u.push([p++,new wc(e,t)])}s.otherwise.length>0&&(m=m.concat(s.otherwise));for(let e=0;e<m.length;e++){let s=m[e],n=r.get(s)(t,l),i=c&&0!==c.length?void 0:wv(n);if(i){if(tk(i))return tE(i.right);u.push([p++,new wh(s,i.left)])}else{let e=p++;c||(c=[]),c.push(t=>oZ(()=>"finalResult"in t?o6:oF(oS(n),n=>(tk(n)?t.finalResult=tE(n.right):t.es.push([e,new wh(s,n.left)]),o6))))}}let h=s=>tb(s)?1===s.length&&"Type"===s[0][1]._tag?tO(s[0][1]):tO(new wf(e,t,wD(s))):tO(new wc(vH,t));if(c&&c.length>0){let e=c;return oZ(()=>{let t={es:sm(u)};return oF(dU(e,e=>e(t),{concurrency:a,batching:o,discard:!0}),()=>"finalResult"in t?t.finalResult:h(t.es))})}return h(u)}}case"Suspend":{let s=vl(()=>wF(_E(e.f(),e.annotations),t));return(e,t)=>s()(e,t)}}},wC=(e,t)=>s=>t(s)?tE(s):tO(new wc(e,s)),wL=(e,t)=>{switch(e._tag){case"Declaration":{let s=vL(e);if(e3(s))return wL(s.value,t);break}case"TypeLiteral":{let s=[];for(let n=0;n<e.propertySignatures.length;n++){let i=e.propertySignatures[n],r=t?_C(i.type):_F(i.type);vB(r)&&!i.isOptional&&s.push([i.name,r])}return s}case"Refinement":return wL(e.from,t);case"Suspend":return wL(e.f(),t);case"Transformation":return wL(t?e.from:e.to,t)}return[]},wU=(e,t)=>{let s={},n=[];for(let i=0;i<e.length;i++){let r=e[i],a=wL(r,t);if(a.length>0)for(let e=0;e<a.length;e++){let[t,n]=a[e],i=String(n.literal);s[t]=s[t]||{buckets:{},literals:[]};let o=s[t].buckets;if(Object.prototype.hasOwnProperty.call(o,i)){if(e<a.length-1)continue;o[i].push(r),s[t].literals.push(n)}else{o[i]=[r],s[t].literals.push(n);break}}else n.push(r)}return{keys:s,otherwise:n}},wP=e=>_y(e)?wP(e.from):e,w$=(e,t,s,n)=>{let i=wv(e);if(i)return i;if(n?.isEffectAllowed===!0)return e;try{return bB(oS(e))}catch(e){return tO(new wu(t,s,"cannot be be resolved synchronously, this is caused by using runSync on an effect that performs async work"))}};function wD(e){return e.sort(([e],[t])=>e>t?1:e<t?-1:0).map(([e,t])=>t)}let wz=(e,t)=>{switch(e._tag){case"FinalTransformation":return t?e.decode:e.encode;case"ComposeTransformation":return tE;case"TypeLiteralTransformation":return s=>{let n=tE(s);for(let s of e.propertySignatureTransformations){let[e,i]=t?[s.from,s.to]:[s.to,s.from],r=t?s.decode:s.encode;n=wx(n,t=>{let s=r(Object.prototype.hasOwnProperty.call(t,e)?e4(t[e]):tT());return delete t[e],e3(s)&&(t[i]=s.value),t})}return n}}},wB=Symbol.for("@effect/schema/PrettyHookId"),wq=vR(wB),wK=Symbol.for("@effect/schema/Schema"),wJ={_A:e=>e,_I:e=>e,_R:e=>e},wV=e=>{if(!e)return{};let t={};for(let s of Object.getOwnPropertySymbols(e))t[s]=e[s];if(void 0!==e.typeId){let s=e.typeId;"object"==typeof s?(t[vd]=s.id,t[s.id]=s.annotation):t[vd]=s}let s=(s,n)=>{void 0!==e[s]&&(t[n]=e[s])};return s("message",vg),s("identifier",vb),s("title",vx),s("description",vy),s("examples",vv),s("default",v_),s("documentation",vS),s("jsonSchema",vw),s("arbitrary",y2),s("pretty",wB),s("equivalence",_J),s("concurrency",vk),s("batching",vO),s("parseIssueTitle",vT),t};class wG{ast;[wK]=wJ;constructor(e){this.ast=e}pipe(){return eR(this,arguments)}annotations(e){return new wG(_E(this.ast,wV(e)))}toString(){return String(this.ast)}}let wH=e=>String(e.ast),wW=e=>wZ(_C(e.ast)),wY=e=>wZ(_F(e.ast)),wQ=(e,t)=>{let s=wO(e,t);return(e,t)=>wy(s(e,t),wg)},wX=e=>q(e,wK)&&B(e[wK]),wZ=e=>new wG(e);class w0 extends wG{static ast=e=>_f(e)?_m.make(_h(e,e=>new vz(e))):new vz(e[0]);literals;constructor(e,t=w0.ast(e)){super(t),this.literals=[...e]}annotations(e){return new w0(this.literals,_E(this.ast,wV(e)))}}function w1(...e){return t2(e)?new w0(e):w7}let w2=e=>{switch(e._tag){case"Literal":return[e];case"NumberKeyword":case"StringKeyword":return[AST.TemplateLiteral.make("",[new AST.TemplateLiteralSpan(e,"")])];case"Union":return array_.flatMap(e.types,w2);default:throw Error(`unsupported template literal span (${e})`)}},w3=(e,t,s)=>wZ(new v$(e.map(e=>e.ast),(...e)=>t.decode(...e.map(wZ)),(...e)=>t.encode(...e.map(wZ)),wV(s))),w5=(e,t)=>{let s=()=>(t,s,n)=>e(t)?tE(t):tO(new wc(n,t));return wZ(new v$([],s,s,wV(t)))},w4=function(){if(Array.isArray(arguments[0])){let e=arguments[0],t=arguments[1],s=arguments[2];return w3(e,t,s)}let e=arguments[0],t=arguments[1];return w5(e,t)},w6=wZ(vV),w8=wZ(vq),w7=wZ(vH),w9=wZ(vY),Se=wZ(v0),St=wZ(v3),Ss=wZ(v6);class Sn extends wG{static ast=e=>_m.members(e.map(e=>e.ast));members;constructor(e,t=Sn.ast(e)){super(t),this.members=[...e]}annotations(e){return new Sn(this.members,_E(this.ast,wV(e)))}}function Si(...e){return _f(e)?new Sn(e):t2(e)?e[0]:w7}let Sr=e=>Si(e,w8),Sa=e=>Si(e,w6),So=e=>Si(e,w8,w6);class Sl extends wG{elements;rest;static ast=(e,t)=>new _e(e.map(e=>wX(e)?new v9(e.ast,!1):new v9(e.optionalElement.ast,!0)),t.map(e=>e.ast),!0);constructor(e,t,s=Sl.ast(e,t)){super(s),this.elements=e,this.rest=t}annotations(e){return new Sl(this.elements,this.rest,_E(this.ast,wV(e)))}}class Sc extends Sl{value;constructor(e,t){super([],[e],t),this.value=e}annotations(e){return new Sc(this.value,_E(this.ast,wV(e)))}}let Su=e=>new Sc(e),Sp=e=>e?'"?:"':'":"';class Sm{type;isOptional;isReadonly;annotations;_tag="PropertySignatureDeclaration";constructor(e,t,s,n){this.type=e,this.isOptional=t,this.isReadonly=s,this.annotations=n}toString(){let e=Sp(this.isOptional),t=String(this.type);return`PropertySignature<${e}, ${t}, never, ${e}, ${t}>`}}class Sh{type;isOptional;isReadonly;annotations;fromKey;constructor(e,t,s,n,i){this.type=e,this.isOptional=t,this.isReadonly=s,this.annotations=n,this.fromKey=i}}class Sf{type;isOptional;isReadonly;annotations;constructor(e,t,s,n){this.type=e,this.isOptional=t,this.isReadonly=s,this.annotations=n}}let Sd=e=>void 0===e?"never":F(e)?JSON.stringify(e):String(e);class Sg{from;to;decode;encode;_tag="PropertySignatureTransformation";constructor(e,t,s,n){this.from=e,this.to=t,this.decode=s,this.encode=n}toString(){return`PropertySignature<${Sp(this.to.isOptional)}, ${this.to.type}, ${Sd(this.from.fromKey)}, ${Sp(this.from.isOptional)}, ${this.from.type}>`}}let Sb=Symbol.for("@effect/schema/PropertySignature"),Sx=(e,t)=>{switch(e._tag){case"PropertySignatureDeclaration":return new Sm(e.type,e.isOptional,e.isReadonly,{...e.annotations,...t});case"PropertySignatureTransformation":return new Sg(new Sh(e.from.type,e.from.isOptional,e.from.isReadonly,e.from.annotations),new Sf(e.to.type,e.to.isOptional,e.to.isReadonly,{...e.to.annotations,...t}),e.decode,e.encode)}};class Sy{ast;[wK];[Sb]=null;_Key;_EncodedToken;_TypeToken;constructor(e){this.ast=e}pipe(){return eR(this,arguments)}annotations(e){return new Sy(Sx(this.ast,wV(e)))}toString(){return String(this.ast)}}let Sv=(e,t,s)=>new Sy(new Sg(new Sh(e.ast,!0,!0,{},void 0),new Sf(t.ast,!1,!0,{}),e=>e4(s.decode(e)),tU(s.encode))),S_=(e,t,s)=>new Sy(new Sg(new Sh(e.ast,!0,!0,{},void 0),new Sf(t.ast,!0,!0,{}),s.decode,s.encode)),Sw=v(e=>wX(e[0]),(e,t)=>{let s=t?.exact,n=t?.default,i=t?.nullable,r=t?.as=="Option";return s?n?i?Sv(Sr(e),wY(e),{decode:tR({onNone:n,onSome:e=>null===e?n():e}),encode:e4}):Sv(e,wY(e),{decode:tR({onNone:n,onSome:_}),encode:e4}):r?i?Sv(Sr(e),SJ(wY(e)),{decode:t$($),encode:_}):Sv(e,SJ(wY(e)),{decode:_,encode:_}):i?S_(Sr(e),wY(e),{decode:t$($),encode:_}):new Sy(new Sm(e.ast,!0,!0,{})):n?i?Sv(So(e),wY(e),{decode:tR({onNone:n,onSome:e=>null==e?n():e}),encode:e4}):Sv(Sa(e),wY(e),{decode:tR({onNone:n,onSome:e=>void 0===e?n():e}),encode:e4}):r?i?Sv(So(e),SJ(wY(e)),{decode:t$(e=>null!=e),encode:_}):Sv(Sa(e),SJ(wY(e)),{decode:t$(P),encode:_}):i?S_(So(e),Sa(wY(e)),{decode:t$($),encode:_}):new Sy(new Sm(Sa(e).ast,!0,!0,{}))}),SS=e=>q(e,Sb);class Sk extends wG{static ast=(e,t)=>{let s=vo(e),n=[];if(s.length>0){let i=[],r=[],a=[];for(let t=0;t<s.length;t++){let o=s[t],l=e[o];if(SS(l)){let e=l.ast;switch(e._tag){case"PropertySignatureDeclaration":{let t=e.type,s=e.isOptional,a=e.annotations;i.push(new _s(o,t,s,!0)),r.push(new _s(o,_F(t),s,!0,a)),n.push(new _s(o,t,s,!0,a));break}case"PropertySignatureTransformation":{let t=e.from.fromKey??o;i.push(new _s(t,e.from.type,e.from.isOptional,!0,e.from.annotations)),r.push(new _s(o,e.to.type,e.to.isOptional,!0,e.to.annotations)),a.push(new _k(t,o,e.decode,e.encode))}}}else i.push(new _s(o,l.ast,!1,!0)),r.push(new _s(o,_F(l.ast),!1,!0)),n.push(new _s(o,l.ast,!1,!0))}if(t2(a)){let e=[],s=[];for(let n of t){let{indexSignatures:t,propertySignatures:a}=_I(n.key.ast,n.value.ast);a.forEach(e=>{i.push(e),r.push(new _s(e.name,_F(e.type),e.isOptional,e.isReadonly,e.annotations))}),t.forEach(t=>{e.push(t),s.push(new _i(t.parameter,_F(t.type),t.isReadonly))})}return new __(new _r(i,e,{[vx]:"Struct (Encoded side)"}),new _r(r,s,{[vx]:"Struct (Type side)"}),new _O(a))}}let i=[];for(let e of t){let{indexSignatures:t,propertySignatures:s}=_I(e.key.ast,e.value.ast);s.forEach(e=>n.push(e)),t.forEach(e=>i.push(e))}return new _r(n,i)};fields;records;constructor(e,t,s=Sk.ast(e,t)){super(s),this.fields={...e},this.records=[...t]}annotations(e){return new Sk(this.fields,this.records,_E(this.ast,wV(e)))}}function SO(e,...t){return new Sk(e,t)}class SE extends Sk{key;value;constructor(e,t,s){super({},[{key:e,value:t}],s),this.key=e,this.value=t}annotations(e){return new SE(this.key,this.value,_E(this.ast,wV(e)))}}let ST=(e,t)=>new SE(e,t),SR=(e,t,s)=>errors_.getAPIErrorMessage("Extend",`cannot extend \`${e}\` with \`${t}\` (path [${s?.join(", ")}])`),SI=(e,t,s)=>{if(AST.isTypeLiteral(e)&&AST.isTypeLiteral(t)){let n=[...e.propertySignatures];for(let e of t.propertySignatures){let t=e.name,i=n.findIndex(e=>e.name===t);if(-1===i)n.push(e);else{let{isOptional:r,type:a}=n[i];s=[...s,util_.formatUnknown(t)],n[i]=new AST.PropertySignature(t,SN(a,e.type,s),r,!0)}}return new AST.TypeLiteral(n,e.indexSignatures.concat(t.indexSignatures))}throw Error(SR(e,t,s))},SN=(e,t,s)=>AST.Union.make(SF([e],[t],s)),SF=(e,t,s)=>array_.flatMap(e,e=>array_.flatMap(t,t=>{if(AST.isUnion(e))return SF(e.types,AST.isUnion(t)?t.types:[t],s);if(AST.isUnion(t))return SF([e],t.types,s);if(AST.isTypeLiteral(e)){if(AST.isTypeLiteral(t))return[SI(e,t,s)];if(AST.isTransformation(t)&&AST.isTypeLiteralTransformation(t.transformation))return[new AST.Transformation(SI(e,t.from,s),SI(AST.typeAST(e),t.to,s),new AST.TypeLiteralTransformation(t.transformation.propertySignatureTransformations))]}else if(AST.isTransformation(e)&&AST.isTypeLiteralTransformation(e.transformation)){if(AST.isTypeLiteral(t))return[new AST.Transformation(SI(e.from,t,s),SI(e.to,AST.typeAST(t),s),new AST.TypeLiteralTransformation(e.transformation.propertySignatureTransformations))];if(AST.isTransformation(t)&&AST.isTypeLiteralTransformation(t.transformation))return[new AST.Transformation(SI(e.from,t.from,s),SI(e.to,t.to,s),new AST.TypeLiteralTransformation(e.transformation.propertySignatureTransformations.concat(t.transformation.propertySignatureTransformations)))]}throw Error(SR(e,t,s))})),SA=e=>wZ(new _b(()=>e().ast));function Sj(e,t){return s=>wZ(new _x(s.ast,(t,s,n)=>{let i=e(t,s,n);return j(i)?i?tT():e4(new wc(n,t)):i},wV(t)))}class SM extends wG{from;to;constructor(e,t,s){super(s),this.from=e,this.to=t}annotations(e){return new SM(this.from,this.to,_E(this.ast,wV(e)))}}let SC=v(e=>wX(e[0])&&wX(e[1]),(e,t,s)=>new SM(e,t,new __(e.ast,t.ast,new _w(s.decode,s.encode)))),SL=v(e=>wX(e[0])&&wX(e[1]),(e,t,s)=>SC(e,t,{decode:e=>tE(s.decode(e)),encode:e=>tE(s.encode(e))})),SU=Symbol.for("@effect/schema/TypeId/Trimmed"),SP=Symbol.for("@effect/schema/TypeId/Lowercased");u={identifier:"Lowercased",title:"Lowercased"},e=>e.pipe(Sj(e=>e===e.toLowerCase(),{typeId:SP,description:"a lowercase string",...u}));let S$=Symbol.for("@effect/schema/TypeId/Uppercased");p={identifier:"Uppercased",title:"Uppercased"},m={identifier:"Trimmed",title:"Trimmed"},e=>e.pipe(Sj(e=>e===e.trim(),{typeId:SU,description:"a string with no leading or trailing whitespace",...m}));let SD=St.pipe((h={identifier:"Int",title:"Int"},e=>e.pipe(Sj(e=>Number.isSafeInteger(e),{typeId:_H,title:"integer",description:"an integer",jsonSchema:{type:"integer"},...h}))));f={identifier:"NonNegative",title:"NonNegative"},e=>e.pipe(Sj(e=>e>=0,{typeId:_G,description:"a non-negative number",jsonSchema:{minimum:0},...f}));let Sz=e=>"None"===e._tag?tT():e4(e.value),SB=e=>t=>t.oneof(t.record({_tag:t.constant("None")}),t.record({_tag:t.constant("Some"),value:e(t)})).map(Sz),Sq=e=>tR({onNone:()=>"none()",onSome:t=>`some(${e(t)})`}),SK=e=>(t,s,n)=>e1(t)?e2(t)?tE(tT()):wx(e(t.value,s),e4):tO(new wc(n,t)),SJ=e=>w4([e],{decode:e=>SK(wO(e)),encode:e=>SK(wE(e))},{description:`Option<${wH(e)}>`,pretty:Sq,arbitrary:SB,equivalence:tD}),SV=e=>(t,s)=>SH({kind:"Class",identifier:e,fields:t,Base:i$,annotations:s}),SG=(e,t)=>{let s={...e};for(let n of vo(t)){if(n in e)throw Error(vp(n));s[n]=t[n]}return s},SH=({Base:e,annotations:t,fields:s,fromSchema:n,identifier:i,kind:r,tag:a,toStringOverride:o})=>{let l=Symbol.for(`@effect/schema/${r}/${i}`),c=n??SO(s),u=tR(vN(c.ast),{onNone:()=>c.annotations({title:`${i} (Encoded side)`}),onSome:()=>c});return class extends e{constructor(e={},t=!1){void 0!==a&&(e={...e,...a}),!0!==t&&(e=wT(c)(e)),super(e,!0)}static [wK]=wJ;static get ast(){let e=wY(c),s=wR(e),n=e=>q(e,l)&&s(e),r=wE(e);return SL(u,w4([e],{decode:()=>(e,t,s)=>e instanceof this||n(e)?tE(e):tO(new wc(s,e)),encode:()=>(e,t)=>e instanceof this?tE(e):wx(r(e,t),e=>new this(e,!0))},{identifier:i,title:i,description:`an instance of ${i}`,pretty:e=>t=>`${i}(${e(t)})`,arbitrary:e=>t=>e(t).map(e=>new this(e)),equivalence:_,[vE]:e.ast,...t}),{decode:e=>new this(e,!0),encode:_}).annotations({[vE]:c.ast}).ast}static pipe(){return eR(this,arguments)}static annotations(e){return wZ(this.ast).annotations(e)}static toString(){return`(${String(u)} <-> ${i})`}static fields={...s};static identifier=i;static extend(e){return(t,n)=>SH({kind:r,identifier:e,fields:SG(s,t),Base:this,tag:a,annotations:n})}static transformOrFail(e){return(t,n,i)=>{let o=SG(s,t);return SH({kind:r,identifier:e,fromSchema:SC(c,wY(SO(o)),n),fields:o,Base:this,tag:a,annotations:i})}}static transformOrFailFrom(e){return(t,n,i)=>{let o=SG(s,t);return SH({kind:r,identifier:e,fromSchema:SC(wW(c),SO(o),n),fields:o,Base:this,tag:a,annotations:i})}}get[l](){return l}toString(){if(void 0!==o){let e=o(this);if(void 0!==e)return e}return`${i}({ ${vo(s).map(e=>`${vu(e)}: ${vc(this[e])}`).join(", ")} })`}}},SW=Si(SO({_tag:w1("None")}).annotations({identifier:"FiberIdNoneEncoded"}),SO({_tag:w1("Runtime"),id:SD.annotations({title:"id",description:"id"}),startTimeMillis:SD.annotations({title:"startTimeMillis",description:"startTimeMillis"})}).annotations({identifier:"FiberIdRuntimeEncoded"}),SO({_tag:w1("Composite"),left:SA(()=>SW),right:SA(()=>SW)}).annotations({identifier:"FiberIdCompositeEncoded"})).annotations({identifier:"FiberIdEncoded"}),SY={silent:Number.NEGATIVE_INFINITY,fatal:0,error:0,warn:1,log:2,info:3,success:3,fail:3,ready:3,start:3,box:3,debug:4,trace:5,verbose:Number.POSITIVE_INFINITY},SQ={silent:{level:-1},fatal:{level:SY.fatal},error:{level:SY.error},warn:{level:SY.warn},log:{level:SY.log},info:{level:SY.info},success:{level:SY.success},fail:{level:SY.fail},ready:{level:SY.info},start:{level:SY.info},box:{level:SY.info},debug:{level:SY.debug},trace:{level:SY.trace},verbose:{level:SY.verbose}};function SX(e){return null!==e&&"object"==typeof e}let SZ=(...e)=>e.reduce((e,t)=>(function e(t,s,n=".",i){if(!SX(s))return e(t,{},n,i);let r=Object.assign({},s);for(let s in t){if("__proto__"===s||"constructor"===s)continue;let a=t[s];null==a||i&&i(r,s,a,n)||(Array.isArray(a)&&Array.isArray(r[s])?r[s]=[...a,...r[s]]:SX(a)&&SX(r[s])?r[s]=e(a,r[s],(n?`${n}.`:"")+s.toString(),i):r[s]=a)}return r})(e,t,"",void 0),{}),S0=!1,S1=[];class S2{constructor(e={}){let t=e.types||SQ;for(let s in this.options=SZ({...e,defaults:{...e.defaults},level:S3(e.level,t),reporters:[...e.reporters||[]]},{types:SQ,throttle:1e3,throttleMin:5,formatOptions:{date:!0,colors:!1,compact:!0}}),t){let e={type:s,...this.options.defaults,...t[s]};this[s]=this._wrapLogFn(e),this[s].raw=this._wrapLogFn(e,!0)}this.options.mockFn&&this.mockTypes(),this._lastLog={}}get level(){return this.options.level}set level(e){this.options.level=S3(e,this.options.types,this.options.level)}prompt(e,t){if(!this.options.prompt)throw Error("prompt is not supported!");return this.options.prompt(e,t)}create(e){let t=new S2({...this.options,...e});return this._mockFn&&t.mockTypes(this._mockFn),t}withDefaults(e){return this.create({...this.options,defaults:{...this.options.defaults,...e}})}withTag(e){return this.withDefaults({tag:this.options.defaults.tag?this.options.defaults.tag+":"+e:e})}addReporter(e){return this.options.reporters.push(e),this}removeReporter(e){if(e){let t=this.options.reporters.indexOf(e);if(t>=0)return this.options.reporters.splice(t,1)}else this.options.reporters.splice(0);return this}setReporters(e){return this.options.reporters=Array.isArray(e)?e:[e],this}wrapAll(){this.wrapConsole(),this.wrapStd()}restoreAll(){this.restoreConsole(),this.restoreStd()}wrapConsole(){for(let e in this.options.types)console["__"+e]||(console["__"+e]=console[e]),console[e]=this[e].raw}restoreConsole(){for(let e in this.options.types)console["__"+e]&&(console[e]=console["__"+e],delete console["__"+e])}wrapStd(){this._wrapStream(this.options.stdout,"log"),this._wrapStream(this.options.stderr,"log")}_wrapStream(e,t){e&&(e.__write||(e.__write=e.write),e.write=e=>{this[t].raw(String(e).trim())})}restoreStd(){this._restoreStream(this.options.stdout),this._restoreStream(this.options.stderr)}_restoreStream(e){e&&e.__write&&(e.write=e.__write,delete e.__write)}pauseLogs(){S0=!0}resumeLogs(){for(let e of(S0=!1,S1.splice(0)))e[0]._logFn(e[1],e[2])}mockTypes(e){let t=e||this.options.mockFn;if(this._mockFn=t,"function"==typeof t)for(let e in this.options.types)this[e]=t(e,this.options.types[e])||this[e],this[e].raw=this[e]}_wrapLogFn(e,t){return(...s)=>{if(S0){S1.push([this,e,s,t]);return}return this._logFn(e,s,t)}}_logFn(e,t,s){var n,i;if((e.level||0)>this.level)return!1;let r={date:new Date,args:[],...e,level:S3(e.level,this.options.types)};s||1!==t.length||((i=n=t[0],"[object Object]"===Object.prototype.toString.call(i)&&(n.message||n.args)&&!n.stack)?0:1)?r.args=[...t]:Object.assign(r,t[0]),r.message&&(r.args.unshift(r.message),delete r.message),r.additional&&(Array.isArray(r.additional)||(r.additional=r.additional.split("\n")),r.args.push("\n"+r.additional.join("\n")),delete r.additional),r.type="string"==typeof r.type?r.type.toLowerCase():"log",r.tag="string"==typeof r.tag?r.tag:"";let a=(e=!1)=>{let t=(this._lastLog.count||0)-this.options.throttleMin;if(this._lastLog.object&&t>0){let e=[...this._lastLog.object.args];t>1&&e.push(`(repeated ${t} times)`),this._log({...this._lastLog.object,args:e}),this._lastLog.count=1}e&&(this._lastLog.object=r,this._log(r))};clearTimeout(this._lastLog.timeout);let o=this._lastLog.time&&r.date?r.date.getTime()-this._lastLog.time.getTime():0;if(this._lastLog.time=r.date,o<this.options.throttle)try{let e=JSON.stringify([r.type,r.tag,r.args]),t=this._lastLog.serialized===e;if(this._lastLog.serialized=e,t&&(this._lastLog.count=(this._lastLog.count||0)+1,this._lastLog.count>this.options.throttleMin)){this._lastLog.timeout=setTimeout(a,this.options.throttle);return}}catch{}a(!0)}_log(e){for(let t of this.options.reporters)t.log(e,{options:this.options})}}function S3(e,t={},s=3){return void 0===e?s:"number"==typeof e?e:t[e]&&void 0!==t[e].level?t[e].level:s}S2.prototype.add=S2.prototype.addReporter,S2.prototype.remove=S2.prototype.removeReporter,S2.prototype.clear=S2.prototype.removeReporter,S2.prototype.withScope=S2.prototype.withTag,S2.prototype.mock=S2.prototype.mockTypes,S2.prototype.pause=S2.prototype.pauseLogs,S2.prototype.resume=S2.prototype.resumeLogs;let S5=v(2,(e,t)=>lw(dE,t)(e)),S4=e=>b8(d6(dN,nz(e))),S6=e=>b8(d6(dN,nB(e))),S8=v(2,(e,t)=>b1(S6(e),()=>S4(t))),S7=Symbol("uploadthing-custom-id-symbol"),S9=["upload","failure","multipart-complete"],ke=e=>"string"==typeof e&&S9.includes(e),kt=["callback"],ks=e=>"string"==typeof e&&kt.includes(e);var kn="6.12.0";let ki=w1("inline","attachment");w1("public-read","private");class kr extends SV("FileUploadData")({name:Se,size:St,type:Se}){}class ka extends kr.extend("FileUploadDataWithCustomId")({customId:Sr(Se)}){}class ko extends ka.extend("UploadedFileData")({key:Se,url:Se}){}class kl extends SV("PresignedBaseSchema")({key:Se,fileName:Se,fileType:Se,fileUrl:Se,pollingJwt:Se,pollingUrl:Se,contentDisposition:ki,customId:Sr(Se)}){}class kc extends kl.extend("MPUResponseSchema")({urls:Su(Se),uploadId:Se,chunkSize:St,chunkCount:St}){}class ku extends kl.extend("PSPResponseSchema")({url:Se,fields:ST(Se,Se)}){}let kp=Su(Si(ku,kc));class km extends SV("PollUploadResponse")({status:Se,fileData:Sw(SO({fileKey:Sr(Se),fileName:Se,fileSize:St,fileType:Se,metadata:Sr(Se),customId:Sr(Se),callbackUrl:Sw(Se),callbackSlug:Sw(Se)}))}){}class kh extends SV("FailureCallbackResponse")({success:Ss,message:Sw(Se)}){}class kf extends SV("ServerCallbackPostResponse")({status:Se}){}class kd extends SV("UploadActionPayload")({files:Su(kr),input:w9}){}class kg extends SV("FailureActionPayload")({fileKey:Se,uploadId:Sr(Se),storageProviderError:Sw(Se),fileName:Se}){}class kb extends SV("MultipartCompleteActionPayload")({fileKey:Se,uploadId:Se,etags:Su(SO({tag:Se,partNumber:St}))}){}let kx=e=>!!(e.ok&&!(e.status>=400)&&e.headers.has("x-uploadthing-version")),ky=(e,t)=>xC(function*(){let s=yield*yk(yf(`/api/pollUpload/${e}`)).pipe(oA(yO),oA(wQ(km)),oA(e=>"done"===e.status?oX(e.fileData):oO(new yo)),bl({while:e=>e instanceof yo,schedule:yT()}),mT("RetryError",e=>o_(e)));if(void 0===s)return yield*mU(`Failed to simulate callback for file ${e}`),yield*new yw({code:"UPLOAD_FAILED",message:"File took too long to upload"});let n=s.callbackUrl+`?slug=${s.callbackSlug}`;n.startsWith("http")||(n="http://"+n),yield*mC("SIMULATING FILE UPLOAD WEBHOOK CALLBACK",n);let i=JSON.stringify({status:"uploaded",metadata:JSON.parse(s.metadata??"{}"),file:new ko({url:`https://utfs.io/f/${encodeURIComponent(e)}`,key:e,name:s.fileName,size:s.fileSize,customId:s.customId,type:s.fileType})}),r=yield*mJ({try:()=>yN(i,t),catch:e=>new yw({code:"INTERNAL_SERVER_ERROR",message:"Failed to sign payload",cause:e})});return kx((yield*yk(n,{method:"POST",body:i,headers:{"Content-Type":"application/json","uploadthing-hook":"callback","x-uploadthing-signature":r}}).pipe(mT("FetchError",()=>oX(new Response(null,{status:500}))))))?yield*mC("Successfully simulated callback for file",e):yield*mU(`
Failed to simulate callback for file '${s.fileKey}'. Is your webhook configured correctly?
  - Make sure the URL '${n}' is accessible without any authentication. You can verify this by running 'curl -X POST ${n}' in your terminal
  - Still facing issues? Read https://docs.uploadthing.com/faq for common issues
`.trim()),s}),kv=(e,t)=>{switch(t){case"error":case"fatal":return`\x1b[41m\x1b[30m${e}\x1b[0m`;case"warn":return`\x1b[43m\x1b[30m${e}\x1b[0m`;case"info":case"log":return`\x1b[44m\x1b[30m${e}\x1b[0m`;case"debug":case"trace":return`\x1b[47m\x1b[30m${e}\x1b[0m`;case"success":return`\x1b[42m\x1b[30m${e}\x1b[0m`;default:return e}},k_={fatal:"⨯",error:"⨯",warn:"⚠️",info:"ℹ",log:"ℹ",debug:"⚙",trace:"→",success:"✓"},kw=function(e={}){return new S2(e)}({reporters:[{log:e=>{let{type:t,tag:s,date:n,args:i}=e,r=k_[t],a=kv(` ${r} ${s} ${n.toLocaleTimeString()} `,t);console.log(i.map(e=>yy(e)&&"string"==typeof e.stack?e.message+"\n"+function(e){let t="cwd"in xQ&&"function"==typeof xQ.cwd?xQ.cwd():"__UnknownCWD__";return"  "+e.split("\n").splice(1).map(e=>e.trim().replace("file://","").replace(t+"/","")).join("\n  ")}(e.stack):e).map(e=>"string"==typeof e?e:JSON.stringify(e,null,4)).join(" ").split("\n").map(e=>a+" "+e).join("\n"))}}],defaults:{tag:"UPLOADTHING"}}),kS={All:"verbose",Fatal:"error",Error:"error",Info:"info",Debug:"debug",Trace:"trace",Warning:"warn",None:"silent"},kk=(e="info")=>(kw.level=SY[e],S5({silent:lp,error:pU,warn:pP,info:lc,debug:lu,trace:p$,verbose:ll}[e])),kO=S8(dR,hu(({logLevel:e,message:t})=>{kw[kS[e._tag]](t)})),kE=(e,t)=>yk(yf("/api/completeMultipart"),{method:"POST",body:JSON.stringify({fileKey:e.key,uploadId:e.uploadId,etags:t}),headers:{"Content-Type":"application/json"}}).pipe(oA(yO),oA(wQ(SO({success:Ss,message:Sw(Se)}))),xL("completeMultipartUpload",{attributes:{etags:t,presigned:e}})),kT=e=>yk(yf("/api/failureCallback"),{method:"POST",body:JSON.stringify({fileKey:e.key,uploadId:e.uploadId}),headers:{"Content-Type":"application/json"}}).pipe(oA(yO),oA(wQ(kh)),xL("abortMultipartUpload",{attributes:{presigned:e}})),kR=e=>e||(xQ.env.UPLOADTHING_SECRET?xQ.env.UPLOADTHING_SECRET:void 0);class kI extends x7{constructor(e,t,s){super({reason:`You uploaded a ${e} file that was ${yb(s)}, but the limit for that type is ${t}`}),this._tag="FileSizeMismatch",this.name="FileSizeMismatchError"}}class kN extends x7{constructor(e,t,s,n){super({reason:`You uploaded ${n} file(s) of type '${e}', but the ${t} for that type is ${s}`}),this._tag="FileCountMismatch",this.name="FileCountMismatchError"}}let kF=(e,t)=>xC(function*(){let s={};for(let n of e){let e=yield*yh(n.name,yx(t));s[e]=(s[e]??0)+1;let i=t[e]?.maxFileSize;if(!i)return yield*new ys(e,"maxFileSize");let r=yield*yg(i);if(n.size>r)return yield*new kI(e,i,n.size)}for(let e in s){let n=t[e];if(!n)return yield*new ys(e);let i=s[e],r=n.minFileCount,a=n.maxFileCount;if(r>a)return yield*new yw({code:"BAD_REQUEST",message:"Invalid config during file count - minFileCount > maxFileCount",cause:`minFileCount must be less than maxFileCount for key ${e}. got: ${r} > ${a}`});if(i<r)return yield*new kN(e,"minimum",r,i);if(i>a)return yield*new kN(e,"maximum",a,i)}return null});class kA extends th("uploadthing/RequestInput")(){}let kj=(e,t,s)=>xC(function*(){let n=yield*ol(e.req)?e.req:oX(e.req),i=new URL(n.url),r=n.headers,a=i.searchParams,o=a.get("actionType"),l=a.get("slug"),c=r.get("uploadthing-hook"),u=r.get("x-uploadthing-package")??"unknown",p=r.get("x-uploadthing-version"),m=kR(t.config?.uploadthingSecret);if(null!=p&&p!==kn)return yield*mU(`Client version mismatch. Server version: ${kn}, Client version: ${p}`),yield*new yw({code:"BAD_REQUEST",message:"Client version mismatch",cause:`Server version: ${kn}, Client version: ${p}`});if(!l)return yield*mU("No slug provided in params:",a),yield*new yw({code:"BAD_REQUEST",message:"No slug provided in params"});if(l&&"string"!=typeof l){let e=`Expected slug to be of type 'string', got '${typeof l}'`;return yield*mU(e),yield*new yw({code:"BAD_REQUEST",message:"`slug` must be a string",cause:e})}if(!m){let e="No secret provided, please set UPLOADTHING_SECRET in your env file or in the config";return yield*mU(e),yield*new yw({code:"MISSING_ENV",message:"No secret provided",cause:e})}if(!m.startsWith("sk_")){let e="Invalid secret provided, UPLOADTHING_SECRET must start with 'sk_'";return yield*mU(e),yield*new yw({code:"MISSING_ENV",message:"Invalid API key. API keys must start with 'sk_'.",cause:e})}if(u&&"string"!=typeof u){let e=`Expected x-uploadthing-package to be of type 'string', got '${typeof u}'`;return yield*mU(e),yield*new yw({code:"BAD_REQUEST",message:"`x-uploadthing-package` must be a string. eg. '@uploadthing/react'",cause:e})}let h=t.router[l];if(!h){let e=`No file route found for slug ${l}`;return yield*mU(e),yield*new yw({code:"NOT_FOUND",message:e})}if(o&&!ke(o)){let e=`Expected ${S9.map(e=>`"${e}"`).join(", ").replace(/,(?!.*,)/," or")} but got "${o}"`;return yield*mU("Invalid action type",e),yield*new yw({code:"BAD_REQUEST",cause:`Invalid action type ${o}`,message:e})}if(c&&!ks(c)){let e=`Expected ${kt.map(e=>`"${e}"`).join(", ").replace(/,(?!.*,)/," or")} but got "${c}"`;return yield*mU("Invalid uploadthing hook",e),yield*new yw({code:"BAD_REQUEST",cause:`Invalid uploadthing hook ${c}`,message:e})}if(!o&&!c||o&&c){let e="Exactly one of 'actionType' or 'uploadthing-hook' must be provided";return yield*mU(e),yield*new yw({code:"BAD_REQUEST",message:e})}yield*mM("✔︎ All request input is valid");let f=yield*yS;f.baseHeaders["x-uploadthing-api-key"]=m,f.baseHeaders["x-uploadthing-fe-package"]=u,f.baseHeaders["x-uploadthing-be-adapter"]=s;let{isDev:d=xV}=t.config??{};d&&(yield*mC("UploadThing dev server is now running!"));let g={req:n,config:t.config??{},middlewareArgs:e.middlewareArgs,isDev:d,apiKey:m,slug:l,uploadable:h,hook:null,action:null};return o?{...g,action:o}:{...g,hook:c}}),kM=xC(function*(){let{config:e,req:t,isDev:s}=yield*kA,n=new URL(t.url);if(e?.callbackUrl?n=yield*yv(e.callbackUrl):xQ.env.UPLOADTHING_URL&&(n=yield*yv(xQ.env.UPLOADTHING_URL)),s||!n.host.includes("localhost"))return n;let i=t.headers.get("origin")??t.headers.get("referer")??t.headers.get("host")??t.headers.get("x-forwarded-host");return(i&&!i.includes("http")&&(i=(t.headers.get("x-forwarded-proto")??"https")+"://"+i),!i||i.includes("localhost"))?(mL("You are using a localhost callback url in production which is not supported.","Read more and learn how to fix it here: https://docs.uploadthing.com/faq#my-callback-runs-in-development-but-not-in-production"),n):yield*yv(i)}),kC=(e,t,s)=>e(t).pipe(kk(s?.logLevel),xt(kO),mz(yS,{fetch:s?.fetch??globalThis.fetch,baseHeaders:{"x-uploadthing-version":kn,"x-uploadthing-api-key":void 0,"x-uploadthing-be-adapter":void 0,"x-uploadthing-fe-package":void 0}}),kL,bz),kL=e=>og(e,e=>oX({success:!1,error:e})),kU=kA.pipe(oA(({action:e,hook:t})=>{if("callback"===t)return k$;switch(e){case"upload":return kz;case"multipart-complete":return kB;case"failure":return kq}}),oq(e=>({success:!0,...e}))),kP=(e,t)=>s=>kU.pipe(mB(kA,kj(s,e,t)),mR({InvalidJsonError:e=>new yw({code:"INTERNAL_SERVER_ERROR",message:"An error occured while parsing input/output",cause:e}),BadRequestError:e=>oO(new yw({code:"INTERNAL_SERVER_ERROR",message:e.getMessage(),cause:e,data:e.json})),FetchError:e=>new yw({code:"INTERNAL_SERVER_ERROR",message:"string"==typeof e.error?e.error:e.message,cause:e,data:e.error}),ParseError:e=>new yw({code:"INTERNAL_SERVER_ERROR",message:"An error occured while parsing input/output",cause:e})}),mK(e=>mU(e.message))),k$=xC(function*(){let{req:e,uploadable:t,apiKey:s}=yield*kA,n=yield*mJ({try:async()=>yF(await e.clone().text(),e.headers.get("x-uploadthing-signature"),s),catch:()=>new yw({code:"BAD_REQUEST",message:"Invalid signature"})});if(yield*mM("Signature verified:",n),!n)return yield*mU("Invalid signature"),yield*new yw({code:"BAD_REQUEST",message:"Invalid signature"});let i=yield*oF(yE(e),wQ(SO({status:Se,file:ko,metadata:ST(Se,w9)})));yield*mM("Handling callback request with input:",i);let r=yield*mJ({try:async()=>t.resolver({file:i.file,metadata:i.metadata}),catch:e=>new yw({code:"INTERNAL_SERVER_ERROR",message:"Failed to run onUploadComplete",cause:e})}).pipe(mK(e=>mU("Failed to run onUploadComplete. You probably shouldn't be throwing errors here.",e))),a={fileKey:i.file.key,callbackData:r??null};return yield*mM("'onUploadComplete' callback finished. Sending response to UploadThing:",a),yield*yk(yf("/api/serverCallback"),{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}}).pipe(oA(yO),oA(wQ(kf))),{body:null}}),kD=e=>xC(function*(){let{uploadable:t,middlewareArgs:s}=yield*kA,{files:n,input:i}=e;yield*mM("Running middleware");let r=yield*mJ({try:async()=>t._def.middleware({...s,input:i,files:n}),catch:e=>e instanceof yw?e:new yw({code:"INTERNAL_SERVER_ERROR",message:"Failed to run middleware",cause:e})}).pipe(mK(e=>mU("An error occured in your middleware function",e)));if(r[S7]&&r[S7].length!==n.length){let e=`Expected files override to have the same length as original files, got ${r[S7].length} but expected ${n.length}`;return yield*mU(e),yield*new yw({code:"BAD_REQUEST",message:"Files override must have the same length as files",cause:e})}let a=yield*dU(n,(e,t)=>xC(function*(){let s=r[S7]?.[t];return s&&s.size!==e.size&&(yield*mL("File size mismatch. Reverting to original size")),{name:s?.name??e.name,size:e.size,customId:s?.customId}}));return{metadata:r,filesWithCustomIds:a}}),kz=xC(function*(){let e;let t=yield*kA,{files:s,input:n}=yield*oF(yE(t.req),wQ(kd));yield*mM("Handling upload request with input:",{files:s,input:n}),yield*mM("Parsing user input");let i=t.uploadable._def.inputParser,r=yield*mJ({try:async()=>(function(e){if("function"==typeof e.parse)return e.parse;throw Error("Invalid parser")})(i)(n),catch:e=>new yw({code:"BAD_REQUEST",message:"Invalid input",cause:e})}).pipe(mK(e=>mU("An error occured trying to parse input",e)));yield*mM("Input parsed successfully",r);let{metadata:a,filesWithCustomIds:o}=yield*kD({input:r,files:s});yield*mM("Parsing route config",t.uploadable._def.routerConfig);let l=yield*ym(t.uploadable._def.routerConfig).pipe(mT("InvalidRouteConfig",e=>new yw({code:"BAD_REQUEST",message:"Invalid config",cause:e})));yield*mM("Route config parsed successfully",l),yield*mM("Validating files meet the config requirements",s),yield*kF(s,l).pipe(og(e=>new yw({code:"BAD_REQUEST",message:`Invalid config: ${e._tag}`,cause:"reason"in e?e.reason:e.message})));let c=yield*kM.pipe(mK(e=>mU("Failed to resolve callback URL",e)),mT("InvalidURL",e=>new yw({code:"INTERNAL_SERVER_ERROR",message:e.message})));yield*mM("Retrieving presigned URLs from UploadThing. Callback URL is:",c.href);let u=yield*yk(yf("/api/prepareUpload"),{method:"POST",body:JSON.stringify({files:o,routeConfig:l,metadata:a,callbackUrl:c.origin+c.pathname,callbackSlug:t.slug}),headers:{"Content-Type":"application/json"}}).pipe(oA(yO),oA(wQ(kp)));if(yield*mM("UploadThing responded with:",u),yield*mM("Sending presigned URLs to client"),t.isDev){let s=yield*yS;e=dU(u,e=>ky(e.key,t.apiKey),{concurrency:10}).pipe(xt(kO),mz(yS,s),bz)}return{body:u,cleanup:e}}),kB=xC(function*(){let e=yield*kA,t=yield*oF(yE(e.req),wQ(kb));yield*mM("Handling multipart-complete request with input:",t),yield*mM("Notifying UploadThing that multipart upload is complete");let s=yield*kE({key:t.fileKey,uploadId:t.uploadId},t.etags);return yield*mM("UploadThing responded with:",s),{body:null}}),kq=xC(function*(){let{req:e,uploadable:t}=yield*kA,{fileKey:s,uploadId:n}=yield*oF(yE(e),wQ(kg));yield*mM("Handling failure request with input:",{fileKey:s,uploadId:n}),yield*mM("Notifying UploadThing that upload failed");let i=yield*kT({key:s,uploadId:n});return yield*mM("UploadThing responded with:",i),yield*mM("Running 'onUploadError' callback"),yield*mE({try:()=>{t._def.onUploadError({error:new yw({code:"UPLOAD_FAILED",message:`Upload failed for ${s}`}),fileKey:s})},catch:e=>new yw({code:"INTERNAL_SERVER_ERROR",message:"Failed to run onUploadError",cause:e})}).pipe(mK(e=>mU("Failed to run onUploadError. You probably shouldn't be throwing errors here.",e))),{body:null}}),kK=e=>()=>yx(e.router).map(t=>{let s=bB(ym(e.router[t]._def.routerConfig));return{slug:t,config:s}}),kJ=(e,t)=>{!function(){let e,t;if(void 0===xQ)return;let s=xQ.versions?.node?.split(".");s&&([e,t]=s.map(e=>parseInt(e,10)));let n=xQ.env?.NODE;if(!e&&n){let s=/v(\d+)\.(\d+)\.(\d+)/.exec(n)?.[0];s&&([e,t]=s.substring(1).split(".").map(e=>parseInt(e,10)))}e&&t&&!(e>18)&&(18===e&&t>=13||(bB(mU(`YOU ARE USING A LEGACY (${e}.${t}) NODE VERSION WHICH ISN'T OFFICIALLY SUPPORTED. PLEASE UPGRADE TO NODE ^18.13.`)),xQ.exit?.(1)))}();let s=kP(e,t),n=kK(e);return{GET:e=>Response.json(n(),{headers:{"x-uploadthing-version":kn}}),POST:async t=>{let n=t instanceof Request?t:t.request,i=await kC(s,{req:n,middlewareArgs:{req:n,event:void 0,res:void 0}},e.config);if(!1===i.success)return Response.json(function(e,t){return(t[Object.keys(t)[0]]?._def.errorFormatter??function(e){return{message:e.message}})(e)}(i.error,e.router),{status:y_[i.error.code]??500,headers:{"x-uploadthing-version":kn}});let r=Response.json(i.body,{headers:{"x-uploadthing-version":kn}});return r.cleanup=i.cleanup,r}}};function kV(e){return{message:e.message}}let kG=()=>({id:"fakeId"}),{GET:kH,POST:kW}=(e=>{let t=kJ(e,"nextjs-app");return{POST:e=>t.POST(e),GET:e=>t.GET(e)}})({router:{imageUploader:(function e(t={}){let s={routerConfig:{image:{maxFileSize:"4MB"}},inputParser:{parse:()=>void 0,_input:void 0,_output:void 0},middleware:()=>({}),onUploadError:()=>({}),errorFormatter:t.errorFormatter??kV,...t};return{input:t=>e({...s,inputParser:t}),middleware:t=>e({...s,middleware:t}),onUploadComplete:e=>({_def:s,resolver:e}),onUploadError:t=>e({...s,onUploadError:t})}})({routerConfig:{image:{maxFileSize:"4MB",maxFileCount:3}},...d}).middleware(async({})=>{let e=await kG();if(!e)throw Error("Unauthorized");return{userId:e.id}}).onUploadComplete(async()=>{})}}),kY=new b.AppRouteRouteModule({definition:{kind:x.x.APP_ROUTE,page:"/api/uploadthing/route",pathname:"/api/uploadthing",filename:"route",bundlePath:"app/api/uploadthing/route"},resolvedPagePath:"C:\\Users\\HP\\Documents\\Dev\\Deepa\\frontend\\deepa\\app\\api\\uploadthing\\route.ts",nextConfigOutput:"",userland:g}),{requestAsyncStorage:kQ,staticGenerationAsyncStorage:kX,serverHooks:kZ}=kY,k0="/api/uploadthing/route";function k1(){return(0,y.patchFetch)({serverHooks:kZ,staticGenerationAsyncStorage:kX})}},9303:(e,t,s)=>{e.exports=s(517)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),n=t.X(0,[948],()=>s(3211));module.exports=n})();